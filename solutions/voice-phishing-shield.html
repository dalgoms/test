<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceGuard AI | 보이스피싱 통합관제시스템</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Payroll 대시보드 스타일 - 파란색 단일 톤 */
            --primary: #4A90E2;
            --primary-light: #6BA5E7;
            --primary-dark: #2E5C8A;
            --primary-glow: rgba(74, 144, 226, 0.2);
            --secondary: #2E5C8A;
            --success: #4A90E2;
            --warning: #FF4444;
            --danger: #FF4444;
            --info: #4A90E2;
            
            /* 다크 네이비 배경 */
            --bg-primary: #0a0e1a;
            --bg-secondary: #1a1d2e;
            --bg-tertiary: #242840;
            --bg-card: #1a1d2e;
            --bg-elevated: #2a2e45;
            
            /* 텍스트 */
            --text-primary: #FFFFFF;
            --text-secondary: #A0A0A0;
            --text-muted: #6B7280;
            
            /* 보더 & 쉐도우 */
            --border: #2a2e45;
            --border-light: rgba(255, 255, 255, 0.08);
            --border-blue: rgba(74, 144, 226, 0.3);
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.6);
            --shadow-blue: 0 2px 12px rgba(74, 144, 226, 0.2);
            
            /* 파란색 계열로 통일 */
            --gradient-blue: #4A90E2;
            --gradient-green: #4A90E2;
            --gradient-yellow: #4A90E2;
            --gradient-red: #FF4444;
            --gradient-purple: #4A90E2;
            
            --sidebar-width: 280px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 15px;
        }

        /* ===== SPLASH SCREEN ===== */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .splash-logo {
            width: 180px;
            height: auto;
            margin-bottom: 40px;
            animation: splashLogoAnim 1.5s ease-out;
        }

        @keyframes splashLogoAnim {
            0% { opacity: 0; transform: scale(0.5) translateY(30px); }
            50% { opacity: 1; transform: scale(1.05) translateY(0); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .splash-title {
            font-size: 42px;
            font-weight: 800;
            color: white;
            margin-bottom: 16px;
            animation: splashTextAnim 1s ease-out 0.3s both;
        }

        @keyframes splashTextAnim {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .splash-subtitle {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 60px;
            animation: splashTextAnim 1s ease-out 0.5s both;
        }

        .splash-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
            animation: splashTextAnim 1s ease-out 0.7s both;
        }

        .splash-spinner-container {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .splash-spinner-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid transparent;
        }

        .splash-spinner-ring:nth-child(1) {
            border-top-color: #4A90E2;
            animation: spinRing1 1.5s linear infinite;
        }

        .splash-spinner-ring:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 10px;
            left: 10px;
            border-right-color: #2E5C8A;
            animation: spinRing2 1.2s linear infinite reverse;
        }

        .splash-spinner-ring:nth-child(3) {
            width: 40px;
            height: 40px;
            top: 20px;
            left: 20px;
            border-bottom-color: #4A90E2;
            animation: spinRing1 0.9s linear infinite;
        }

        .splash-spinner-core {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #4A90E2, #2E5C8A);
            border-radius: 50%;
            animation: pulseCore 1.5s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(74, 144, 226, 0.6);
        }

        @keyframes spinRing1 {
            to { transform: rotate(360deg); }
        }

        @keyframes spinRing2 {
            to { transform: rotate(-360deg); }
        }

        @keyframes pulseCore {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.7; }
        }

        .splash-loader-text {
            font-size: 14px;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
        }

        .splash-loader-text span {
            display: inline-block;
            animation: textPulse 1.5s ease-in-out infinite;
        }

        @keyframes textPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .splash-progress {
            width: 320px;
            height: 6px;
            background: rgba(74, 144, 226, 0.15);
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
            animation: splashTextAnim 1s ease-out 0.9s both;
            position: relative;
        }

        .splash-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #2E5C8A, #4A90E2, #6BB3F0);
            background-size: 200% 100%;
            border-radius: 3px;
            animation: gradientFlow 1s ease infinite;
            position: relative;
            transition: width 0.05s ease-out;
        }

        .splash-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 30px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 1s ease-in-out infinite;
        }

        @keyframes progressAnim {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }

        .splash-progress-text {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 12px;
            font-variant-numeric: tabular-nums;
        }
        
        .splash-credit {
            position: absolute;
            bottom: 30px;
            font-size: 11px;
            color: var(--text-muted);
            letter-spacing: 1px;
            opacity: 0.6;
        }

        /* Page Transition */
        .main-wrapper {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .main-wrapper.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            z-index: 100;
        }

        .logo {
            position: relative;
            padding: 28px;
            display: flex;
            align-items: center;
            gap: 14px;
            border-bottom: 1px solid var(--border);
            min-height: 100px;
        }

        .logo-img {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            object-fit: contain;
            flex-shrink: 0;
        }

        .logo-icon {
            display: none;
            width: 44px;
            height: 44px;
            background: var(--gradient-blue);
            border-radius: 12px;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: 700;
            color: white;
            box-shadow: var(--shadow-blue);
            flex-shrink: 0;
        }

        .logo-text-wrap { flex: 1; min-width: 0; }
        .logo-text { font-size: 22px; font-weight: 700; white-space: nowrap; }
        .logo-sub { font-size: 13px; color: var(--text-muted); font-weight: 400; white-space: nowrap; }

        .nav-section {
            padding: 24px 18px;
            flex: 1;
            overflow-y: auto;
        }

        .nav-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 14px;
            padding-left: 14px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px 18px;
            border-radius: 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-bottom: 6px;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(0, 102, 255, 0.1);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(0, 102, 255, 0.2) 0%, transparent 100%);
            color: var(--primary);
            border-left: 4px solid var(--primary);
            box-shadow: inset 0 0 20px rgba(0, 102, 255, 0.1);
        }

        .nav-item i { font-size: 22px; width: 28px; text-align: center; }

        .nav-item .badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 13px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
        }

        .nav-divider { height: 1px; background: var(--border); margin: 20px 0; }

        .user-section {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: #000000;
            border: 1px solid var(--border);
            color: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
        }

        .user-info { flex: 1; }
        .user-name { font-size: 16px; font-weight: 600; }
        .user-role { font-size: 14px; color: var(--text-muted); }

        .user-status {
            width: 12px;
            height: 12px;
            background: var(--success);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--success);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-left: var(--sidebar-width);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ===== HEADER ===== */
        .header {
            position: sticky;
            top: 0;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 18px 36px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 50;
        }

        .header-left { display: flex; align-items: center; gap: 24px; }

        .page-title { font-size: 26px; font-weight: 700; }

        .live-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 18px;
            background: rgba(74, 144, 226, 0.15);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
        }

        .live-dot {
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 10px var(--primary); }
            50% { opacity: 0.5; box-shadow: none; }
        }

        .header-center { display: flex; align-items: center; gap: 14px; }

        /* 토스뱅크 스타일 검색바 */
        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 14px;
            padding: 12px 16px;
            width: 320px;
            transition: all 0.2s;
        }

        .search-box:focus-within {
            background: var(--bg-elevated);
            box-shadow: 0 0 0 2px var(--primary);
        }

        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 500;
        }

        .search-box input::placeholder { color: var(--text-muted); font-weight: 400; }
        .search-box > i { color: var(--text-muted); font-size: 18px; }
        
        .search-btn {
            background: transparent;
            border: none;
            border-radius: 8px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .search-btn i { color: var(--text-muted); font-size: 18px; }
        .search-btn:hover { background: var(--bg-secondary); }
        .search-btn:hover i { color: var(--primary); }

        /* 토스뱅크 스타일 날짜 선택 */
        .date-picker-wrapper {
            position: relative;
        }

        .date-picker {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 14px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .date-picker:hover { background: var(--bg-elevated); }
        .date-picker.active { background: var(--bg-elevated); box-shadow: 0 0 0 2px var(--primary); }
        .date-picker i { color: var(--text-muted); font-size: 18px; }
        .date-picker i:last-child { font-size: 16px; }

        /* 토스뱅크 스타일 달력 드롭다운 */
        .calendar-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            display: none;
            min-width: 300px;
        }

        .calendar-dropdown.show { display: block; animation: dropdownFade 0.2s ease; }

        @keyframes dropdownFade {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .calendar-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-nav-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--bg-tertiary);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .calendar-nav-btn:hover { background: var(--primary); color: white; }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day-header {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            padding: 8px 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .calendar-day:hover { background: var(--bg-tertiary); color: var(--text-primary); }
        .calendar-day.today { background: var(--bg-tertiary); color: var(--primary); font-weight: 700; }
        .calendar-day.selected { background: var(--primary); color: white; font-weight: 700; }
        .calendar-day.other-month { color: var(--text-muted); opacity: 0.5; }

        .calendar-shortcuts {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .calendar-shortcut {
            flex: 1;
            padding: 10px;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-shortcut:hover { background: var(--primary); color: white; }

        .header-right { display: flex; align-items: center; gap: 16px; }

        .datetime {
            text-align: right;
            padding-right: 20px;
            border-right: 1px solid var(--border);
        }

        .datetime-date { font-size: 14px; color: var(--text-muted); }
        .datetime-time { font-size: 24px; font-weight: 600; font-variant-numeric: tabular-nums; }

        .header-btn {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-size: 22px;
        }

        .header-btn:hover {
            background: rgba(0, 102, 255, 0.15);
            color: var(--primary);
            border-color: var(--primary);
        }

        .header-btn .notification-dot {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 10px;
            height: 10px;
            background: var(--danger);
            border-radius: 50%;
        }

        /* 헤더 드롭다운 */
        .header-btn-wrapper {
            position: relative;
        }

        .header-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            width: 360px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

        .header-dropdown.show {
            display: block;
            animation: dropdownFade 0.2s ease;
        }

        .dropdown-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
        }

        .dropdown-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .dropdown-badge {
            padding: 4px 10px;
            background: var(--danger);
            color: white;
            font-size: 12px;
            font-weight: 700;
            border-radius: 12px;
        }

        .dropdown-list {
            max-height: 320px;
            overflow-y: auto;
        }

        .dropdown-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 16px 20px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid var(--border);
        }

        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { background: rgba(255, 255, 255, 0.03); }

        .dropdown-item.critical {
            background: rgba(229, 69, 69, 0.05);
        }

        .dropdown-item.critical:hover {
            background: rgba(229, 69, 69, 0.1);
        }

        .dropdown-item-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .dropdown-item.critical .dropdown-item-icon {
            background: rgba(229, 69, 69, 0.15);
            color: var(--danger);
        }

        .dropdown-item-content { flex: 1; }

        .dropdown-item-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .dropdown-item-desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        .dropdown-item-time {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .dropdown-footer {
            padding: 12px 16px;
            border-top: 1px solid var(--border);
            background: var(--bg-tertiary);
        }

        .dropdown-footer-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: var(--primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .dropdown-footer-btn:hover {
            background: rgba(74, 144, 226, 0.1);
        }

        /* 설정 드롭다운 */
        .settings-dropdown {
            width: 300px;
        }

        .dropdown-setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            border-bottom: 1px solid var(--border);
        }

        .dropdown-setting-item:last-child { border-bottom: none; }

        .dropdown-setting-info {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .dropdown-setting-info i {
            font-size: 18px;
            color: var(--text-muted);
        }

        /* ===== PAGE CONTAINER ===== */
        .pages-wrapper {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .page { 
            display: none; 
            padding: 28px; 
            animation: fadeIn 0.3s ease; 
            box-sizing: border-box;
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }
        .page.active { 
            display: flex; 
            flex-direction: column;
        }
        
        .page::-webkit-scrollbar { width: 8px; }
        .page::-webkit-scrollbar-track { background: var(--bg-primary); }
        .page::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        .page::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
        
        /* 페이지별 flex 레이아웃 */
        #page-alerts .realtime-stats,
        #page-dashboard .realtime-stats,
        #page-reports .realtime-stats,
        #page-customers .realtime-stats { flex-shrink: 0; }
        
        #page-alerts .card.table-card,
        #page-cases .card.table-card { flex: 1; min-height: 0; }
        
        #page-dashboard .dashboard-grid { flex: 1; min-height: 0; }
        
        #page-reports .report-header { flex-shrink: 0; }
        #page-reports .card { flex: 1; min-height: 0; }
        
        #page-cases .case-filters { flex-shrink: 0; }
        
        #page-customers .customers-toolbar { flex-shrink: 0; }
        #page-customers .customers-pagination { flex-shrink: 0; }
        
        #page-analysis .analysis-layout { flex: 1; min-height: 0; }
        
        #page-rules .settings-section,
        #page-notifications .settings-section { flex: 1; min-height: 0; overflow-y: auto; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== QUICK STATS ===== */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 28px;
            margin-bottom: 36px;
        }

        /* Realtime Stats - New Style */
        .realtime-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 20px;
            flex-shrink: 0;
        }
        
        .realtime-stat-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .realtime-stat-card:hover {
            border-color: var(--border-blue);
            transform: translateY(-2px);
        }
        
        .rt-stat-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .rt-stat-icon.blue { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .rt-stat-icon.red { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .rt-stat-icon.green { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .rt-stat-icon.yellow { background: rgba(74, 144, 226, 0.1); color: var(--primary-light); }
        
        .rt-stat-content { flex: 1; }
        .rt-stat-value { font-size: 28px; font-weight: 800; margin-bottom: 4px; color: #FFFFFF; }
        .rt-stat-value.danger { color: var(--danger); }
        .rt-stat-value.success { color: var(--primary); }
        .rt-stat-value.warning { color: var(--primary-light); }
        .rt-stat-label { font-size: 14px; color: var(--text-muted); }
        
        .rt-stat-change {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .rt-stat-change.up { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .rt-stat-change.down { background: rgba(255, 68, 68, 0.15); color: var(--danger); }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 28px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .stat-card.blue::before { background: var(--gradient-blue); }
        .stat-card.red::before { background: var(--gradient-red); }
        .stat-card.green::before { background: var(--gradient-green); }
        .stat-card.yellow::before { background: rgba(255, 255, 255, 0.8); }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-blue);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            color: white;
        }

        .stat-card.blue .stat-icon { background: var(--gradient-blue); }
        .stat-card.red .stat-icon { background: var(--gradient-red); }
        .stat-card.green .stat-icon { background: var(--gradient-green); }
        .stat-card.yellow .stat-icon { background: rgba(255, 255, 255, 0.8); color: #17171B; }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 15px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 24px;
        }

        .stat-change.up { background: rgba(0, 230, 118, 0.15); color: var(--success); }
        .stat-change.down { background: rgba(255, 61, 87, 0.15); color: var(--danger); }

        .stat-label { font-size: 16px; color: var(--text-muted); margin-bottom: 10px; }
        .stat-value { font-size: 38px; font-weight: 700; margin-bottom: 6px; }
        .stat-sub { font-size: 15px; color: var(--text-secondary); }

        /* ===== CARD ===== */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 18px;
            overflow: hidden;
        }

        .card-header {
            padding: 24px 28px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i { color: var(--primary); font-size: 24px; }

        .card-badge {
            background: var(--danger);
            color: white;
            font-size: 14px;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 14px;
        }

        .card-actions { display: flex; align-items: center; gap: 10px; }

        .card-btn {
            padding: 10px 18px;
            border-radius: 10px;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .card-btn:hover, .card-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            box-shadow: var(--shadow-blue);
        }

        .card-body { padding: 0; }
        
        .card-body.scrollable {
            flex: 1;
            overflow-y: auto;
        }
        
        .card-body.scrollable::-webkit-scrollbar { width: 6px; }
        .card-body.scrollable::-webkit-scrollbar-track { background: var(--bg-elevated); }
        .card-body.scrollable::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        .card-body.scrollable::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
        
        /* 테이블 카드 통일 높이 */
        .table-card {
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .table-card .card-body {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }
        
        .table-card .card-body::-webkit-scrollbar { width: 6px; }
        .table-card .card-body::-webkit-scrollbar-track { background: var(--bg-elevated); }
        .table-card .card-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        .table-card .card-body::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

        /* ===== TABLE ===== */
        table { width: 100%; border-collapse: collapse; }

        th {
            text-align: left;
            padding: 18px 24px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
            background: var(--bg-elevated);
        }

        td {
            padding: 20px 24px;
            font-size: 16px;
            border-bottom: 1px solid var(--border-light);
            vertical-align: middle;
        }

        tr { transition: all 0.15s; cursor: pointer; }
        tr:hover td { background: rgba(255, 255, 255, 0.03); }
        tr.critical td { background: rgba(229, 69, 69, 0.06); }
        tr.critical:hover td { background: rgba(229, 69, 69, 0.12); }
        tr.active td { background: rgba(255, 255, 255, 0.05); }

        .severity-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
        }

        .severity-badge.critical { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .severity-badge.high { background: rgba(74, 144, 226, 0.2); color: var(--primary-light); }
        .severity-badge.medium { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .severity-badge.low { background: rgba(46, 92, 138, 0.2); color: var(--secondary); }

        .severity-dot { width: 10px; height: 10px; border-radius: 50%; background: currentColor; }

        .caller-info { display: flex; flex-direction: column; gap: 4px; }
        .caller-number { font-weight: 600; font-size: 17px; }
        .caller-location { font-size: 14px; color: var(--text-muted); }

        .call-type { padding: 6px 14px; border-radius: 8px; font-size: 14px; font-weight: 500; }
        .call-type.suspicious { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .call-type.normal { background: rgba(74, 144, 226, 0.15); color: var(--primary); }

        .keyword-tags { display: flex; gap: 8px; flex-wrap: wrap; }
        .keyword-tag {
            padding: 6px 12px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
            font-size: 18px;
        }

        .action-btn:hover { background: var(--bg-tertiary); }
        .action-btn.danger:hover { background: rgba(255, 61, 87, 0.15); border-color: var(--danger); color: var(--danger); }

        /* ===== GRID LAYOUTS ===== */
        .main-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
            margin-bottom: 20px; 
            align-items: stretch;
            flex: 1;
            min-height: 0;
        }
        .main-grid > .card { 
            display: flex; 
            flex-direction: column; 
            min-height: 0;
        }
        .main-grid > .card .card-body {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }
        
        .bottom-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px;
            flex: 1;
            min-height: 0;
            margin-bottom: 0;
        }
        .bottom-grid > .card { 
            display: flex; 
            flex-direction: column;
            min-height: 0;
        }
        .bottom-grid > .card .card-body { 
            flex: 1; 
            overflow-y: auto;
            min-height: 0;
        }

        /* ===== ANALYSIS PANEL ===== */
        .analysis-card { 
            display: flex; 
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        .analysis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4A90E2, #2E5C8A, #4A90E2);
            background-size: 200% 100%;
            animation: aiGradient 3s linear infinite;
        }
        
        @keyframes aiGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .analysis-card .card-header {
            background: linear-gradient(180deg, rgba(74, 144, 226, 0.08) 0%, transparent 100%);
        }
        
        .analysis-card .card-body { padding: 20px; flex: 1; overflow-y: auto; }

        .score-section {
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .score-ring {
            position: relative;
            width: 140px;
            height: 140px;
            margin: 0 auto 16px;
        }

        .score-ring svg { transform: rotate(-90deg); }
        .score-ring circle { fill: none; stroke-width: 12; }
        .score-ring .bg { stroke: var(--bg-elevated); }
        .score-ring .progress {
            stroke-linecap: round;
            stroke-dasharray: 377;
            stroke-dashoffset: 45;
            transition: stroke-dashoffset 1s ease-out;
        }

        .score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .score-number { 
            font-size: 38px; 
            font-weight: 800; 
            background: linear-gradient(135deg, #4A90E2, #2E5C8A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .score-label { font-size: 14px; color: var(--text-muted); text-transform: uppercase; }

        .threat-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.15), rgba(46, 92, 138, 0.15));
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 100px;
            font-size: 14px;
            font-weight: 600;
            background-clip: padding-box;
        }
        
        .threat-badge i,
        .threat-badge {
            background: linear-gradient(135deg, #4A90E2, #2E5C8A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 14px;
        }

        .factor-list { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 12px; 
            margin-bottom: 20px; 
        }

        .factor-item { display: flex; align-items: center; gap: 12px; }

        .factor-item.ai-factor {
            padding: 12px;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.05) 0%, rgba(46, 92, 138, 0.03) 100%);
            border: 1px solid rgba(74, 144, 226, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .factor-item.ai-factor:hover {
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.08) 0%, rgba(46, 92, 138, 0.05) 100%);
            border-color: rgba(74, 144, 226, 0.2);
            transform: translateY(-2px);
        }

        .factor-icon {
            width: 40px;
            height: 40px;
            min-width: 40px;
            background: var(--bg-elevated);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-muted);
        }

        .factor-icon.ai-icon {
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.15) 0%, rgba(46, 92, 138, 0.1) 100%);
            color: #4A90E2;
        }
        
        .factor-content { flex: 1; min-width: 0; }

        .factor-unit {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-muted);
            margin-left: 2px;
        }

        .factor-fill.ai-fill {
            background: linear-gradient(90deg, #4A90E2, #2E5C8A);
            position: relative;
            overflow: hidden;
        }

        .factor-fill.ai-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: aiShine 2s infinite;
        }

        @keyframes aiShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .factor-content { flex: 1; }
        .factor-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .factor-name { font-size: 13px; font-weight: 500; color: var(--text-secondary); }
        .factor-value-wrap {
            display: flex;
            align-items: baseline;
            gap: 4px;
        }
        .factor-value { 
            font-size: 16px; 
            font-weight: 700; 
            color: var(--text-primary); 
            transition: transform 0.2s, color 0.3s;
            display: inline-block;
        }
        .factor-unit {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .factor-bar { height: 6px; background: var(--bg-elevated); border-radius: 3px; overflow: hidden; }
        
        .factor-fill { transition: width 0.5s ease; }
        .factor-fill { height: 100%; border-radius: 4px; background: var(--text-muted); }

        .keywords-grid { display: flex; flex-wrap: wrap; gap: 10px; }

        .keyword-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .keyword-count {
            background: var(--bg-elevated);
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 12px;
        }

        /* ===== ALERT LIST (넘버링) ===== */
        .alert-list {
            display: flex;
            flex-direction: column;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s ease;
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .alert-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .alert-item.critical {
            background: rgba(229, 69, 69, 0.04);
        }

        .alert-item.critical:hover {
            background: rgba(229, 69, 69, 0.08);
        }

        .alert-number {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-muted);
            min-width: 50px;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .alert-item.critical .alert-number {
            color: var(--danger);
        }

        .alert-content {
            flex: 1;
        }

        .alert-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .alert-time {
            font-size: 13px;
            color: var(--text-muted);
        }

        .alert-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .alert-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .alert-status {
            min-width: 100px;
            text-align: center;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
        }

        .status-badge.pending {
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
        }

        .status-badge.done,
        .status-badge.active {
            background: rgba(74, 144, 226, 0.15);
            color: var(--primary);
        }
        
        .status-badge.processing {
            background: rgba(74, 144, 226, 0.2);
            color: var(--primary-light);
        }
        
        .status-badge.expired {
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
        }

        .alert-actions {
            min-width: 80px;
        }

        .waveform-box { background: var(--bg-elevated); border-radius: 14px; padding: 24px; margin-bottom: 18px; }

        .waveform { display: flex; align-items: center; justify-content: center; gap: 4px; height: 60px; }

        .wave-bar {
            width: 5px;
            background: var(--gradient-blue);
            border-radius: 3px;
            animation: wave 1.2s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { height: 20%; opacity: 0.5; }
            50% { height: 100%; opacity: 1; }
        }

        .waveform-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-bottom: 28px; }

        .waveform-stat { text-align: center; padding: 16px; background: var(--bg-elevated); border-radius: 12px; }
        .waveform-stat-value { font-size: 22px; font-weight: 700; margin-bottom: 6px; }
        .waveform-stat-value.danger { color: var(--danger); }
        .waveform-stat-value.warning { color: var(--warning); }
        .waveform-stat-label { font-size: 13px; color: var(--text-muted); }

        .emergency-section {
            background: rgba(255, 61, 87, 0.1);
            border: 1px solid rgba(255, 61, 87, 0.2);
            border-radius: 14px;
            padding: 24px;
        }

        /* 상단 고정 긴급 대응 영역 */
        .emergency-bar {
            background: linear-gradient(135deg, rgba(255, 61, 87, 0.12) 0%, rgba(255, 61, 87, 0.06) 100%);
            border: 1px solid rgba(255, 61, 87, 0.3);
            border-radius: 20px;
            padding: 28px 32px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 28px;
            animation: emergencyPulse 2s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .emergency-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--danger), #FF8C42, var(--danger));
            background-size: 200% 100%;
            animation: emergencyGradient 2s linear infinite;
        }
        
        @keyframes emergencyGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        @keyframes emergencyPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 61, 87, 0.4); }
            50% { box-shadow: 0 0 20px 5px rgba(255, 61, 87, 0.2); }
        }

        .emergency-bar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .emergency-bar-icon {
            width: 64px;
            height: 64px;
            background: var(--danger);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            animation: iconBlink 1s ease-in-out infinite;
            box-shadow: 0 4px 20px rgba(255, 61, 87, 0.4);
        }

        @keyframes iconBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .emergency-bar-info h3 {
            font-size: 22px;
            font-weight: 700;
            color: var(--danger);
            margin-bottom: 8px;
        }

        .emergency-bar-info p {
            font-size: 16px;
            color: var(--text-secondary);
        }

        .emergency-bar-actions {
            display: flex;
            gap: 14px;
            flex-shrink: 0;
        }

        .emergency-bar-actions .btn {
            padding: 14px 24px;
            font-size: 16px;
            font-weight: 600;
        }

        /* 실시간 음성 변환 - 데이터 쌓이는 효과 */
        .transcript-live {
            position: relative;
            max-height: 280px;
            overflow-y: auto;
        }

        .transcript-live::-webkit-scrollbar {
            width: 6px;
        }

        .transcript-live::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .transcript-item-live {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 16px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            margin-bottom: 10px;
            animation: slideInUp 0.4s ease-out;
        }

        .transcript-item-live.new {
            background: rgba(0, 102, 255, 0.15);
            border-left-color: var(--secondary);
            animation: newItemGlow 0.6s ease-out;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes newItemGlow {
            0% { box-shadow: 0 0 20px rgba(0, 217, 255, 0.5); }
            100% { box-shadow: none; }
        }

        .transcript-typing {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: rgba(0, 102, 255, 0.1);
            border-radius: 10px;
            border: 1px dashed var(--primary);
            margin-top: 8px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typingDot 1.4s ease-in-out infinite;
        }

        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingDot {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-8px); opacity: 1; }
        }

        .typing-text {
            font-size: 14px;
            color: var(--text-muted);
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--danger);
            font-weight: 600;
        }

        .live-dot {
            width: 10px;
            height: 10px;
            background: var(--danger);
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        .emergency-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--danger);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }

        .btn {
            padding: 18px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: none;
        }

        .btn-danger { background: var(--gradient-red); color: white; }
        .btn-danger:hover { box-shadow: 0 8px 24px rgba(255, 61, 87, 0.4); transform: translateY(-2px); }

        .btn-secondary { background: var(--bg-elevated); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary); }

        .btn-primary { background: var(--gradient-blue); color: white; grid-column: 1 / -1; }
        .btn-primary:hover { box-shadow: 0 8px 24px rgba(0, 102, 255, 0.4); transform: translateY(-2px); }

        /* ===== CHART ===== */
        .chart-container { height: 220px; padding: 28px; }

        /* ===== TRANSCRIPT ===== */
        .transcript-list { padding: 0; max-height: 320px; overflow-y: auto; }

        .transcript-item {
            display: flex;
            gap: 18px;
            padding: 20px 28px;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.15s;
        }

        .transcript-item:hover { background: rgba(0, 102, 255, 0.05); }
        .transcript-time { font-size: 14px; color: var(--text-muted); font-variant-numeric: tabular-nums; width: 50px; }
        .transcript-text { font-size: 16px; line-height: 1.7; }
        .transcript-text .highlight {
            background: rgba(255, 61, 87, 0.15);
            color: var(--danger);
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 500;
        }

        /* ===== GRADIENT CARD ===== */
        .gradient-card {
            position: relative;
            overflow: hidden;
        }
        
        .gradient-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4A90E2, #2E5C8A, #4A90E2);
            background-size: 200% 100%;
            animation: gradientFlow 3s linear infinite;
        }
        
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .gradient-card .card-header {
            background: linear-gradient(180deg, rgba(74, 144, 226, 0.08) 0%, transparent 100%);
        }

        /* ===== BLOCK LIST ===== */
        .block-list { padding: 0; }

        .block-item {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 20px 28px;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.15s;
        }

        .block-item:hover { background: rgba(0, 102, 255, 0.05); }

        .block-icon {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .block-icon.success { background: rgba(74, 144, 226, 0.15); color: var(--primary); }

        .block-content { flex: 1; }
        .block-title { font-size: 16px; font-weight: 500; margin-bottom: 4px; }
        .block-desc { font-size: 14px; color: var(--text-muted); }
        .block-time { font-size: 14px; color: var(--text-muted); }
        .block-amount { font-size: 18px; font-weight: 600; color: var(--success); }

        /* ===== PAGE SPECIFIC: 대시보드 ===== */
        .dashboard-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 24px;
            flex: 1;
            min-height: 0;
        }
        
        .dashboard-grid > .card {
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .dashboard-grid > .card .chart-container {
            flex: 1;
            min-height: 0;
        }

        .big-chart { height: 100%; min-height: 250px; }

        /* ===== PAGE SPECIFIC: 통계 리포트 ===== */
        .report-header { margin-bottom: 24px; flex-shrink: 0; }
        .report-title { font-size: 32px; font-weight: 700; margin-bottom: 12px; }
        .report-period { font-size: 18px; color: var(--text-muted); }
        
        .report-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            flex: 1;
            min-height: 0;
        }
        
        .report-chart-card {
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .report-chart-card .card-header {
            flex-shrink: 0;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .report-chart-card .card-header:hover {
            background: var(--bg-hover);
        }
        
        .report-chart-card .card-header .collapse-icon {
            display: none;
            margin-left: auto;
            transition: transform 0.3s ease;
        }
        
        .report-chart-card.collapsed .card-header .collapse-icon {
            transform: rotate(-90deg);
        }
        
        .report-chart-card .chart-container {
            flex: 1;
            min-height: 200px;
            padding: 16px;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .report-chart-card.collapsed .chart-container {
            min-height: 0;
            max-height: 0;
            padding: 0 16px;
            opacity: 0;
        }
        
        .chart-legend {
            display: flex;
            gap: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .legend-dot.blue { background: var(--primary); }
        .legend-dot.green { background: var(--success); }
        .legend-dot.red { background: var(--danger); }
        .legend-dot.yellow { background: #FFFFFF; }

        .report-stats { display: grid; grid-template-columns: repeat(5, 1fr); gap: 24px; margin-bottom: 36px; }

        .report-stat {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
        }

        .report-stat-value { font-size: 36px; font-weight: 700; margin-bottom: 8px; }
        .report-stat-label { font-size: 15px; color: var(--text-muted); }

        /* ===== PAGE SPECIFIC: 케이스 관리 ===== */
        .case-filters { display: flex; gap: 14px; margin-bottom: 20px; flex-shrink: 0; }

        .case-filter {
            padding: 12px 24px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .case-filter.active, .case-filter:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .case-actions { display: flex; gap: 8px; }
        .case-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            background: var(--bg-elevated);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .case-btn:hover { background: var(--primary); color: white; }
        .case-btn i { font-size: 14px; }

        /* ===== PAGE SPECIFIC: 고객 리스트 ===== */
        .customers-header { margin-bottom: 28px; }
        
        .customers-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .customer-stat-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
        }
        
        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .stat-icon.protected { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .stat-icon.blocked { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .stat-icon.saved { background: rgba(74, 144, 226, 0.15); color: var(--primary); }
        .stat-icon.new { background: rgba(74, 144, 226, 0.1); color: var(--primary-light); }
        
        .stat-content .stat-value { font-size: 28px; font-weight: 800; margin-bottom: 4px; }
        .stat-content .stat-label { font-size: 14px; color: var(--text-muted); }
        
        .customers-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
            flex-shrink: 0;
        }
        
        .toolbar-left { display: flex; align-items: center; gap: 16px; flex: 1; }
        .toolbar-right { display: flex; align-items: center; gap: 12px; }
        
        .customers-toolbar .search-box {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            width: 320px;
        }
        
        .customers-toolbar .search-box input {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 15px;
            width: 100%;
            outline: none;
        }
        
        .customers-toolbar .search-box input::placeholder { color: var(--text-muted); }
        
        .filter-group { display: flex; gap: 8px; flex-wrap: wrap; }
        
        .filter-btn {
            padding: 10px 18px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .btn-primary {
            padding: 12px 20px;
            background: var(--primary);
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        
        .btn-primary:hover { background: #2563eb; }
        
        .btn-secondary {
            padding: 12px 20px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--text-muted); }
        
        .customers-table-wrapper {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        
        .customers-table-wrapper::-webkit-scrollbar { width: 6px; }
        .customers-table-wrapper::-webkit-scrollbar-track { background: var(--bg-elevated); }
        .customers-table-wrapper::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        
        .customers-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .customers-table thead {
            background: var(--bg-tertiary);
        }
        
        .customers-table th {
            padding: 16px 20px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        
        .customers-table td {
            padding: 18px 20px;
            border-top: 1px solid var(--border);
            font-size: 15px;
        }
        
        .customers-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .customers-table input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
        }
        
        .customer-info { display: flex; align-items: center; gap: 14px; }
        
        .customer-avatar {
            width: 44px;
            height: 44px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-secondary);
        }
        
        .customer-details .customer-name { font-weight: 600; margin-bottom: 4px; }
        .customer-details .customer-contact { font-size: 13px; color: var(--text-muted); }
        
        .date-text { color: var(--text-secondary); }
        
        .threat-count { color: var(--text-secondary); }
        .threat-count.warning { color: var(--danger); font-weight: 600; }
        
        .saved-amount { color: var(--text-secondary); }
        .saved-amount.highlight { color: var(--primary); font-weight: 600; }
        
        .last-activity { color: var(--text-muted); font-size: 14px; }
        
        .action-btns { display: flex; gap: 8px; }
        
        .tbl-action-btn {
            width: 36px;
            height: 36px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tbl-action-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .tbl-action-btn.renew:hover {
            background: var(--success);
            border-color: var(--success);
        }
        
        .customers-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            padding-top: 16px;
        }
        
        .pagination-info { font-size: 14px; color: var(--text-muted); }
        
        .pagination-controls { display: flex; align-items: center; gap: 6px; }
        
        .page-btn {
            min-width: 36px;
            height: 36px;
            padding: 0 12px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .page-btn:hover:not(:disabled) { background: var(--bg-tertiary); }
        .page-btn.active { background: var(--primary); border-color: var(--primary); color: white; }
        .page-btn:disabled { opacity: 0.4; cursor: not-allowed; }
        
        .page-dots { color: var(--text-muted); padding: 0 8px; }

        /* ===== PAGE SPECIFIC: 설정 ===== */
        .settings-section { margin-bottom: 36px; }
        .settings-title { font-size: 22px; font-weight: 700; margin-bottom: 20px; }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            margin-bottom: 14px;
        }

        .setting-info { flex: 1; }
        .setting-name { font-size: 18px; font-weight: 600; margin-bottom: 6px; }
        .setting-desc { font-size: 15px; color: var(--text-muted); }

        .toggle {
            width: 60px;
            height: 32px;
            background: var(--border);
            border-radius: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle.active { background: var(--success); }

        .toggle::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .toggle.active::after { left: 32px; }

        /* ===== EMPTY STATE ===== */
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--text-muted);
        }

        .empty-state i { font-size: 80px; margin-bottom: 24px; opacity: 0.3; }
        .empty-state-title { font-size: 24px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary); }
        .empty-state-desc { font-size: 18px; }

        /* ===== ANALYSIS PAGE - 2분할 레이아웃 ===== */
        .analysis-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            flex: 1;
            min-height: 0;
        }

        .analysis-layout-3col {
            display: grid;
            grid-template-columns: 280px 1fr 1fr;
            gap: 20px;
            flex: 1;
            min-height: 0;
        }

        /* 통화 내역 패널 */
        .call-history-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .call-history-list {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .call-history-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 8px;
        }

        .call-history-item:hover {
            background: var(--bg-tertiary);
        }

        .call-history-item.active {
            background: rgba(74, 144, 226, 0.15);
            border: 1px solid rgba(74, 144, 226, 0.3);
        }

        .call-history-avatar {
            width: 44px;
            height: 44px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            flex-shrink: 0;
        }

        .call-history-info {
            flex: 1;
            min-width: 0;
        }

        .call-history-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .age-badge {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 4px;
        }

        .call-history-number {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 2px;
        }

        .call-history-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .call-history-item.active .call-history-time {
            color: var(--primary);
            font-weight: 600;
        }

        .call-history-status {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .call-history-status.critical {
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
        }

        .call-history-status.warning {
            background: rgba(255, 184, 0, 0.15);
            color: #FFB800;
        }

        .call-history-status.safe {
            background: rgba(74, 144, 226, 0.15);
            color: var(--primary);
        }

        .call-history-footer {
            padding: 14px 16px;
            border-top: 1px solid var(--border);
            font-size: 13px;
            color: var(--text-secondary);
            text-align: center;
        }

        .call-history-footer i {
            margin-right: 6px;
        }
        
        .analysis-layout > .analysis-panel,
        .analysis-layout-3col > .analysis-panel {
            display: flex;
            flex-direction: column;
            min-height: 0;
            overflow: hidden;
        }

        .analysis-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-tertiary);
        }

        .panel-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title i {
            font-size: 22px;
            color: var(--primary);
        }

        .panel-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* 통화 정보 헤더 */
        .call-info-header {
            background: rgba(229, 69, 69, 0.08);
            border: 1px solid rgba(255, 61, 87, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .call-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .call-info-row:last-child { margin-bottom: 0; }

        .call-label {
            font-size: 13px;
            color: var(--text-muted);
        }

        .call-value {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .call-value.danger { color: var(--danger); }
        .call-value.warning { color: var(--warning); }

        .risk-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: var(--danger);
            color: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
        }

        .risk-badge.safe {
            background: rgba(74, 144, 226, 0.15);
            color: var(--primary);
        }

        .risk-badge.warning {
            background: rgba(255, 184, 0, 0.15);
            color: #FFB800;
        }

        .situation-card.safe-card {
            background: rgba(74, 144, 226, 0.1);
            border: 1px solid rgba(74, 144, 226, 0.3);
        }

        .situation-badge.safe {
            background: rgba(74, 144, 226, 0.15);
            color: var(--primary);
        }

        .live-dot.safe {
            background: var(--primary);
            animation: none;
        }

        /* 대화 시뮬레이션 */
        .conversation-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            animation: messageSlide 0.4s ease-out;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.caller { flex-direction: row; }
        .message.victim { flex-direction: row-reverse; }

        .message-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .message.caller .message-avatar,
        .caller-avatar {
            background: var(--danger);
        }

        .message.victim .message-avatar,
        .victim-avatar {
            background: var(--primary);
        }

        .message-avatar i {
            font-size: 20px;
            color: white;
        }

        .message-content {
            max-width: 75%;
        }

        .message-bubble {
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.6;
        }

        .message.caller .message-bubble {
            background: rgba(255, 61, 87, 0.15);
            border: 1px solid rgba(255, 61, 87, 0.3);
            border-radius: 18px 18px 18px 4px;
        }

        .message.victim .message-bubble {
            background: rgba(0, 102, 255, 0.15);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 18px 18px 4px 18px;
        }

        .message-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 6px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .message.victim .message-meta { justify-content: flex-end; }

        .keyword-alert {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            background: rgba(255, 61, 87, 0.2);
            border-radius: 4px;
            font-size: 11px;
            color: var(--danger);
            font-weight: 600;
        }

        .message-highlight {
            background: rgba(255, 184, 0, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        /* 오른쪽 패널 - 상황별 조치 */
        .action-section {
            margin-bottom: 24px;
        }

        .section-header {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-header i {
            color: var(--primary);
        }

        .situation-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .situation-card:hover {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.05);
        }

        .situation-card.active {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
        }

        .situation-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .situation-title {
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .situation-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .situation-badge.critical { background: rgba(255, 61, 87, 0.2); color: var(--danger); }
        .situation-badge.high { background: rgba(255, 184, 0, 0.2); color: var(--warning); }
        .situation-badge.detected { background: rgba(0, 230, 118, 0.2); color: var(--success); }

        .situation-desc {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* 고객 알림 옵션 */
        .notify-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .notify-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 20px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .notify-btn:hover {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
            transform: translateY(-2px);
        }

        .notify-btn i {
            font-size: 28px;
            color: var(--primary);
        }

        .notify-btn.danger i { color: var(--danger); }
        .notify-btn.warning i { color: var(--warning); }
        .notify-btn.success i { color: var(--success); }

        .notify-btn span {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .notify-btn small {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* 빠른 조치 버튼 */
        .quick-action-bar {
            display: flex;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-tertiary);
            border-top: 1px solid var(--border);
        }

        .quick-action-bar .btn {
            flex: 1;
            justify-content: center;
        }

        /* 타임라인 프로그레스 */
        .call-timeline {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border);
        }

        .timeline-time {
            font-size: 20px;
            font-weight: 700;
            color: var(--danger);
            font-family: 'Courier New', monospace;
        }

        .timeline-bar {
            flex: 1;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
        }

        .timeline-progress {
            height: 100%;
            background: var(--gradient-red);
            border-radius: 3px;
            animation: timelineGrow 60s linear infinite;
        }

        @keyframes timelineGrow {
            from { width: 0%; }
            to { width: 100%; }
        }

        .timeline-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--danger);
            font-weight: 600;
        }

        .timeline-status .live-dot {
            width: 8px;
            height: 8px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

        /* ===== TOSS STYLE MODAL ===== */
        .modal-overlay,
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 26, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active,
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--bg-elevated);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6), 
                        0 0 0 1px rgba(255, 255, 255, 0.05);
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow: hidden;
        }

        .modal-overlay.active .modal-container,
        .modal-backdrop.active .toss-modal {
            transform: scale(1) translateY(0);
        }
        
        .toss-modal {
            background: var(--bg-elevated);
            border: 1px solid rgba(74, 144, 226, 0.15);
            border-radius: 20px;
            width: 90%;
            max-width: 480px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(74, 144, 226, 0.1),
                        0 0 0 1px rgba(255, 255, 255, 0.05);
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .toss-modal .modal-header {
            padding: 24px 24px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: none;
        }
        
        .toss-modal .modal-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .toss-modal .modal-title i {
            color: var(--primary);
            font-size: 20px;
        }
        
        .toss-modal .modal-close {
            background: var(--bg-tertiary);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-secondary);
        }
        
        .toss-modal .modal-close:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .toss-modal .modal-body {
            padding: 24px;
        }
        
        .toss-modal .modal-footer {
            padding: 16px 24px 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .toss-modal .modal-btn-primary {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toss-modal .modal-btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }
        
        .toss-modal .modal-btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toss-modal .modal-btn-secondary:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .toss-modal .modal-btn-danger {
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toss-modal .modal-btn-danger:hover {
            background: rgba(255, 68, 68, 0.25);
        }
        
        /* Modal Input Styles */
        .toss-modal input[type="text"],
        .toss-modal input[type="tel"],
        .toss-modal input[type="email"],
        .toss-modal input[type="number"],
        .toss-modal input[type="date"],
        .toss-modal select,
        .toss-modal textarea {
            width: 100%;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s ease;
        }
        
        .toss-modal input:focus,
        .toss-modal select:focus,
        .toss-modal textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.15);
        }
        
        .toss-modal input::placeholder,
        .toss-modal textarea::placeholder {
            color: var(--text-muted);
        }
        
        .toss-modal select option {
            background: var(--bg-elevated);
            color: var(--text-primary);
        }

        .modal-header {
            padding: 32px 28px 0;
            text-align: center;
        }

        .modal-icon {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 36px;
        }

        .modal-icon.success {
            background: rgba(74, 144, 226, 0.15);
            color: var(--primary);
            box-shadow: 0 0 30px rgba(74, 144, 226, 0.2);
        }

        .modal-icon.danger {
            background: rgba(229, 69, 69, 0.12);
            color: var(--danger);
            box-shadow: 0 0 30px rgba(229, 69, 69, 0.2);
            animation: iconPulse 1.5s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .modal-icon.warning {
            background: rgba(229, 69, 69, 0.1);
            color: var(--warning);
            box-shadow: 0 0 30px rgba(229, 69, 69, 0.2);
        }

        .modal-icon.info {
            background: rgba(74, 144, 226, 0.12);
            color: var(--primary);
            box-shadow: 0 0 30px rgba(74, 144, 226, 0.15);
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .modal-body {
            padding: 16px 28px 28px;
        }

        .modal-message {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.7;
            text-align: center;
        }

        .modal-message strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .modal-details {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 16px;
            margin-top: 20px;
        }

        .modal-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .modal-detail-item:last-child {
            border-bottom: none;
        }

        .modal-detail-label {
            font-size: 14px;
            color: var(--text-muted);
        }

        .modal-detail-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-footer {
            padding: 0 20px 20px;
            display: flex;
            gap: 10px;
        }

        .modal-btn {
            flex: 1;
            padding: 16px 24px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .modal-btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        .modal-btn-secondary:hover {
            background: var(--bg-elevated);
            color: var(--text-primary);
        }

        .modal-btn-primary {
            background: var(--gradient-blue);
            color: white;
            box-shadow: 0 2px 12px rgba(74, 144, 226, 0.25);
        }

        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(74, 144, 226, 0.3);
        }

        .modal-btn-danger {
            background: var(--gradient-red);
            color: white;
            box-shadow: 0 2px 12px rgba(229, 69, 69, 0.25);
        }

        .modal-btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(229, 69, 69, 0.3);
        }

        .modal-btn-success {
            background: var(--gradient-green);
            color: white;
            box-shadow: 0 2px 12px rgba(74, 144, 226, 0.25);
        }

        .modal-btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(74, 144, 226, 0.3);
        }

        /* Progress Modal */
        .modal-progress {
            margin-top: 24px;
        }

        .progress-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            opacity: 1;
            background: rgba(0, 102, 255, 0.1);
            border: 1px solid rgba(0, 102, 255, 0.3);
        }

        .progress-step.done {
            opacity: 1;
            background: rgba(0, 230, 118, 0.1);
            border: 1px solid rgba(0, 230, 118, 0.3);
        }

        .progress-step-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            background: var(--border);
            color: var(--text-muted);
        }

        .progress-step.active .progress-step-icon {
            background: var(--primary);
            color: white;
            animation: spin 1s linear infinite;
        }

        .progress-step.done .progress-step-icon {
            background: var(--success);
            color: white;
        }

        .progress-step-text {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .progress-step.active .progress-step-text,
        .progress-step.done .progress-step-text {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            background: var(--bg-elevated);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 14px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transform: translateX(120%);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            min-width: 320px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .toast.success .toast-icon {
            background: rgba(0, 230, 118, 0.2);
            color: var(--success);
        }

        .toast.danger .toast-icon {
            background: rgba(255, 61, 87, 0.2);
            color: var(--danger);
        }

        .toast.warning .toast-icon {
            background: rgba(255, 184, 0, 0.2);
            color: var(--warning);
        }

        .toast.info .toast-icon {
            background: rgba(0, 102, 255, 0.2);
            color: var(--primary);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .toast-message {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .toast-close {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .toast-close:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        
        /* Mobile Menu Button - hidden by default, shown on mobile */
        .mobile-menu-btn { display: none; }
        
        /* Sidebar Close Button - hidden by default, shown on mobile when sidebar is open */
        .sidebar-close-btn {
            display: none;
            position: absolute;
            top: 20px;
            right: 16px;
            width: 36px;
            height: 36px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 20px;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        .sidebar-close-btn:hover {
            background: var(--bg-tertiary);
        }
        
        /* Large Desktop (1400px+) */
        @media (max-width: 1600px) {
            .main-grid { gap: 16px; }
            .bottom-grid { gap: 16px; }
            .realtime-stats { gap: 12px; }
        }

        /* Desktop (1200px - 1400px) */
        @media (max-width: 1400px) {
            .sidebar { width: 220px; }
            .logo { padding: 20px 16px; }
            .logo-img { width: 40px; height: 40px; }
            .logo-text { font-size: 18px; }
            .logo-sub { font-size: 11px; }
            .nav-section { padding: 20px 14px; }
            .nav-item { padding: 12px 14px; font-size: 14px; gap: 12px; }
            .nav-item i { font-size: 18px; }
            .main-content { margin-left: 220px; }
            
            .realtime-stats { grid-template-columns: repeat(2, 1fr); }
            .realtime-stat-card { padding: 16px; }
            .rt-stat-value { font-size: 22px; }
            
            .main-grid { grid-template-columns: 1fr 300px; }
            .bottom-grid { grid-template-columns: 1fr 300px; }
            
            .header-actions .btn-icon span { display: none; }
        }

        /* Tablet Landscape (992px - 1200px) */
        @media (max-width: 1200px) {
            .sidebar { width: 72px; }
            .logo { 
                padding: 16px; 
                justify-content: center; 
                min-height: 80px;
            }
            .logo-img { display: none; }
            .logo-icon { display: flex; }
            .logo-text-wrap { display: none; }
            
            .nav-section { padding: 16px 10px; }
            .nav-label { display: none; }
            .nav-item { 
                justify-content: center; 
                padding: 14px 10px; 
                gap: 0;
            }
            .nav-item span { display: none; }
            .nav-item i { 
                margin-right: 0; 
                font-size: 20px; 
            }
            .nav-divider { margin: 12px 8px; }
            
            .analysis-layout-3col { grid-template-columns: 220px 1fr 1fr; gap: 16px; }
            .call-history-panel { border-radius: 12px; }
            .call-history-item { padding: 10px; gap: 10px; }
            .call-history-avatar { width: 36px; height: 36px; font-size: 14px; }
            .call-history-name { font-size: 13px; }
            .call-history-number { font-size: 11px; }
            .call-history-time { font-size: 10px; }
            
            .user-section { 
                flex-direction: column; 
                gap: 8px; 
                padding: 16px 10px; 
            }
            .user-info { display: none; }
            .user-avatar { 
                position: relative; 
                width: 40px; 
                height: 40px; 
                font-size: 16px;
            }
            .user-status { 
                position: absolute; 
                bottom: 0; 
                right: 0; 
                width: 10px; 
                height: 10px;
            }
            
            .main-content { margin-left: 72px; }
            
            .header { padding: 16px 20px; gap: 16px; flex-wrap: wrap; }
            .header-left { gap: 12px; }
            .page-title { font-size: 18px; }
            .live-badge { padding: 6px 10px; font-size: 11px; }
            .live-badge span { display: none; }
            .search-box { width: 180px; padding: 10px 14px; }
            .search-box input { font-size: 13px; }
            .header-actions { gap: 8px; }
            .btn-icon { padding: 10px; min-width: 40px; }
            .btn-icon span { display: none; }
            
            .realtime-stats { grid-template-columns: repeat(4, 1fr); gap: 10px; }
            .realtime-stat-card { padding: 14px; }
            .rt-stat-icon { width: 36px; height: 36px; font-size: 16px; }
            .rt-stat-value { font-size: 18px; }
            .rt-stat-label { font-size: 11px; }
            .rt-stat-change { font-size: 10px; padding: 3px 6px; }
            
            .main-grid { grid-template-columns: 1fr; }
            .bottom-grid { grid-template-columns: 1fr 1fr; }
            
            .emergency-bar { padding: 14px 18px; }
            .emergency-icon { width: 40px; height: 40px; font-size: 18px; }
            .emergency-title { font-size: 15px; }
            .emergency-desc { font-size: 12px; }
            .emergency-btn { padding: 10px 16px; font-size: 13px; }
            
            .customers-toolbar { flex-direction: column; align-items: stretch; gap: 16px; }
            .toolbar-left { flex-direction: column; gap: 12px; align-items: stretch; }
            .toolbar-right { justify-content: flex-start; }
            .customers-toolbar .search-box { width: 100%; max-width: none; }
            .filter-group { flex-wrap: wrap; }
            .filter-btn { padding: 10px 14px; font-size: 13px; }
            
            .customers-table th,
            .customers-table td { padding: 14px 12px; font-size: 14px; }
            .customer-avatar { width: 36px; height: 36px; font-size: 14px; }
            .customer-name { font-size: 14px; }
            .customer-contact { font-size: 12px; }
            
            .customers-pagination { flex-direction: column; gap: 12px; align-items: center; }
        }

        /* Tablet Portrait (768px - 992px) */
        @media (max-width: 992px) {
            .sidebar { width: 72px; }
            .logo { padding: 16px; justify-content: center; min-height: 80px; }
            .logo-img { display: none; }
            .logo-icon { display: flex; }
            .logo-text-wrap { display: none; }
            .nav-section { padding: 16px 10px; }
            .nav-label { display: none; }
            .nav-item { justify-content: center; padding: 14px 10px; gap: 0; }
            .nav-item span { display: none; }
            .nav-item i { margin-right: 0; font-size: 20px; }
            .user-section { flex-direction: column; gap: 8px; padding: 16px 10px; }
            .user-info { display: none; }
            .user-avatar { width: 40px; height: 40px; font-size: 16px; position: relative; }
            .user-status { position: absolute; bottom: 0; right: 0; width: 10px; height: 10px; }
            
            .main-content { margin-left: 72px; }
            
            .realtime-stats { grid-template-columns: repeat(2, 1fr); }
            
            .bottom-grid { grid-template-columns: 1fr; }
            
            .analysis-layout { grid-template-columns: 1fr; }
            .analysis-layout-3col { grid-template-columns: 1fr; }
            .call-history-panel { display: none; }
            .analysis-panel { max-height: 50vh; }
            
            /* 통계 리포트 페이지 */
            .report-header { margin-bottom: 16px; }
            .report-title { font-size: 24px; }
            .report-period { font-size: 14px; }
            .report-grid { 
                grid-template-columns: 1fr; 
                gap: 16px;
                max-height: none;
                overflow-y: visible;
            }
            .report-chart-card .chart-container { min-height: 220px; }
            .report-chart-card .card-header .collapse-icon { display: block; }
            #page-reports .realtime-stats { grid-template-columns: repeat(2, 1fr) !important; }
            #page-reports { overflow-y: auto; }
            
            .card { border-radius: 12px; }
            .card-header { padding: 16px; }
            .card-body { padding: 16px; }
            
            table { font-size: 12px; }
            th, td { padding: 10px 8px; }
            
            /* 위협 탐지 현황 테이블 태블릿 최적화 */
            .main-grid .card-body.scrollable { 
                overflow-x: auto; 
                -webkit-overflow-scrolling: touch;
            }
            .main-grid .card-body.scrollable table { 
                min-width: 500px;
                table-layout: auto;
            }
            .main-grid .card-body.scrollable thead th {
                position: sticky;
                top: 0;
                background: var(--bg-card);
                z-index: 1;
            }
            .caller-info { flex-direction: column; gap: 2px; }
            .caller-number { font-size: 11px; }
            .caller-location { font-size: 9px; }
            .keyword-tag { padding: 2px 5px; font-size: 9px; }
            .keyword-tags { gap: 4px; }
            .severity-badge { padding: 3px 6px; font-size: 9px; white-space: nowrap; }
            .call-type { padding: 2px 6px; font-size: 9px; }
            .action-btn { width: 26px; height: 26px; }
            .action-btn i { font-size: 11px; }
            
            .case-filters { flex-wrap: wrap; gap: 10px; }
            .case-filter { padding: 10px 18px; font-size: 14px; }
            
            .customers-stats { grid-template-columns: repeat(2, 1fr); }
            
            /* Customer List specific for 992px */
            .customers-toolbar { gap: 12px; }
            .toolbar-left { gap: 10px; }
            .toolbar-right { gap: 8px; }
            .btn-secondary, .btn-primary { padding: 10px 14px; font-size: 13px; }
            .btn-secondary i, .btn-primary i { font-size: 14px; }
            
            .customers-table th,
            .customers-table td { padding: 12px 10px; font-size: 13px; }
            .customer-info { gap: 10px; }
            .customer-avatar { width: 32px; height: 32px; font-size: 13px; }
            .customer-name { font-size: 13px; }
            .customer-contact { font-size: 11px; }
            .status-badge { padding: 5px 10px; font-size: 11px; }
            .status-badge i { font-size: 12px; }
            .threat-count, .saved-amount, .last-activity, .date-text { font-size: 13px; }
            .tbl-action-btn { width: 30px; height: 30px; }
            .tbl-action-btn i { font-size: 14px; }
            
            .toss-modal { margin: 16px; max-width: calc(100% - 32px) !important; }
            .modal-body { padding: 20px; }
        }

        /* Mobile Landscape (576px - 768px) */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -260px;
                width: 260px;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            .sidebar.open { left: 0; }
            
            /* Show full sidebar when open on mobile */
            .sidebar.open .logo { padding: 24px 20px; justify-content: flex-start; }
            .sidebar.open .logo-img { display: block; width: 44px; height: 44px; }
            .sidebar.open .logo-icon { display: none; }
            .sidebar.open .logo-text-wrap { display: block; }
            .sidebar.open .logo-text { font-size: 20px; }
            .sidebar.open .nav-section { padding: 20px 16px; }
            .sidebar.open .nav-label { display: block; }
            .sidebar.open .nav-item { justify-content: flex-start; padding: 14px 16px; gap: 12px; }
            .sidebar.open .nav-item span { display: inline; }
            .sidebar.open .user-section { flex-direction: row; padding: 20px 16px; }
            .sidebar.open .user-info { display: block; }
            .sidebar.open .user-avatar { width: 44px; height: 44px; font-size: 18px; }
            .sidebar.open .user-status { position: static; width: 10px; height: 10px; }
            .sidebar.open .sidebar-close-btn { display: flex; }
            
            .main-content { margin-left: 0; }
            
            .header { 
                padding: 12px 16px; 
                flex-wrap: wrap;
            }
            .header-left { 
                width: 100%; 
                justify-content: flex-start;
                gap: 12px;
            }
            .mobile-menu-btn {
                display: flex !important;
                align-items: center;
                justify-content: center;
                width: 44px;
                height: 44px;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 10px;
                color: var(--text-primary);
                cursor: pointer;
                font-size: 20px;
                flex-shrink: 0;
            }
            .page-title { font-size: 18px; flex: 1; }
            .live-badge { display: none; }
            .search-box { display: none; }
            .header-actions { 
                width: 100%; 
                justify-content: flex-end;
                margin-top: 12px;
            }
            
            .pages-wrapper { padding: 16px; }
            
            .realtime-stats { grid-template-columns: 1fr 1fr; gap: 10px; }
            .realtime-stat-card { padding: 12px; flex-direction: column; align-items: flex-start; gap: 8px; }
            .rt-stat-change { position: static; margin-top: 4px; }
            
            .emergency-bar { 
                flex-direction: row; 
                text-align: left;
                padding: 12px 14px;
                gap: 10px;
                align-items: center;
            }
            .emergency-bar::before { display: none; }
            .emergency-bar-left { gap: 10px; }
            .emergency-bar-icon { width: 40px; height: 40px; }
            .emergency-bar-icon i { font-size: 18px; }
            .emergency-bar-info h3 { font-size: 14px; margin-bottom: 2px; }
            .emergency-bar-info p { font-size: 11px; }
            .emergency-bar-actions { display: none; }
            .emergency-info { align-items: flex-start; }
            .emergency-actions { display: none; }
            .emergency-btn { display: none; }
            
            .customers-table-wrapper { 
                overflow-x: auto; 
                -webkit-overflow-scrolling: touch;
                margin: 0;
                padding: 0;
                border-radius: 12px;
            }
            .customers-table { min-width: auto; width: 100%; }
            .customers-table th:first-child,
            .customers-table td:first-child { display: none; } /* Hide checkbox */
            .customers-table th:nth-child(6), /* 보호 금액 */
            .customers-table td:nth-child(6),
            .customers-table th:nth-child(7), /* 최근 활동 */
            .customers-table td:nth-child(7) { display: none; }
            
            .customers-table th,
            .customers-table td { padding: 12px 10px; font-size: 13px; }
            .customer-info { gap: 10px; }
            .customer-avatar { width: 32px; height: 32px; font-size: 13px; }
            .customer-name { font-size: 14px; }
            .customer-contact { font-size: 11px; }
            .status-badge { padding: 5px 10px; font-size: 11px; }
            .threat-count { font-size: 13px; }
            
            /* 페이지네이션 하단 고정 */
            .customers-pagination {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: var(--bg-secondary);
                padding: 12px 16px;
                margin: 0;
                border-top: 1px solid var(--border);
                z-index: 100;
            }
            
            #page-customers .customers-table-wrapper {
                padding-bottom: 70px;
            }
            
            .customers-toolbar .toolbar-right { flex-wrap: wrap; }
            .btn-secondary, .btn-primary { flex: 1; min-width: 120px; justify-content: center; }
            
            .customers-pagination { 
                flex-direction: column; 
                gap: 12px; 
                text-align: center;
            }
            
            .action-btns { gap: 4px; }
            .tbl-action-btn { width: 28px; height: 28px; }
            
            /* 위협 탐지 현황 테이블 모바일 최적화 */
            .main-grid .card-body.scrollable table { min-width: 420px; font-size: 10px; }
            .main-grid .card-body.scrollable table th, 
            .main-grid .card-body.scrollable table td { padding: 6px 5px; }
            /* 통화시간, 탐지 키워드 열 숨김 */
            .main-grid .card-body.scrollable table th:nth-child(3), 
            .main-grid .card-body.scrollable table td:nth-child(3),
            .main-grid .card-body.scrollable table th:nth-child(5), 
            .main-grid .card-body.scrollable table td:nth-child(5) { display: none; }
            .card-actions { display: none; }
            
            /* 보이스피싱 분석 페이지 */
            .analysis-layout { gap: 16px; }
            .analysis-panel { 
                max-height: none; 
                border-radius: 12px;
            }
            .panel-header { padding: 14px 16px; }
            .panel-title { font-size: 15px; }
            .call-timeline { padding: 16px; max-height: 300px; }
            .timeline-item { padding: 12px 14px; }
            .action-panel { padding: 16px; }
            .action-group { padding: 14px; }
            .action-title { font-size: 14px; }
            
            /* AI 추천 조치 버튼 태블릿 최적화 */
            .btn-grid { gap: 10px; }
            .btn-grid .btn { 
                padding: 14px 16px; 
                font-size: 13px; 
            }
            .btn-grid .btn i { font-size: 14px; }
            .emergency-section { padding: 16px; }
            .emergency-section > div:first-child { margin-bottom: 14px !important; }
            .emergency-section > div:first-child > div:first-child { 
                width: 40px !important; 
                height: 40px !important; 
                font-size: 20px !important; 
            }
            .emergency-section > div:first-child > div:last-child > div:first-child { font-size: 14px !important; }
            .emergency-section > div:first-child > div:last-child > div:last-child { font-size: 12px !important; }
            
            /* 통계 리포트 페이지 */
            .report-title { font-size: 20px; }
            .report-period { font-size: 13px; }
            #page-reports .realtime-stats { grid-template-columns: repeat(2, 1fr) !important; gap: 10px !important; }
            .report-grid { gap: 12px; }
            
            /* 위협 알림 페이지 */
            .alert-list { gap: 12px; }
            .alert-item { padding: 14px; border-radius: 12px; }
            .alert-number { width: 28px; height: 28px; font-size: 12px; }
            .alert-content { gap: 6px; }
            .alert-title { font-size: 14px; }
            .alert-meta { font-size: 12px; }
            .alert-actions { gap: 6px; }
            .alert-btn { padding: 8px 14px; font-size: 12px; }
            
            /* 케이스 관리 페이지 */
            .case-filters { flex-wrap: wrap; gap: 8px; }
            .case-filter { padding: 10px 16px; font-size: 13px; flex: 1; min-width: 80px; text-align: center; }
            
            /* 설정 페이지들 */
            .settings-section { padding: 0; }
            .settings-title { font-size: 20px; margin-bottom: 16px; padding: 0 4px; }
            .setting-item { 
                padding: 16px; 
                border-radius: 12px; 
                margin-bottom: 10px;
                flex-wrap: wrap;
                gap: 12px;
            }
            .setting-info { flex: 1; min-width: 200px; }
            .setting-name { font-size: 15px; }
            .setting-desc { font-size: 13px; }
        }

        /* Mobile Portrait (< 576px) */
        @media (max-width: 576px) {
            .header-left { flex-wrap: wrap; }
            .page-title { font-size: 16px; order: 2; width: 100%; margin-top: 8px; }
            .mobile-menu-btn { order: 1; }
            .header-actions { margin-top: 8px; }
            
            .realtime-stats { grid-template-columns: 1fr; }
            .realtime-stat-card { flex-direction: row; align-items: center; }
            
            .card-title { font-size: 15px; }
            
            table { font-size: 11px; }
            th, td { padding: 8px 6px; }
            
            /* 위협 탐지 현황 모바일 카드 스타일 */
            .main-grid .card-body.scrollable { padding: 10px; }
            .main-grid .card-body.scrollable table { min-width: 320px; font-size: 9px; }
            /* 유형 열도 숨김 */
            .main-grid .card-body.scrollable table th:nth-child(4), 
            .main-grid .card-body.scrollable table td:nth-child(4) { display: none; }
            .severity-badge { padding: 2px 4px; font-size: 8px; }
            .action-btn { width: 22px; height: 22px; }
            .action-btn i { font-size: 10px; }
            .caller-number { font-size: 10px; }
            .caller-location { font-size: 8px; }
            
            .case-filters { flex-direction: column; }
            .case-filter { width: 100%; text-align: center; }
            
            .customers-stats { grid-template-columns: 1fr; }
            
            .filter-group { width: 100%; gap: 6px; }
            .filter-btn { flex: 1; text-align: center; padding: 8px 10px; font-size: 12px; min-width: 60px; }
            
            .toolbar-right { flex-direction: column; width: 100%; }
            .toolbar-right button { width: 100%; justify-content: center; }
            
            /* Mobile: Convert table to card list (통화목록 스타일) */
            .customers-table-wrapper {
                background: transparent !important;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
                overflow: visible !important;
            }
            
            .customers-table { 
                display: block !important; 
                width: 100% !important; 
            }
            .customers-table thead { 
                display: none !important; 
            }
            .customers-table tbody { 
                display: flex !important; 
                flex-direction: column !important; 
                gap: 12px !important;
                overflow: visible !important;
            }
            .customers-table tbody tr {
                display: flex !important;
                flex-direction: row !important;
                flex-wrap: wrap !important;
                align-items: center !important;
                background: var(--bg-secondary) !important;
                border: 1px solid var(--border) !important;
                border-radius: 16px !important;
                padding: 16px !important;
                gap: 12px !important;
                cursor: pointer !important;
                transition: all 0.2s !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            .customers-table tbody tr:hover,
            .customers-table tbody tr:active {
                background: var(--bg-elevated) !important;
            }
            
            /* Hide all cells first */
            .customers-table td { 
                display: none !important;
                padding: 0 !important;
                border: none !important;
            }
            
            /* 고객 정보 (아바타 + 이름 + 연락처) */
            .customers-table td:nth-child(2) {
                display: flex !important;
                flex: 1 !important;
                min-width: 0 !important;
            }
            .customers-table td:nth-child(2) .customer-info {
                display: flex !important;
                align-items: center !important;
                gap: 14px !important;
                width: 100% !important;
            }
            .customers-table td:nth-child(2) .customer-avatar {
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
                flex-shrink: 0 !important;
            }
            .customers-table td:nth-child(2) .customer-details {
                flex: 1 !important;
                min-width: 0 !important;
            }
            .customers-table td:nth-child(2) .customer-name {
                font-size: 17px !important;
                font-weight: 600 !important;
                color: var(--text-primary) !important;
                margin-bottom: 4px !important;
            }
            .customers-table td:nth-child(2) .customer-contact {
                font-size: 13px !important;
                color: var(--text-secondary) !important;
            }
            
            /* 보호 상태 - 우측 */
            .customers-table td:nth-child(4) {
                display: flex !important;
                align-items: center !important;
                flex-shrink: 0 !important;
            }
            .customers-table td:nth-child(4) .status-badge {
                padding: 6px 12px !important;
                font-size: 12px !important;
            }
            .customers-table td:nth-child(4) .status-badge i {
                display: none !important;
            }
            
            /* 하단 정보 (위협 차단) */
            .customers-table td:nth-child(5) {
                display: flex !important;
                align-items: center !important;
                width: 100% !important;
                padding-top: 12px !important;
                margin-top: 4px !important;
                border-top: 1px solid var(--border) !important;
                font-size: 14px !important;
                color: var(--text-secondary) !important;
            }
            .customers-table td:nth-child(5)::before {
                content: '차단 위협: ' !important;
                margin-right: 4px !important;
            }
            .customers-table td:nth-child(5) .threat-count {
                font-weight: 600 !important;
                color: var(--text-primary) !important;
            }
            .customers-table td:nth-child(5) .threat-count.warning {
                color: var(--danger) !important;
            }
            
            /* Hide checkbox, 가입일, 보호금액, 최근활동 */
            .customers-table td:nth-child(1),
            .customers-table td:nth-child(3),
            .customers-table td:nth-child(6),
            .customers-table td:nth-child(7) {
                display: none !important;
            }
            
            /* 고객 리스트 페이지 레이아웃 */
            #page-customers {
                display: flex !important;
                flex-direction: column !important;
                height: 100% !important;
            }
            
            #page-customers .realtime-stats {
                flex-shrink: 0 !important;
            }
            
            #page-customers .customers-toolbar {
                flex-shrink: 0 !important;
            }
            
            #page-customers .customers-table-wrapper {
                flex: 1 !important;
                min-height: 0 !important;
                overflow-y: auto !important;
                margin-bottom: 0 !important;
            }
            
            .customers-table tbody {
                max-height: none !important;
                overflow: visible !important;
            }
            
            /* 페이지네이션 하단 고정 */
            .customers-pagination {
                flex-shrink: 0 !important;
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                background: var(--bg-secondary) !important;
                padding: 12px 16px !important;
                margin: 0 !important;
                border-top: 1px solid var(--border) !important;
                z-index: 100 !important;
            }
            
            /* 페이지네이션 높이만큼 하단 여백 */
            #page-customers .customers-table-wrapper {
                padding-bottom: 70px !important;
            }
            
            .pagination-controls { gap: 4px; }
            .page-btn { width: 32px; height: 32px; font-size: 13px; }
            
            .settings-title { font-size: 18px; padding: 0; }
            .setting-item { 
                padding: 14px; 
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            .setting-info { width: 100%; }
            .setting-name { font-size: 14px; }
            .setting-desc { font-size: 12px; }
            .toggle { align-self: flex-start; }
            
            /* 통계 리포트 */
            .report-title { font-size: 18px; }
            .report-period { font-size: 12px; }
            #page-reports .realtime-stats { grid-template-columns: repeat(2, 1fr) !important; gap: 8px !important; }
            #page-reports .realtime-stat-card { padding: 12px; }
            #page-reports .rt-stat-icon { width: 36px; height: 36px; font-size: 16px; }
            #page-reports .rt-stat-value { font-size: 18px; }
            #page-reports .rt-stat-label { font-size: 11px; }
            .report-grid { gap: 12px; }
            .report-chart-card .chart-container { min-height: 200px; padding: 12px; }
            .report-chart-card .card-title { font-size: 14px; }
            .report-chart-card .card-header .collapse-icon { display: block; font-size: 18px; }
            
            /* 보이스피싱 분석 */
            .call-timeline { max-height: 250px; }
            .timeline-speaker { font-size: 12px; }
            .timeline-text { font-size: 13px; }
            .timeline-time { font-size: 11px; }
            .quick-action-btn { padding: 10px 14px; font-size: 12px; }
            
            /* AI 추천 조치 버튼 모바일 최적화 */
            .btn-grid { 
                grid-template-columns: 1fr; 
                gap: 8px; 
            }
            .btn-grid .btn { 
                padding: 12px 14px; 
                font-size: 12px; 
            }
            .btn-grid .btn i { font-size: 14px; margin-right: 6px; }
            .emergency-section { padding: 14px; }
            .emergency-section > div:first-child { 
                flex-direction: column; 
                text-align: center; 
                gap: 10px !important; 
            }
            .emergency-section > div:first-child > div:first-child { 
                width: 36px !important; 
                height: 36px !important; 
                font-size: 18px !important; 
            }
            
            /* 위협 알림 */
            .alert-item { flex-direction: column; align-items: flex-start; }
            .alert-left { width: 100%; }
            .alert-actions { width: 100%; justify-content: flex-end; margin-top: 10px; }
            
            /* 케이스 관리 */
            .case-filters { flex-direction: column; }
            .case-filter { width: 100%; }
            
            .emergency-bar { padding: 14px; }
            .emergency-icon { width: 36px; height: 36px; font-size: 16px; }
            .emergency-title { font-size: 14px; }
            .emergency-desc { font-size: 11px; }
            .emergency-btn { padding: 10px 14px; font-size: 12px; }
            
            .toss-modal { margin: 12px; }
            .modal-header { padding: 16px; }
            .modal-title { font-size: 16px; }
            .modal-body { padding: 16px; }
            .modal-footer { padding: 16px; flex-direction: column; }
            .modal-footer button { width: 100%; }
        }

        /* Mobile Menu Button - visibility controlled by media queries */

        /* Sidebar Overlay for Mobile */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .sidebar-overlay.active { display: block; }

        /* Improved Touch Targets for Mobile */
        @media (hover: none) and (pointer: coarse) {
            .nav-item { padding: 14px 16px; }
            .btn-icon { min-width: 44px; min-height: 44px; }
            .tbl-action-btn { min-width: 36px; min-height: 36px; }
            .toggle { min-width: 52px; min-height: 28px; }
            .filter-btn { min-height: 44px; }
            .case-filter { min-height: 44px; }
            .case-btn { min-width: 36px; min-height: 36px; }
        }

        /* ===== 피싱 방어 훈련 페이지 ===== */
        .training-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
            height: 100%;
        }

        .training-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
        }

        .training-header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .training-icon-wrap {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
        }

        .training-header-info h2 {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .training-header-info p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .training-stats {
            display: flex;
            gap: 32px;
        }

        .training-stat {
            text-align: center;
        }

        .training-stat-value {
            display: block;
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #4A90E2, #5AC8FA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .training-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .training-game-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            flex: 1;
        }

        /* 채팅 시나리오 카드 */
        .chat-scenario-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border);
        }

        .chat-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-type-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
        }

        .chat-type-badge.kakao {
            background: #FEE500;
            color: #191919;
        }

        .chat-type-badge.sms {
            background: #34C759;
            color: white;
        }

        .chat-type-badge.call {
            background: var(--danger);
            color: white;
            animation: callPulse 1s ease-in-out infinite;
        }

        @keyframes callPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 68, 68, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(255, 68, 68, 0); }
        }

        .chat-sender-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .scenario-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 700;
        }

        .scenario-timer span {
            font-size: 22px;
            min-width: 28px;
            text-align: center;
        }

        /* 채팅 윈도우 */
        .chat-window {
            flex: 1;
            background: linear-gradient(180deg, #0a0e1a 0%, #0d1117 100%);
            padding: 24px;
            overflow-y: auto;
            min-height: 300px;
            max-height: 400px;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chat-bubble {
            max-width: 85%;
            animation: bubbleIn 0.3s ease-out;
        }

        @keyframes bubbleIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-bubble.other {
            align-self: flex-start;
        }

        .chat-bubble.me {
            align-self: flex-end;
        }

        .chat-bubble-content {
            display: flex;
            align-items: flex-end;
            gap: 8px;
        }

        .chat-bubble.other .chat-bubble-content {
            flex-direction: row;
        }

        .chat-bubble.me .chat-bubble-content {
            flex-direction: row-reverse;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: var(--bg-tertiary);
            flex-shrink: 0;
        }

        .chat-text-wrap {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .chat-bubble.other .chat-text-wrap {
            align-items: flex-start;
        }

        .chat-bubble.me .chat-text-wrap {
            align-items: flex-end;
        }

        .chat-text {
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.5;
            word-break: break-word;
            white-space: pre-wrap;
        }

        .chat-bubble.other .chat-text {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            border-top-left-radius: 4px;
        }

        .chat-bubble.me .chat-text {
            background: var(--primary);
            color: white;
            border-top-right-radius: 4px;
        }

        .chat-text.warning {
            background: rgba(255, 68, 68, 0.15);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: var(--danger);
        }

        .chat-text a, .chat-text .fake-link {
            color: #4A90E2;
            text-decoration: underline;
        }

        .chat-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* 전화 통화 스타일 */
        .call-bubble {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            animation: bubbleIn 0.3s ease-out;
        }

        .call-icon {
            width: 36px;
            height: 36px;
            background: var(--danger);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }

        .call-text {
            font-size: 17px;
            line-height: 1.6;
            color: var(--text-primary);
            font-style: italic;
        }

        .scenario-hints-wrapper {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px 18px;
            margin-bottom: 16px;
        }
        
        .scenario-hints-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--danger);
            margin-bottom: 12px;
        }
        
        .scenario-hints-label i {
            font-size: 16px;
            animation: iconBlink 1.5s ease-in-out infinite;
        }
        
        .scenario-hints {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .hint-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .hint-item i {
            font-size: 16px;
        }

        .hint-item.active {
            opacity: 1;
            background: rgba(255, 68, 68, 0.15);
            border-color: rgba(255, 68, 68, 0.3);
            color: var(--danger);
            animation: hintPulse 2s ease-in-out infinite;
        }

        @keyframes hintPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .training-choices {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .training-choices h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 8px;
        }

        .training-choices-hint {
            text-align: center;
            font-size: 16px;
            color: var(--primary);
            margin-bottom: 16px;
            animation: bounceHint 1s ease-in-out infinite;
        }

        @keyframes bounceHint {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .choice-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            flex: 1;
        }

        .choice-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 32px 20px;
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border: 3px solid var(--border);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .choice-btn::before {
            content: '클릭!';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 6px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .choice-btn:hover::before {
            opacity: 1;
        }

        .choice-btn i {
            font-size: 48px;
            color: var(--primary);
        }

        .choice-btn span {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .choice-btn small {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.4;
        }

        .choice-btn:hover {
            border-color: var(--primary);
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 12px 32px rgba(74, 144, 226, 0.3);
        }

        .choice-btn.selected.correct {
            border-color: #22C55E;
            background: rgba(34, 197, 94, 0.15);
        }

        .choice-btn.selected.correct i {
            color: #22C55E;
        }

        .choice-btn.selected.wrong {
            border-color: var(--danger);
            background: rgba(255, 68, 68, 0.15);
        }

        .choice-btn.selected.wrong i {
            color: var(--danger);
        }

        .training-result {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
        }

        .result-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin: 0 auto 20px;
        }

        .result-icon.correct {
            background: rgba(34, 197, 94, 0.15);
            color: #22C55E;
        }

        .result-icon.wrong {
            background: rgba(255, 68, 68, 0.15);
            color: var(--danger);
        }

        .result-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .result-desc {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 28px;
        }

        .result-explanation {
            background: var(--bg-tertiary);
            border-radius: 16px;
            padding: 24px;
            text-align: left;
            margin-bottom: 28px;
            border-left: 4px solid var(--primary);
        }

        .result-explanation h4 {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-explanation h4::before {
            content: '💡';
        }

        .result-explanation p {
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .btn-next-scenario {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--primary), var(--secondary-blue));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-next-scenario:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(74, 144, 226, 0.3);
        }

        .training-progress {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px 24px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .progress-bar-wrap {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .level-badges {
            display: flex;
            justify-content: space-between;
        }

        .level-badge {
            padding: 6px 14px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .level-badge.active {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            border-color: transparent;
            color: white;
            font-weight: 600;
        }

        @media (max-width: 992px) {
            .training-header { flex-direction: column; gap: 20px; text-align: center; }
            .training-header-left { flex-direction: column; }
            .choice-buttons { grid-template-columns: 1fr 1fr; }
        }

        @media (max-width: 576px) {
            .training-stats { gap: 20px; }
            .training-stat-value { font-size: 22px; }
            .choice-buttons { grid-template-columns: 1fr; }
            .choice-btn { padding: 16px; }
            .level-badges { flex-wrap: wrap; gap: 8px; justify-content: center; }
        }

        /* Print Styles */
        @media print {
            .sidebar, .header, .emergency-bar { display: none; }
            .main-content { margin-left: 0; }
            .pages-wrapper { padding: 0; }
            .card { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal Backdrop for Customer Registration -->
    <div class="modal-backdrop" id="modalBackdrop" onclick="if(event.target === this) closeTossModal()"></div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal-container" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon"><i class="ri-check-line"></i></div>
                <div class="modal-title" id="modalTitle">알림</div>
            </div>
            <div class="modal-body">
                <div class="modal-message" id="modalMessage">메시지 내용</div>
                <div class="modal-details" id="modalDetails" style="display:none;"></div>
                <div class="modal-progress" id="modalProgress" style="display:none;"></div>
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="modal-btn modal-btn-primary" onclick="closeModal()">확인</button>
            </div>
        </div>
    </div>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <img src="img/timbel logo.png" alt="Timbel Logo" class="splash-logo">
        <div class="splash-title">VoiceGuard AI</div>
        <div class="splash-subtitle">보이스피싱 통합관제시스템</div>
        <div class="splash-loader">
            <div class="splash-spinner-container">
                <div class="splash-spinner-ring"></div>
                <div class="splash-spinner-ring"></div>
                <div class="splash-spinner-ring"></div>
                <div class="splash-spinner-core"></div>
            </div>
            <span class="splash-loader-text" id="splashLoaderText">시스템을 초기화하고 있습니다...</span>
        </div>
        <div class="splash-progress">
            <div class="splash-progress-bar" id="splashProgressBar"></div>
        </div>
        <div class="splash-progress-text" id="splashProgressText">0%</div>
        <div class="splash-credit">made by LEE SEYOUNG</div>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileMenu()"></div>
    <div class="main-wrapper" id="mainWrapper">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="logo">
            <img src="img/timbel logo.png" alt="Timbel" class="logo-img">
            <span class="logo-icon">T</span>
            <div class="logo-text-wrap">
                <div class="logo-text">VoiceGuard</div>
                <div class="logo-sub">AI Fraud Detection</div>
            </div>
            <button class="sidebar-close-btn" onclick="toggleMobileMenu()">
                <i class="ri-close-line"></i>
            </button>
        </div>

        <nav class="nav-section">
            <div class="nav-label">모니터링</div>
            <a class="nav-item active" data-page="realtime">
                <i class="ri-radar-line"></i>
                <span>실시간 관제</span>
                <span class="badge">30</span>
            </a>
            <a class="nav-item" data-page="alerts">
                <i class="ri-alarm-warning-line"></i>
                <span>위협 알림</span>
                <span class="badge">3</span>
            </a>
            <div class="nav-divider"></div>

            <div class="nav-label">분석</div>
            <a class="nav-item" data-page="analysis">
                <i class="ri-phone-find-line"></i>
                <span>보이스피싱 분석</span>
                <span class="badge">5</span>
            </a>
            <a class="nav-item" data-page="reports">
                <i class="ri-line-chart-line"></i>
                <span>통계 리포트</span>
            </a>
            <a class="nav-item" data-page="cases">
                <i class="ri-folder-shield-2-line"></i>
                <span>케이스 관리</span>
            </a>

            <div class="nav-divider"></div>

            <div class="nav-label">관리</div>
            <a class="nav-item" data-page="customers">
                <i class="ri-user-heart-line"></i>
                <span>고객 리스트</span>
            </a>
            <a class="nav-item" data-page="training">
                <i class="ri-gamepad-line"></i>
                <span>피싱 방어 훈련</span>
                <span class="badge" style="background: linear-gradient(135deg, #FF6B6B, #FF8E53);">NEW</span>
            </a>

            <div class="nav-divider"></div>

            <div class="nav-label">설정</div>
            <a class="nav-item" data-page="rules">
                <i class="ri-settings-4-line"></i>
                <span>탐지 규칙</span>
            </a>
            <a class="nav-item" data-page="notifications">
                <i class="ri-notification-3-line"></i>
                <span>알림 설정</span>
            </a>
        </nav>

        <div class="user-section">
            <div class="user-avatar">이</div>
            <div class="user-info">
                <div class="user-name">이세영</div>
                <div class="user-role">금융보안원 · 관제1팀</div>
            </div>
            <div class="user-status"></div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <i class="ri-menu-line"></i>
                </button>
                <h1 class="page-title" id="pageTitle">실시간 통화 관제</h1>
                <div class="live-badge">
                    <div class="live-dot"></div>
                    <span>LIVE MONITORING</span>
                </div>
            </div>

            <div class="header-center">
                <div class="search-box">
                    <i class="ri-search-line"></i>
                    <input type="text" id="globalSearch" placeholder="발신번호, 키워드 검색..." onkeyup="handleGlobalSearch(this.value)" onkeydown="if(event.key==='Enter') executeSearch()">
                    <button class="search-btn" onclick="executeSearch()"><i class="ri-arrow-right-line"></i></button>
                </div>
                <div class="date-picker-wrapper">
                    <div class="date-picker" id="datePickerBtn" onclick="toggleCalendar()">
                        <i class="ri-calendar-line"></i>
                        <span id="selectedDateDisplay">2026.01.15</span>
                        <i class="ri-arrow-down-s-line"></i>
                    </div>
                    <div class="calendar-dropdown" id="calendarDropdown">
                        <div class="calendar-header">
                            <button class="calendar-nav-btn" onclick="changeMonth(-1)"><i class="ri-arrow-left-s-line"></i></button>
                            <div class="calendar-title" id="calendarTitle">2026년 1월</div>
                            <button class="calendar-nav-btn" onclick="changeMonth(1)"><i class="ri-arrow-right-s-line"></i></button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <div class="calendar-day-header">일</div>
                            <div class="calendar-day-header">월</div>
                            <div class="calendar-day-header">화</div>
                            <div class="calendar-day-header">수</div>
                            <div class="calendar-day-header">목</div>
                            <div class="calendar-day-header">금</div>
                            <div class="calendar-day-header">토</div>
                        </div>
                        <div class="calendar-shortcuts">
                            <button class="calendar-shortcut" onclick="selectQuickDate('today')">오늘</button>
                            <button class="calendar-shortcut" onclick="selectQuickDate('yesterday')">어제</button>
                            <button class="calendar-shortcut" onclick="selectQuickDate('week')">이번 주</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="header-right">
                <div class="datetime">
                    <div class="datetime-date" id="currentDate">2026년 01월 15일 (수)</div>
                    <div class="datetime-time" id="currentTime">14:32:45</div>
                </div>
                
                <!-- 알림 버튼 -->
                <div class="header-btn-wrapper">
                    <button class="header-btn" id="notifBtn" onclick="toggleNotifDropdown()">
                        <i class="ri-notification-3-line"></i>
                        <span class="notification-dot"></span>
                    </button>
                    <div class="header-dropdown" id="notifDropdown">
                        <div class="dropdown-header">
                            <span class="dropdown-title">알림</span>
                            <span class="dropdown-badge">3건</span>
                        </div>
                        <div class="dropdown-list">
                            <div class="dropdown-item critical" onclick="goToAlert()">
                                <div class="dropdown-item-icon"><i class="ri-alarm-warning-fill"></i></div>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">고위험 통화 감지</div>
                                    <div class="dropdown-item-desc">010-3847-**** | 검찰 사칭</div>
                                </div>
                                <div class="dropdown-item-time">2분 전</div>
                            </div>
                            <div class="dropdown-item critical" onclick="goToAlert()">
                                <div class="dropdown-item-icon"><i class="ri-alarm-warning-fill"></i></div>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">해외 발신 의심</div>
                                    <div class="dropdown-item-desc">+86-138-**** | 중국 발신</div>
                                </div>
                                <div class="dropdown-item-time">5분 전</div>
                            </div>
                            <div class="dropdown-item" onclick="goToAlert()">
                                <div class="dropdown-item-icon"><i class="ri-error-warning-line"></i></div>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">키워드 다수 탐지</div>
                                    <div class="dropdown-item-desc">02-1588-**** | 대출, 송금</div>
                                </div>
                                <div class="dropdown-item-time">12분 전</div>
                            </div>
                        </div>
                        <div class="dropdown-footer">
                            <button class="dropdown-footer-btn" onclick="goToAlertPage()">모든 알림 보기 <i class="ri-arrow-right-line"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- 설정 버튼 -->
                <div class="header-btn-wrapper">
                    <button class="header-btn" id="settingsBtn" onclick="toggleSettingsDropdown()">
                        <i class="ri-settings-4-line"></i>
                    </button>
                    <div class="header-dropdown settings-dropdown" id="settingsDropdown">
                        <div class="dropdown-header">
                            <span class="dropdown-title">빠른 설정</span>
                        </div>
                        <div class="dropdown-list">
                            <div class="dropdown-setting-item">
                                <div class="dropdown-setting-info">
                                    <i class="ri-volume-up-line"></i>
                                    <span>소리 알림</span>
                                </div>
                                <div class="toggle active" onclick="event.stopPropagation(); this.classList.toggle('active'); showToast('info', '설정 변경', '소리 알림이 ' + (this.classList.contains('active') ? '활성화' : '비활성화') + '되었습니다.')"></div>
                            </div>
                            <div class="dropdown-setting-item">
                                <div class="dropdown-setting-info">
                                    <i class="ri-notification-3-line"></i>
                                    <span>데스크톱 알림</span>
                                </div>
                                <div class="toggle active" onclick="event.stopPropagation(); this.classList.toggle('active'); showToast('info', '설정 변경', '데스크톱 알림이 ' + (this.classList.contains('active') ? '활성화' : '비활성화') + '되었습니다.')"></div>
                            </div>
                            <div class="dropdown-setting-item">
                                <div class="dropdown-setting-info">
                                    <i class="ri-shield-check-line"></i>
                                    <span>자동 차단</span>
                                </div>
                                <div class="toggle active" onclick="event.stopPropagation(); this.classList.toggle('active'); showToast('info', '설정 변경', '자동 차단이 ' + (this.classList.contains('active') ? '활성화' : '비활성화') + '되었습니다.')"></div>
                            </div>
                            <div class="dropdown-setting-item">
                                <div class="dropdown-setting-info">
                                    <i class="ri-moon-line"></i>
                                    <span>다크 모드</span>
                                </div>
                                <div class="toggle active" onclick="event.stopPropagation(); this.classList.toggle('active')"></div>
                            </div>
                        </div>
                        <div class="dropdown-footer">
                            <button class="dropdown-footer-btn" onclick="goToSettingsPage()">전체 설정 <i class="ri-arrow-right-line"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="pages-wrapper">
        <!-- PAGE: 실시간 관제 -->
        <div class="page active" id="page-realtime">
            <div class="realtime-stats">
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-phone-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value" id="liveCount">1,247</div>
                        <div class="rt-stat-label">실시간 감시 통화</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 12.5%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon red"><i class="ri-alarm-warning-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value danger">34</div>
                        <div class="rt-stat-label">의심 통화 탐지</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 8건</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon green"><i class="ri-shield-check-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value success">128</div>
                        <div class="rt-stat-label">금일 차단 건수</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 23.1%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon yellow"><i class="ri-money-dollar-circle-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value warning">₩4.2억</div>
                        <div class="rt-stat-label">피해 예방 금액</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> ₩1.8억</div>
                </div>
            </div>

            <!-- 상단 고정 긴급 대응 바 -->
            <div class="emergency-bar">
                <div class="emergency-bar-left">
                    <div class="emergency-bar-icon"><i class="ri-alarm-warning-fill"></i></div>
                    <div class="emergency-bar-info">
                        <h3>긴급 위협 탐지 - 즉시 대응 필요</h3>
                        <p>010-3847-**** | 해외 VoIP (중국) | 통화 진행 중 05:32 | Risk Score: 88점</p>
                    </div>
                </div>
                <div class="emergency-bar-actions">
                    <button class="btn btn-danger" onclick="handleBlock()">즉시 차단</button>
                    <button class="btn btn-secondary" onclick="handleReport()">신고 접수</button>
                    <button class="btn btn-primary" onclick="handleVictimCall()">피해자 긴급 연락</button>
                </div>
            </div>

            <div class="main-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><i class="ri-error-warning-line"></i> 위협 탐지 현황 <span class="card-badge">34</span></div>
                    </div>
                    <div class="card-body scrollable">
                        <table>
                            <thead><tr><th>심각도</th><th>발신 정보</th><th>통화시간</th><th>유형</th><th>탐지 키워드</th></tr></thead>
                            <tbody>
                                <tr class="critical active">
                                    <td><span class="severity-badge critical"><span class="severity-dot"></span>Critical</span></td>
                                    <td><div class="caller-info"><span class="caller-number">010-3847-****</span><span class="caller-location">해외 VoIP (중국)</span></div></td>
                                    <td>05:32</td>
                                    <td><span class="call-type suspicious">의심</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">검찰</span><span class="keyword-tag">계좌</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge high"><span class="severity-dot"></span>High</span></td>
                                    <td><div class="caller-info"><span class="caller-number">02-1588-****</span><span class="caller-location">서울 강남구</span></div></td>
                                    <td>03:18</td>
                                    <td><span class="call-type suspicious">의심</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">대출</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge medium"><span class="severity-dot"></span>Medium</span></td>
                                    <td><div class="caller-info"><span class="caller-number">010-9182-****</span><span class="caller-location">부산 해운대구</span></div></td>
                                    <td>02:45</td>
                                    <td><span class="call-type normal">수신</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">보험</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge low"><span class="severity-dot"></span>Low</span></td>
                                    <td><div class="caller-info"><span class="caller-number">010-5523-****</span><span class="caller-location">인천 남동구</span></div></td>
                                    <td>01:22</td>
                                    <td><span class="call-type normal">수신</span></td>
                                    <td></td>
                                </tr>
                                <tr class="critical">
                                    <td><span class="severity-badge critical"><span class="severity-dot"></span>Critical</span></td>
                                    <td><div class="caller-info"><span class="caller-number">+86-138-****</span><span class="caller-location">해외 (중국)</span></div></td>
                                    <td>12:33</td>
                                    <td><span class="call-type suspicious">의심</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">경찰</span><span class="keyword-tag">체포</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge high"><span class="severity-dot"></span>High</span></td>
                                    <td><div class="caller-info"><span class="caller-number">070-8834-****</span><span class="caller-location">서울 영등포구</span></div></td>
                                    <td>04:15</td>
                                    <td><span class="call-type suspicious">의심</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">금융감독원</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge medium"><span class="severity-dot"></span>Medium</span></td>
                                    <td><div class="caller-info"><span class="caller-number">02-3456-****</span><span class="caller-location">서울 중구</span></div></td>
                                    <td>01:58</td>
                                    <td><span class="call-type normal">수신</span></td>
                                    <td><div class="keyword-tags"><span class="keyword-tag">환불</span></div></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-badge low"><span class="severity-dot"></span>Low</span></td>
                                    <td><div class="caller-info"><span class="caller-number">010-7782-****</span><span class="caller-location">대전 서구</span></div></td>
                                    <td>00:45</td>
                                    <td><span class="call-type normal">수신</span></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card analysis-card">
                    <div class="card-header">
                        <div class="card-title"><i class="ri-robot-line"></i> AI 위협 분석</div>
                        <div style="display:flex;align-items:center;gap:8px;color:var(--danger);font-size:14px;font-weight:600;"><span style="width:8px;height:8px;background:var(--danger);border-radius:50%;animation:pulse 1s infinite;"></span>실시간</div>
                    </div>
                    <div class="card-body">
                        <div class="score-section">
                            <div class="score-ring">
                                <svg width="140" height="140">
                                    <defs>
                                        <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#4A90E2"/>
                                            <stop offset="50%" style="stop-color:#2E5C8A"/>
                                            <stop offset="100%" style="stop-color:#4A90E2"/>
                                        </linearGradient>
                                    </defs>
                                    <circle class="bg" cx="70" cy="70" r="60"></circle>
                                    <circle class="progress" cx="70" cy="70" r="60" stroke="url(#scoreGradient)"></circle>
                                </svg>
                                <div class="score-value"><div class="score-number">88</div><div class="score-label">Risk Score</div></div>
                            </div>
                            <div class="threat-badge"><i class="ri-error-warning-fill"></i> 보이스피싱 고위험</div>
                        </div>
                        <div class="section-title">위험 요소 분석</div>
                        <div class="factor-list">
                            <div class="factor-item ai-factor">
                                <div class="factor-icon ai-icon"><i class="ri-mic-fill"></i></div>
                                <div class="factor-content">
                                    <div class="factor-header">
                                        <span class="factor-name">음성 패턴 이상</span>
                                        <span class="factor-value-wrap"><span class="factor-value" id="factorVoice">23</span><span class="factor-unit">건</span></span>
                                    </div>
                                    <div class="factor-bar"><div class="factor-fill ai-fill" id="factorVoiceBar" style="width:75%;"></div></div>
                                </div>
                            </div>
                            <div class="factor-item ai-factor">
                                <div class="factor-icon ai-icon"><i class="ri-chat-quote-fill"></i></div>
                                <div class="factor-content">
                                    <div class="factor-header">
                                        <span class="factor-name">위험 키워드 탐지</span>
                                        <span class="factor-value-wrap"><span class="factor-value" id="factorKeyword">47</span><span class="factor-unit">건</span></span>
                                    </div>
                                    <div class="factor-bar"><div class="factor-fill ai-fill" id="factorKeywordBar" style="width:85%;"></div></div>
                                </div>
                            </div>
                            <div class="factor-item ai-factor">
                                <div class="factor-icon ai-icon"><i class="ri-map-pin-fill"></i></div>
                                <div class="factor-content">
                                    <div class="factor-header">
                                        <span class="factor-name">해외 발신 탐지</span>
                                        <span class="factor-value-wrap"><span class="factor-value" id="factorLocation">12</span><span class="factor-unit">건</span></span>
                                    </div>
                                    <div class="factor-bar"><div class="factor-fill ai-fill" id="factorLocationBar" style="width:40%;"></div></div>
                                </div>
                            </div>
                            <div class="factor-item ai-factor">
                                <div class="factor-icon ai-icon"><i class="ri-time-fill"></i></div>
                                <div class="factor-content">
                                    <div class="factor-header">
                                        <span class="factor-name">비정상 통화 패턴</span>
                                        <span class="factor-value-wrap"><span class="factor-value" id="factorPattern">8</span><span class="factor-unit">건</span></span>
                                    </div>
                                    <div class="factor-bar"><div class="factor-fill ai-fill" id="factorPatternBar" style="width:30%;"></div></div>
                                </div>
                            </div>
                        </div>
                        <div class="section-title">탐지된 위험 키워드</div>
                        <div class="keywords-grid">
                            <span class="keyword-chip">검찰 <span class="keyword-count">5</span></span>
                            <span class="keyword-chip">계좌이체 <span class="keyword-count">3</span></span>
                            <span class="keyword-chip">긴급 <span class="keyword-count">4</span></span>
                            <span class="keyword-chip">안전계좌 <span class="keyword-count">2</span></span>
                            <span class="keyword-chip">비밀유지 <span class="keyword-count">3</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bottom-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><i class="ri-file-text-line"></i> 실시간 음성 변환</div>
                        <div class="live-indicator"><span class="live-dot"></span> LIVE 녹취 중</div>
                    </div>
                    <div class="card-body transcript-live" id="transcriptList">
                        <div class="transcript-item-live"><span class="transcript-time">00:12</span><p class="transcript-text">저는 <span class="highlight">서울중앙지검</span> 수사관입니다.</p></div>
                        <div class="transcript-item-live"><span class="transcript-time">00:28</span><p class="transcript-text">고객님 명의의 <span class="highlight">계좌</span>가 범죄에 연루되었습니다.</p></div>
                        <div class="transcript-item-live"><span class="transcript-time">01:45</span><p class="transcript-text">지금 바로 <span class="highlight">안전계좌</span>로 이체하셔야 합니다.</p></div>
                        <div class="transcript-item-live"><span class="transcript-time">03:02</span><p class="transcript-text">이 사실은 절대 <span class="highlight">비밀</span>로 해주셔야 합니다.</p></div>
                        <div class="transcript-item-live new"><span class="transcript-time">04:18</span><p class="transcript-text">지금 당장 <span class="highlight">현금</span>을 인출하셔야 합니다.</p></div>
                        <div class="transcript-typing">
                            <div class="typing-dots"><span></span><span></span><span></span></div>
                            <span class="typing-text">음성을 텍스트로 변환 중...</span>
                        </div>
                    </div>
                </div>
                <div class="card"><div class="card-header"><div class="card-title"><i class="ri-shield-check-line"></i> 최근 차단 내역</div></div><div class="card-body block-list">
                    <div class="block-item"><div class="block-icon success"><i class="ri-check-line"></i></div><div class="block-content"><div class="block-title">010-3847-**** 차단</div><div class="block-desc">검찰 사칭 보이스피싱</div></div><div style="text-align:right;"><div class="block-amount">₩3,200만</div><div class="block-time">2분 전</div></div></div>
                    <div class="block-item"><div class="block-icon success"><i class="ri-check-line"></i></div><div class="block-content"><div class="block-title">070-8834-**** 차단</div><div class="block-desc">대출 사기 의심</div></div><div style="text-align:right;"><div class="block-amount">₩1,500만</div><div class="block-time">15분 전</div></div></div>
                    <div class="block-item"><div class="block-icon success"><i class="ri-check-line"></i></div><div class="block-content"><div class="block-title">+86-138-**** 차단</div><div class="block-desc">해외 발신 금융 사기</div></div><div style="text-align:right;"><div class="block-amount">₩5,800만</div><div class="block-time">32분 전</div></div></div>
                </div></div>
            </div>
        </div>

        <!-- PAGE: 위협 알림 -->
        <div class="page" id="page-alerts">
            <div class="realtime-stats">
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon red"><i class="ri-alarm-warning-fill"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value danger">7</div>
                        <div class="rt-stat-label">미처리 알림</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 즉시</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon yellow"><i class="ri-time-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value warning">12</div>
                        <div class="rt-stat-label">대기 중</div>
                    </div>
                    <div class="rt-stat-change down"><i class="ri-arrow-down-line"></i> 3건</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon green"><i class="ri-checkbox-circle-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value success">45</div>
                        <div class="rt-stat-label">금일 처리 완료</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 100%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-timer-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value">2.3분</div>
                        <div class="rt-stat-label">평균 대응 시간</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 목표달성</div>
                </div>
            </div>
            
            <div class="card table-card">
                <div class="card-header">
                    <div class="card-title"><i class="ri-notification-3-line"></i> 알림 목록</div>
                    <div class="card-actions" id="alertFilterBtns">
                        <button class="card-btn active" data-filter="all" onclick="filterAlerts('all', this)">전체</button>
                        <button class="card-btn" data-filter="pending" onclick="filterAlerts('pending', this)">미처리</button>
                        <button class="card-btn" data-filter="done" onclick="filterAlerts('done', this)">처리완료</button>
                    </div>
                </div>
                <div class="card-body" style="padding:0;">
                    <div class="alert-list" id="alertList">
                        <!-- 알림 1 -->
                        <div class="alert-item critical" data-status="pending">
                            <div class="alert-number">01</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge critical">긴급</span>
                                    <span class="alert-time">14:32:15</span>
                                </div>
                                <div class="alert-title">고위험 통화 감지</div>
                                <div class="alert-desc">010-3847-**** | 해외 VoIP (중국) | 검찰 사칭 의심</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge pending">미처리</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-danger" style="padding:10px 20px;" onclick="handleAlertProcess(this, '고위험 통화 감지', '010-3847-****')">처리</button>
                            </div>
                        </div>
                        
                        <!-- 알림 2 -->
                        <div class="alert-item critical" data-status="pending">
                            <div class="alert-number">02</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge critical">긴급</span>
                                    <span class="alert-time">14:28:42</span>
                                </div>
                                <div class="alert-title">해외 발신 의심 통화</div>
                                <div class="alert-desc">+86-138-**** | 중국 발신 | 금융 사기 패턴</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge pending">미처리</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-danger" style="padding:10px 20px;" onclick="handleAlertProcess(this, '해외 발신 의심 통화', '+86-138-****')">처리</button>
                            </div>
                        </div>
                        
                        <!-- 알림 3 -->
                        <div class="alert-item" data-status="pending">
                            <div class="alert-number">03</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge high">높음</span>
                                    <span class="alert-time">14:15:33</span>
                                </div>
                                <div class="alert-title">위험 키워드 다수 탐지</div>
                                <div class="alert-desc">02-1588-**** | 서울 강남구 | "대출", "송금" 반복</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge pending">미처리</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-danger" style="padding:10px 20px;" onclick="handleAlertProcess(this, '위험 키워드 다수 탐지', '02-1588-****')">처리</button>
                            </div>
                        </div>
                        
                        <!-- 알림 4 -->
                        <div class="alert-item" data-status="done">
                            <div class="alert-number">04</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge medium">보통</span>
                                    <span class="alert-time">13:58:21</span>
                                </div>
                                <div class="alert-title">음성 변조 의심</div>
                                <div class="alert-desc">010-9182-**** | 부산 해운대구 | AI 합성음 탐지</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge done">처리완료</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-secondary" style="padding:10px 20px;" onclick="showAlertDetail('음성 변조 의심', '010-9182-****', '부산 해운대구', '13:58:21', 'AI 합성음 탐지', '차단 및 신고 완료')">상세</button>
                            </div>
                        </div>
                        
                        <!-- 알림 5 -->
                        <div class="alert-item" data-status="done">
                            <div class="alert-number">05</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge medium">보통</span>
                                    <span class="alert-time">13:42:08</span>
                                </div>
                                <div class="alert-title">보험 사기 의심 키워드</div>
                                <div class="alert-desc">010-5523-**** | 인천 남동구 | "보험금", "청구" 패턴</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge done">처리완료</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-secondary" style="padding:10px 20px;" onclick="showAlertDetail('보험 사기 의심 키워드', '010-5523-****', '인천 남동구', '13:42:08', '보험금, 청구 패턴', '모니터링 종료')">상세</button>
                            </div>
                        </div>
                        
                        <!-- 알림 6 -->
                        <div class="alert-item" data-status="done">
                            <div class="alert-number">06</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge low">낮음</span>
                                    <span class="alert-time">13:25:44</span>
                                </div>
                                <div class="alert-title">일반 통화 모니터링</div>
                                <div class="alert-desc">02-3456-**** | 서울 종로구 | 정상 패턴</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge done">처리완료</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-secondary" style="padding:10px 20px;" onclick="showAlertDetail('일반 통화 모니터링', '02-3456-****', '서울 종로구', '13:25:44', '정상 패턴', '정상 종료')">상세</button>
                            </div>
                        </div>
                        
                        <!-- 알림 7 -->
                        <div class="alert-item" data-status="done">
                            <div class="alert-number">07</div>
                            <div class="alert-content">
                                <div class="alert-header">
                                    <span class="severity-badge low">낮음</span>
                                    <span class="alert-time">13:10:12</span>
                                </div>
                                <div class="alert-title">VoIP 발신 감지</div>
                                <div class="alert-desc">070-8834-**** | 인터넷 전화 | 모니터링 중</div>
                            </div>
                            <div class="alert-status">
                                <span class="status-badge done">처리완료</span>
                            </div>
                            <div class="alert-actions">
                                <button class="btn btn-secondary" style="padding:10px 20px;" onclick="showAlertDetail('VoIP 발신 감지', '070-8834-****', '인터넷 전화', '13:10:12', 'VoIP 발신', '정상 종료')">상세</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE: 대시보드 -->
        <div class="page" id="page-dashboard">
            <div class="realtime-stats">
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-phone-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value">52,847</div>
                        <div class="rt-stat-label">총 감시 통화</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 15.2%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon red"><i class="ri-spam-2-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value danger">1,234</div>
                        <div class="rt-stat-label">탐지된 위협</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 8.7%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon green"><i class="ri-shield-check-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value success">97.3%</div>
                        <div class="rt-stat-label">차단율</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 목표초과</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon yellow"><i class="ri-money-dollar-circle-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value warning">₩128억</div>
                        <div class="rt-stat-label">피해 예방</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> ₩23억</div>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="card"><div class="card-header"><div class="card-title"><i class="ri-line-chart-line"></i> 월간 탐지 추이</div></div><div class="chart-container big-chart"><canvas id="monthlyChart"></canvas></div></div>
                <div class="card"><div class="card-header"><div class="card-title"><i class="ri-pie-chart-line"></i> 위협 유형 분포</div></div><div class="chart-container big-chart"><canvas id="pieChart"></canvas></div></div>
            </div>
        </div>

        <!-- PAGE: 보이스피싱 분석 -->
        <div class="page" id="page-analysis">
            <div class="analysis-layout-3col">
                <!-- 왼쪽 패널: 회원 통화 내역 -->
                <div class="call-history-panel">
                    <div class="panel-header">
                        <div class="panel-title"><i class="ri-history-line"></i> 보이스가드 회원 통화</div>
                    </div>
                    <div class="call-history-list">
                        <div class="call-history-item active" data-member="kim" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">김</div>
                            <div class="call-history-info">
                                <div class="call-history-name">김○○ <span class="age-badge">72세</span></div>
                                <div class="call-history-number">010-3847-****</div>
                                <div class="call-history-time">현재 통화 중</div>
                            </div>
                            <div class="call-history-status critical">
                                <i class="ri-error-warning-fill"></i>
                            </div>
                        </div>
                        <div class="call-history-item" data-member="park" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">박</div>
                            <div class="call-history-info">
                                <div class="call-history-name">박○○ <span class="age-badge">68세</span></div>
                                <div class="call-history-number">02-1234-****</div>
                                <div class="call-history-time">10분 전</div>
                            </div>
                            <div class="call-history-status safe">
                                <i class="ri-shield-check-fill"></i>
                            </div>
                        </div>
                        <div class="call-history-item" data-member="lee" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">이</div>
                            <div class="call-history-info">
                                <div class="call-history-name">이○○ <span class="age-badge">75세</span></div>
                                <div class="call-history-number">1899-XXXX</div>
                                <div class="call-history-time">25분 전</div>
                            </div>
                            <div class="call-history-status warning">
                                <i class="ri-alert-fill"></i>
                            </div>
                        </div>
                        <div class="call-history-item" data-member="choi" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">최</div>
                            <div class="call-history-info">
                                <div class="call-history-name">최○○ <span class="age-badge">69세</span></div>
                                <div class="call-history-number">010-5555-****</div>
                                <div class="call-history-time">1시간 전</div>
                            </div>
                            <div class="call-history-status safe">
                                <i class="ri-shield-check-fill"></i>
                            </div>
                        </div>
                        <div class="call-history-item" data-member="jung" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">정</div>
                            <div class="call-history-info">
                                <div class="call-history-name">정○○ <span class="age-badge">71세</span></div>
                                <div class="call-history-number">1588-XXXX</div>
                                <div class="call-history-time">2시간 전</div>
                            </div>
                            <div class="call-history-status safe">
                                <i class="ri-shield-check-fill"></i>
                            </div>
                        </div>
                        <div class="call-history-item" data-member="han" onclick="selectCallHistory(this)">
                            <div class="call-history-avatar">한</div>
                            <div class="call-history-info">
                                <div class="call-history-name">한○○ <span class="age-badge">65세</span></div>
                                <div class="call-history-number">010-9999-****</div>
                                <div class="call-history-time">3시간 전</div>
                            </div>
                            <div class="call-history-status critical">
                                <i class="ri-error-warning-fill"></i>
                            </div>
                        </div>
                    </div>
                    <div class="call-history-footer">
                        <span><i class="ri-user-line"></i> 총 1,247명 보호 중</span>
                    </div>
                </div>

                <!-- 중앙 패널: 음성 대화 미리보기 -->
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title"><i class="ri-chat-voice-line"></i> 실시간 음성 대화</div>
                        <div class="live-indicator"><span class="live-dot"></span> 통화 중</div>
                    </div>
                    
                    <div class="call-timeline">
                        <div class="timeline-time" id="callDuration">05:47</div>
                        <div class="timeline-bar"><div class="timeline-progress"></div></div>
                        <div class="timeline-status"><span class="live-dot"></span> 녹음 중</div>
                    </div>
                    
                    <div class="panel-body" id="conversationPanel">
                        <!-- 통화 정보 -->
                        <div class="call-info-header">
                            <div class="call-info-row">
                                <span class="call-label">발신번호</span>
                                <span class="call-value danger">010-3847-**** (해외 VoIP)</span>
                            </div>
                            <div class="call-info-row">
                                <span class="call-label">수신자</span>
                                <span class="call-value">김○○ (72세, 여성)</span>
                            </div>
                            <div class="call-info-row">
                                <span class="call-label">위험도</span>
                                <span class="risk-badge"><i class="ri-error-warning-fill"></i> Critical - 88점</span>
                            </div>
                        </div>
                        
                        <!-- 대화 시뮬레이션 -->
                        <div class="conversation-container" id="conversationList">
                            <div class="message caller">
                                <div class="message-avatar caller-avatar"><i class="ri-spy-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">안녕하세요, 저는 <span class="message-highlight">서울중앙지검</span> 금융범죄수사부 김철수 수사관입니다.</div>
                                    <div class="message-meta">
                                        <span>00:12</span>
                                        <span class="keyword-alert"><i class="ri-alert-fill"></i> 검찰 사칭</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message victim">
                                <div class="message-avatar victim-avatar"><i class="ri-user-heart-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">네? 검찰이요? 무슨 일이시죠?</div>
                                    <div class="message-meta"><span>00:18</span></div>
                                </div>
                            </div>
                            
                            <div class="message caller">
                                <div class="message-avatar caller-avatar"><i class="ri-spy-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">어르신 명의 <span class="message-highlight">계좌</span>가 대포통장으로 사용되어 범죄 자금 세탁에 연루되었습니다. 지금 바로 수사에 협조해 주셔야 합니다.</div>
                                    <div class="message-meta">
                                        <span>00:35</span>
                                        <span class="keyword-alert"><i class="ri-alert-fill"></i> 계좌 언급</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message victim">
                                <div class="message-avatar victim-avatar"><i class="ri-user-heart-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">아이고, 저는 그런 거 한 적이 없는데요... 어떻게 해야 하나요?</div>
                                    <div class="message-meta"><span>00:48</span></div>
                                </div>
                            </div>
                            
                            <div class="message caller">
                                <div class="message-avatar caller-avatar"><i class="ri-spy-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">걱정 마세요. 어르신이 범인이 아니라는 것을 증명하려면, 지금 가지고 계신 예금을 <span class="message-highlight">안전계좌</span>로 이체하셔야 합니다. 수사가 끝나면 바로 돌려드립니다.</div>
                                    <div class="message-meta">
                                        <span>01:15</span>
                                        <span class="keyword-alert"><i class="ri-alert-fill"></i> 안전계좌 유도</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message victim">
                                <div class="message-avatar victim-avatar"><i class="ri-user-heart-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">안전계좌요? 얼마를 보내야 하나요?</div>
                                    <div class="message-meta"><span>01:28</span></div>
                                </div>
                            </div>
                            
                            <div class="message caller">
                                <div class="message-avatar caller-avatar"><i class="ri-spy-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">어르신 계좌에 있는 <span class="message-highlight">전액</span>을 이체하셔야 합니다. 그리고 이 사실은 <span class="message-highlight">가족에게 절대 말씀하시면 안 됩니다</span>. 수사 보안 때문입니다.</div>
                                    <div class="message-meta">
                                        <span>01:52</span>
                                        <span class="keyword-alert"><i class="ri-alert-fill"></i> 비밀 유지 강요</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message victim">
                                <div class="message-avatar victim-avatar"><i class="ri-user-heart-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">네, 알겠습니다. 지금 바로 은행에 가면 될까요?</div>
                                    <div class="message-meta"><span>02:08</span></div>
                                </div>
                            </div>
                            
                            <div class="message caller">
                                <div class="message-avatar caller-avatar"><i class="ri-spy-fill"></i></div>
                                <div class="message-content">
                                    <div class="message-bubble">아니요, 은행에 가시면 안 됩니다. <span class="message-highlight">ATM</span>에서 직접 이체하셔야 합니다. 제가 알려드리는 계좌번호로 보내주세요.</div>
                                    <div class="message-meta">
                                        <span>02:25</span>
                                        <span class="keyword-alert"><i class="ri-alert-fill"></i> ATM 유도</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-action-bar">
                        <button class="btn btn-danger" onclick="handleBlock()">즉시 차단</button>
                        <button class="btn btn-primary" onclick="handleWarningBroadcast()">경고 송출</button>
                    </div>
                </div>
                
                <!-- 오른쪽 패널: 상황별 조치 & 고객 알림 -->
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title"><i class="ri-shield-flash-line"></i> 상황별 조치 & 고객 알림</div>
                    </div>
                    
                    <div class="panel-body">
                        <!-- 탐지된 상황 -->
                        <div class="action-section">
                            <div class="section-header"><i class="ri-error-warning-line"></i> 탐지된 위험 상황</div>
                            
                            <div class="situation-card active">
                                <div class="situation-header">
                                    <div class="situation-title"><i class="ri-government-fill"></i> 검찰/경찰 사칭</div>
                                    <span class="situation-badge critical">Critical</span>
                                </div>
                                <div class="situation-desc">발신자가 "서울중앙지검 수사관"을 사칭하고 있습니다. 공공기관 사칭 보이스피싱 전형적 수법입니다.</div>
                            </div>
                            
                            <div class="situation-card active">
                                <div class="situation-header">
                                    <div class="situation-title"><i class="ri-money-dollar-circle-fill"></i> 금전 이체 유도</div>
                                    <span class="situation-badge critical">Critical</span>
                                </div>
                                <div class="situation-desc">"안전계좌"로 전액 이체를 요구하고 있습니다. 즉시 차단 권고됩니다.</div>
                            </div>
                            
                            <div class="situation-card active">
                                <div class="situation-header">
                                    <div class="situation-title"><i class="ri-eye-off-fill"></i> 비밀 유지 강요</div>
                                    <span class="situation-badge high">High</span>
                                </div>
                                <div class="situation-desc">가족에게 알리지 말라고 협박하고 있습니다. 피해자 고립 시도입니다.</div>
                            </div>
                            
                            <div class="situation-card">
                                <div class="situation-header">
                                    <div class="situation-title"><i class="ri-bank-card-fill"></i> ATM 이용 유도</div>
                                    <span class="situation-badge detected">탐지됨</span>
                                </div>
                                <div class="situation-desc">은행 방문 대신 ATM 이용을 유도하여 금융기관 개입을 회피하려 합니다.</div>
                            </div>
                        </div>
                        
                        <!-- 고객 알림 옵션 -->
                        <div class="action-section">
                            <div class="section-header"><i class="ri-notification-4-line"></i> 고객에게 바로 알리기</div>
                            
                            <div class="notify-options">
                                <div class="notify-btn danger" onclick="handleVictimCall()">
                                    <span>긴급 경고 전화</span>
                                    <small>직접 통화로 경고</small>
                                </div>
                                
                                <div class="notify-btn warning" onclick="handleWarningSMS()">
                                    <span>경고 SMS 발송</span>
                                    <small>즉시 문자 전송</small>
                                </div>
                                
                                <div class="notify-btn" onclick="handleFamilyContact()">
                                    <span>가족 연락</span>
                                    <small>보호자 긴급 알림</small>
                                </div>
                                
                                <div class="notify-btn success" onclick="handleBankFreeze()">
                                    <span>은행 계좌 동결</span>
                                    <small>출금 정지 요청</small>
                                </div>
                                
                                <div class="notify-btn" onclick="handlePoliceReport()">
                                    <span>경찰 신고</span>
                                    <small>112 자동 연계</small>
                                </div>
                                
                                <div class="notify-btn" onclick="handleFSSReport()">
                                    <span>금감원 신고</span>
                                    <small>사기 피해 접수</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI 추천 조치 -->
                        <div class="action-section">
                            <div class="section-header"><i class="ri-robot-line"></i> AI 추천 조치</div>
                            <div class="emergency-section">
                                <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
                                    <div>
                                        <div style="font-size:16px;font-weight:700;color:var(--danger);">즉시 개입 권고</div>
                                        <div style="font-size:13px;color:var(--text-secondary);">Risk Score 88점 - 보이스피싱 확신도 96%</div>
                                    </div>
                                </div>
                                <div class="btn-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                                    <button class="btn btn-danger" onclick="handleAllActions()">원클릭 전체 조치</button>
                                    <button class="btn btn-secondary" onclick="handleCaseRegister()">케이스 등록</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE: 통계 리포트 -->
        <div class="page" id="page-reports">
            <div class="report-header">
                <div class="report-title">2026년 1월 통계 리포트</div>
                <div class="report-period">2026.01.01 ~ 2026.01.15</div>
            </div>
            <div class="realtime-stats" style="grid-template-columns: repeat(5, 1fr);">
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-phone-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value">52,847</div>
                        <div class="rt-stat-label">총 감시 통화</div>
                    </div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon red"><i class="ri-error-warning-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value danger">1,234</div>
                        <div class="rt-stat-label">탐지 건수</div>
                    </div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon green"><i class="ri-shield-check-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value success">1,198</div>
                        <div class="rt-stat-label">차단 건수</div>
                    </div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon yellow"><i class="ri-money-dollar-circle-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value warning">₩128억</div>
                        <div class="rt-stat-label">피해 예방</div>
                    </div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-percent-line"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value">97.3%</div>
                        <div class="rt-stat-label">차단율</div>
                    </div>
                </div>
            </div>
            <div class="report-grid">
                <div class="card report-chart-card">
                    <div class="card-header" onclick="toggleReportChart(this)">
                        <div class="card-title"><i class="ri-line-chart-line"></i> 일별 탐지 추이</div>
                        <div class="chart-legend">
                            <span class="legend-item"><span class="legend-dot blue"></span> 탐지</span>
                            <span class="legend-item"><span class="legend-dot green"></span> 차단</span>
                        </div>
                        <i class="ri-arrow-down-s-line collapse-icon"></i>
                    </div>
                    <div class="chart-container"><canvas id="dailyChart"></canvas></div>
                </div>
                <div class="card report-chart-card">
                    <div class="card-header" onclick="toggleReportChart(this)">
                        <div class="card-title"><i class="ri-pie-chart-line"></i> 위협 유형 분포</div>
                        <i class="ri-arrow-down-s-line collapse-icon"></i>
                    </div>
                    <div class="chart-container"><canvas id="threatTypeChart"></canvas></div>
                </div>
                <div class="card report-chart-card">
                    <div class="card-header" onclick="toggleReportChart(this)">
                        <div class="card-title"><i class="ri-bar-chart-grouped-line"></i> 시간대별 통화량</div>
                        <i class="ri-arrow-down-s-line collapse-icon"></i>
                    </div>
                    <div class="chart-container"><canvas id="hourlyChart"></canvas></div>
                </div>
                <div class="card report-chart-card">
                    <div class="card-header" onclick="toggleReportChart(this)">
                        <div class="card-title"><i class="ri-map-pin-line"></i> 지역별 위협 현황</div>
                        <i class="ri-arrow-down-s-line collapse-icon"></i>
                    </div>
                    <div class="chart-container"><canvas id="regionChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- PAGE: 케이스 관리 -->
        <div class="page" id="page-cases">
            <div class="case-filters" id="caseFilters">
                <button class="case-filter active" data-status="all" onclick="filterCases('all', this)">전체 (<span id="caseCountAll">10</span>)</button>
                <button class="case-filter" data-status="진행 중" onclick="filterCases('진행 중', this)">진행 중 (<span id="caseCountProgress">4</span>)</button>
                <button class="case-filter" data-status="처리 완료" onclick="filterCases('처리 완료', this)">처리 완료 (<span id="caseCountDone">4</span>)</button>
                <button class="case-filter" data-status="보류" onclick="filterCases('보류', this)">보류 (<span id="caseCountHold">2</span>)</button>
            </div>
            <div class="card table-card"><div class="card-header"><div class="card-title"><i class="ri-folder-shield-2-line"></i> 케이스 목록</div></div><div class="card-body"><table id="caseTable"><thead><tr><th>케이스 ID</th><th>생성일</th><th>발신번호</th><th>유형</th><th>상태</th><th>담당자</th></tr></thead><tbody>
                <tr data-status="진행 중" onclick="viewCaseDetail('CASE-2026-0115')" style="cursor:pointer;"><td><strong>CASE-2026-0115</strong></td><td>2026.01.15 14:32</td><td>010-3847-****</td><td>검찰 사칭</td><td><span class="severity-badge critical">진행 중</span></td><td>이세영</td></tr>
                <tr data-status="진행 중" onclick="viewCaseDetail('CASE-2026-0114')" style="cursor:pointer;"><td><strong>CASE-2026-0114</strong></td><td>2026.01.15 13:18</td><td>+86-138-****</td><td>해외 금융 사기</td><td><span class="severity-badge critical">진행 중</span></td><td>윤종후</td></tr>
                <tr data-status="처리 완료" onclick="viewCaseDetail('CASE-2026-0113')" style="cursor:pointer;"><td><strong>CASE-2026-0113</strong></td><td>2026.01.15 11:45</td><td>02-1588-****</td><td>대출 사기</td><td><span class="severity-badge low">처리 완료</span></td><td>정세희</td></tr>
                <tr data-status="진행 중" onclick="viewCaseDetail('CASE-2026-0112')" style="cursor:pointer;"><td><strong>CASE-2026-0112</strong></td><td>2026.01.15 10:22</td><td>070-8834-****</td><td>대출 사기</td><td><span class="severity-badge high">진행 중</span></td><td>이세영</td></tr>
                <tr data-status="보류" onclick="viewCaseDetail('CASE-2026-0111')" style="cursor:pointer;"><td><strong>CASE-2026-0111</strong></td><td>2026.01.14 16:55</td><td>010-5523-****</td><td>보험 사기</td><td><span class="severity-badge medium">보류</span></td><td>윤건</td></tr>
                <tr data-status="처리 완료" onclick="viewCaseDetail('CASE-2026-0110')" style="cursor:pointer;"><td><strong>CASE-2026-0110</strong></td><td>2026.01.14 14:30</td><td>02-3456-****</td><td>금융감독원 사칭</td><td><span class="severity-badge low">처리 완료</span></td><td>윤종후</td></tr>
                <tr data-status="처리 완료" onclick="viewCaseDetail('CASE-2026-0109')" style="cursor:pointer;"><td><strong>CASE-2026-0109</strong></td><td>2026.01.14 11:15</td><td>010-7782-****</td><td>택배 사칭</td><td><span class="severity-badge low">처리 완료</span></td><td>정세희</td></tr>
                <tr data-status="진행 중" onclick="viewCaseDetail('CASE-2026-0108')" style="cursor:pointer;"><td><strong>CASE-2026-0108</strong></td><td>2026.01.14 09:40</td><td>+82-10-****</td><td>경찰 사칭</td><td><span class="severity-badge critical">진행 중</span></td><td>윤건</td></tr>
                <tr data-status="보류" onclick="viewCaseDetail('CASE-2026-0107')" style="cursor:pointer;"><td><strong>CASE-2026-0107</strong></td><td>2026.01.13 17:20</td><td>070-1234-****</td><td>투자 사기</td><td><span class="severity-badge medium">보류</span></td><td>이세영</td></tr>
                <tr data-status="처리 완료" onclick="viewCaseDetail('CASE-2026-0106')" style="cursor:pointer;"><td><strong>CASE-2026-0106</strong></td><td>2026.01.13 15:00</td><td>02-9876-****</td><td>은행 사칭</td><td><span class="severity-badge low">처리 완료</span></td><td>윤종후</td></tr>
            </tbody></table></div></div>
        </div>

        <!-- PAGE: 고객 리스트 -->
        <div class="page" id="page-customers">
            <div class="realtime-stats">
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon green"><i class="ri-shield-check-fill"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value success">1,247</div>
                        <div class="rt-stat-label">보호 중인 고객</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 5.2%</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon red"><i class="ri-spam-2-fill"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value danger">892</div>
                        <div class="rt-stat-label">차단된 위협</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 12건</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon blue"><i class="ri-money-dollar-circle-fill"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value">₩12.4억</div>
                        <div class="rt-stat-label">보호된 금액</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> ₩2.1억</div>
                </div>
                <div class="realtime-stat-card">
                    <div class="rt-stat-icon yellow"><i class="ri-user-add-fill"></i></div>
                    <div class="rt-stat-content">
                        <div class="rt-stat-value warning">+38</div>
                        <div class="rt-stat-label">이번 주 신규</div>
                    </div>
                    <div class="rt-stat-change up"><i class="ri-arrow-up-line"></i> 8명</div>
                </div>
            </div>

            <div class="customers-toolbar">
                <div class="toolbar-left">
                    <div class="search-box">
                        <i class="ri-search-line"></i>
                        <input type="text" placeholder="고객명, 연락처, 고객번호 검색..." id="customerSearch" oninput="searchCustomers(this.value)">
                    </div>
                    <div class="filter-group" id="customerFilterGroup">
                        <button class="filter-btn active" data-filter="all" onclick="filterCustomers('all', this)">전체</button>
                        <button class="filter-btn" data-filter="active" onclick="filterCustomers('active', this)">활성</button>
                        <button class="filter-btn" data-filter="pending" onclick="filterCustomers('pending', this)">대기</button>
                        <button class="filter-btn" data-filter="expired" onclick="filterCustomers('expired', this)">만료</button>
                    </div>
                </div>
                <div class="toolbar-right">
                    <button class="btn-primary" onclick="showAddCustomerModal()"><i class="ri-user-add-line"></i> 고객 등록</button>
                </div>
            </div>

            <div class="customers-table-wrapper">
                <table class="customers-table" id="customersTable">
                    <thead>
                        <tr>
                            <th><input type="checkbox" class="check-all" onclick="toggleAllCustomers(this)"></th>
                            <th>고객 정보</th>
                            <th>가입일</th>
                            <th>보호 상태</th>
                            <th>위협 차단</th>
                            <th>보호 금액</th>
                            <th>최근 활동</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-status="active" data-id="C001247" data-name="윤종후" data-phone="010-1234-****" data-threats="12" data-saved="3200" data-joined="2024.08.15" onclick="viewCustomerDetail('C001247')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">윤</div>
                                    <div class="customer-details">
                                        <div class="customer-name">윤종후</div>
                                        <div class="customer-contact">010-1234-****  ·  #C001247</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.08.15</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count">12건</span></td>
                            <td><span class="saved-amount">₩3,200만</span></td>
                            <td><span class="last-activity">2시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001198" data-name="박효진" data-phone="010-5678-****" data-threats="8" data-saved="1800" data-joined="2024.07.22" onclick="viewCustomerDetail('C001198')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">박</div>
                                    <div class="customer-details">
                                        <div class="customer-name">박효진</div>
                                        <div class="customer-contact">010-5678-****  ·  #C001198</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.07.22</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count">8건</span></td>
                            <td><span class="saved-amount">₩1,800만</span></td>
                            <td><span class="last-activity">5시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001156" data-name="안문학" data-phone="010-9012-****" data-threats="23" data-saved="5600" data-joined="2024.06.10" onclick="viewCustomerDetail('C001156')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">안</div>
                                    <div class="customer-details">
                                        <div class="customer-name">안문학</div>
                                        <div class="customer-contact">010-9012-****  ·  #C001156</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.06.10</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count warning">23건</span></td>
                            <td><span class="saved-amount highlight">₩5,600만</span></td>
                            <td><span class="last-activity">30분 전</span></td>
                        </tr>
                        <tr data-status="pending" data-id="C001089" data-name="길은진" data-phone="010-3456-****" data-threats="0" data-saved="0" data-joined="2024.05.28" onclick="viewCustomerDetail('C001089')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">길</div>
                                    <div class="customer-details">
                                        <div class="customer-name">길은진</div>
                                        <div class="customer-contact">010-3456-****  ·  #C001089</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.05.28</span></td>
                            <td><span class="status-badge pending"><i class="ri-time-line"></i> 심사 중</span></td>
                            <td><span class="threat-count">-</span></td>
                            <td><span class="saved-amount">-</span></td>
                            <td><span class="last-activity">1일 전</span></td>
                        </tr>
                        <tr data-status="expired" data-id="C000923" data-name="김지영" data-phone="010-7890-****" data-threats="5" data-saved="920" data-joined="2024.03.15" onclick="viewCustomerDetail('C000923')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">김</div>
                                    <div class="customer-details">
                                        <div class="customer-name">김지영</div>
                                        <div class="customer-contact">010-7890-****  ·  #C000923</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.03.15</span></td>
                            <td><span class="status-badge expired"><i class="ri-error-warning-line"></i> 만료</span></td>
                            <td><span class="threat-count">5건</span></td>
                            <td><span class="saved-amount">₩920만</span></td>
                            <td><span class="last-activity">15일 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001302" data-name="한진희" data-phone="010-2345-****" data-threats="3" data-saved="450" data-joined="2024.09.02" onclick="viewCustomerDetail('C001302')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">한</div>
                                    <div class="customer-details">
                                        <div class="customer-name">한진희</div>
                                        <div class="customer-contact">010-2345-****  ·  #C001302</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.09.02</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count">3건</span></td>
                            <td><span class="saved-amount">₩450만</span></td>
                            <td><span class="last-activity">12시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001278" data-name="윤건" data-phone="010-6789-****" data-threats="18" data-saved="4100" data-joined="2024.08.28" onclick="viewCustomerDetail('C001278')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">윤</div>
                                    <div class="customer-details">
                                        <div class="customer-name">윤건</div>
                                        <div class="customer-contact">010-6789-****  ·  #C001278</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.08.28</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count warning">18건</span></td>
                            <td><span class="saved-amount highlight">₩4,100만</span></td>
                            <td><span class="last-activity">1시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001256" data-name="박정웅" data-phone="010-4567-****" data-threats="7" data-saved="1250" data-joined="2024.08.20" onclick="viewCustomerDetail('C001256')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">박</div>
                                    <div class="customer-details">
                                        <div class="customer-name">박정웅</div>
                                        <div class="customer-contact">010-4567-****  ·  #C001256</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.08.20</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count">7건</span></td>
                            <td><span class="saved-amount">₩1,250만</span></td>
                            <td><span class="last-activity">4시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001234" data-name="차정훈" data-phone="010-8901-****" data-threats="4" data-saved="680" data-joined="2024.08.12" onclick="viewCustomerDetail('C001234')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">차</div>
                                    <div class="customer-details">
                                        <div class="customer-name">차정훈</div>
                                        <div class="customer-contact">010-8901-****  ·  #C001234</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.08.12</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count">4건</span></td>
                            <td><span class="saved-amount">₩680만</span></td>
                            <td><span class="last-activity">6시간 전</span></td>
                        </tr>
                        <tr data-status="active" data-id="C001189" data-name="조옥정" data-phone="010-3210-****" data-threats="15" data-saved="3450" data-joined="2024.07.30" onclick="viewCustomerDetail('C001189')" style="cursor:pointer;">
                            <td><input type="checkbox" class="customer-checkbox" onclick="event.stopPropagation()"></td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-avatar">조</div>
                                    <div class="customer-details">
                                        <div class="customer-name">조옥정</div>
                                        <div class="customer-contact">010-3210-****  ·  #C001189</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="date-text">2024.07.30</span></td>
                            <td><span class="status-badge active"><i class="ri-shield-check-line"></i> 보호 중</span></td>
                            <td><span class="threat-count warning">15건</span></td>
                            <td><span class="saved-amount highlight">₩3,450만</span></td>
                            <td><span class="last-activity">20분 전</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="customers-pagination">
                <div class="pagination-info">총 1,247명 중 1-11 표시</div>
                <div class="pagination-controls">
                    <button class="page-btn" disabled><i class="ri-arrow-left-s-line"></i></button>
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <span class="page-dots">...</span>
                    <button class="page-btn">178</button>
                    <button class="page-btn"><i class="ri-arrow-right-s-line"></i></button>
                </div>
            </div>
        </div>

        <!-- PAGE: 피싱 방어 훈련 -->
        <div class="page" id="page-training">
            <div class="training-container">
                <!-- 게임 헤더 -->
                <div class="training-header">
                    <div class="training-header-left">
                        <div class="training-icon-wrap">
                            <i class="ri-gamepad-line"></i>
                        </div>
                        <div class="training-header-info">
                            <h2>피싱 방어 훈련</h2>
                            <p>실제 보이스피싱 시나리오를 체험하고 대응 능력을 키워보세요!</p>
                        </div>
                    </div>
                    <div class="training-stats">
                        <div class="training-stat">
                            <span class="training-stat-value" id="trainingScore">0</span>
                            <span class="training-stat-label">점수</span>
                        </div>
                        <div class="training-stat">
                            <span class="training-stat-value" id="trainingStreak">0</span>
                            <span class="training-stat-label">연속 정답</span>
                        </div>
                        <div class="training-stat">
                            <span class="training-stat-value" id="trainingRank">Bronze</span>
                            <span class="training-stat-label">등급</span>
                        </div>
                    </div>
                </div>

                <!-- 게임 영역 -->
                <div class="training-game-area">
                    <!-- 채팅 시나리오 카드 -->
                    <div class="chat-scenario-card" id="scenarioCard">
                        <div class="chat-header">
                            <div class="chat-header-left">
                                <div class="chat-type-badge" id="chatTypeBadge">
                                    <i class="ri-kakao-talk-fill"></i>
                                    <span>카카오톡</span>
                                </div>
                                <div class="chat-sender-info">
                                    <span class="chat-sender-name" id="chatSenderName">아들</span>
                                </div>
                            </div>
                            <div class="scenario-timer" id="scenarioTimer">
                                <i class="ri-timer-line"></i>
                                <span>3:00</span>
                            </div>
                        </div>
                        
                        <div class="scenario-hints-wrapper">
                            <div class="scenario-hints-label"><i class="ri-alarm-warning-line"></i> AI 탐지 위험 신호</div>
                            <div class="scenario-hints" id="scenarioHints">
                                <div class="hint-item active">
                                    <i class="ri-alert-line"></i>
                                    <span>개인정보 요구</span>
                                </div>
                                <div class="hint-item active">
                                    <i class="ri-government-line"></i>
                                    <span>공공기관 사칭</span>
                                </div>
                                <div class="hint-item">
                                    <i class="ri-time-line"></i>
                                    <span>긴급성 강조</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-window" id="chatWindow">
                            <div class="chat-messages" id="chatMessages">
                                <!-- 채팅 메시지가 여기에 동적으로 추가됨 -->
                            </div>
                        </div>
                    </div>

                    <!-- 선택지 영역 -->
                    <div class="training-choices">
                        <h3>이 전화, 어떻게 대응하시겠습니까?</h3>
                        <p class="training-choices-hint"><i class="ri-hand-coin-line"></i> 아래 버튼 중 하나를 클릭하세요!</p>
                        <div class="choice-buttons">
                            <button class="choice-btn wrong" onclick="selectTrainingChoice(1)">
                                <i class="ri-check-line"></i>
                                <span>정보 제공</span>
                                <small>요청대로 정보를 알려준다</small>
                            </button>
                            <button class="choice-btn correct" onclick="selectTrainingChoice(2)">
                                <i class="ri-phone-off-line"></i>
                                <span>전화 끊기</span>
                                <small>의심스러우니 바로 끊는다</small>
                            </button>
                            <button class="choice-btn correct" onclick="selectTrainingChoice(3)">
                                <i class="ri-phone-line"></i>
                                <span>직접 확인</span>
                                <small>해당 기관에 직접 전화한다</small>
                            </button>
                            <button class="choice-btn wrong" onclick="selectTrainingChoice(4)">
                                <i class="ri-question-line"></i>
                                <span>추가 질문</span>
                                <small>더 자세한 정보를 요청한다</small>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 결과 표시 (숨김) -->
                <div class="training-result" id="trainingResult" style="display: none;">
                    <div class="result-icon correct">
                        <i class="ri-shield-check-line"></i>
                    </div>
                    <h3 class="result-title">완벽한 대응!</h3>
                    <p class="result-desc">보이스피싱을 정확히 파악했습니다.</p>
                    <div class="result-explanation">
                        <h4>해설</h4>
                        <p id="resultExplanation">금융감독원은 절대로 전화로 개인정보나 계좌 비밀번호를 요구하지 않습니다. 의심스러운 전화는 즉시 끊고, 해당 기관의 공식 번호로 직접 확인하세요.</p>
                    </div>
                    <button class="btn-next-scenario" onclick="nextScenario()">
                        <i class="ri-arrow-right-line"></i>
                        다음 시나리오
                    </button>
                </div>

                <!-- 레벨 프로그레스 -->
                <div class="training-progress">
                    <div class="progress-info">
                        <span>레벨 진행도</span>
                        <span id="progressText">3 / 10</span>
                    </div>
                    <div class="progress-bar-wrap">
                        <div class="progress-bar-fill" id="progressBarFill" style="width: 30%;"></div>
                    </div>
                    <div class="level-badges">
                        <span class="level-badge active">Bronze</span>
                        <span class="level-badge">Silver</span>
                        <span class="level-badge">Gold</span>
                        <span class="level-badge">Diamond</span>
                        <span class="level-badge">Master</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE: 탐지 규칙 -->
        <div class="page" id="page-rules">
            <div class="settings-section">
                <div class="settings-title">AI 탐지 규칙</div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">해외 발신 자동 차단</div><div class="setting-desc">중국, 동남아 등 고위험 국가 발신 통화 자동 차단</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">검찰/경찰 키워드 탐지</div><div class="setting-desc">"검찰", "경찰", "수사관" 등 키워드 실시간 탐지</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">금융 키워드 탐지</div><div class="setting-desc">"계좌", "이체", "송금" 등 금융 관련 키워드 탐지</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">음성 변조 탐지</div><div class="setting-desc">AI 합성음, 딥페이크 음성 탐지</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">VoIP 발신 경고</div><div class="setting-desc">인터넷 전화 발신 시 자동 경고</div></div><div class="toggle" onclick="this.classList.toggle('active')"></div></div>
            </div>
        </div>

        <!-- PAGE: 알림 설정 -->
        <div class="page" id="page-notifications">
            <div class="settings-section">
                <div class="settings-title">알림 설정</div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">긴급 알림 (Critical)</div><div class="setting-desc">고위험 통화 감지 시 즉시 알림</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">높음 알림 (High)</div><div class="setting-desc">의심 통화 감지 시 알림</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">소리 알림</div><div class="setting-desc">긴급 상황 시 경고음 재생</div></div><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">이메일 알림</div><div class="setting-desc">일일 리포트 및 긴급 상황 이메일 발송</div></div><div class="toggle" onclick="this.classList.toggle('active')"></div></div>
                <div class="setting-item"><div class="setting-info"><div class="setting-name">SMS 알림</div><div class="setting-desc">긴급 상황 시 SMS 발송</div></div><div class="toggle" onclick="this.classList.toggle('active')"></div></div>
            </div>
        </div>
        </div> <!-- end pages-wrapper -->
    </main>
    </div> <!-- end main-wrapper -->

    <script>
        // ===== TOSS STYLE MODAL FUNCTIONS =====
        function showModal(options) {
            const overlay = document.getElementById('modalOverlay');
            const icon = document.getElementById('modalIcon');
            const title = document.getElementById('modalTitle');
            const message = document.getElementById('modalMessage');
            const details = document.getElementById('modalDetails');
            const progress = document.getElementById('modalProgress');
            const footer = document.getElementById('modalFooter');
            
            // Reset
            details.style.display = 'none';
            progress.style.display = 'none';
            details.innerHTML = '';
            progress.innerHTML = '';
            
            // Set icon
            const iconMap = {
                success: { icon: 'ri-check-line', class: 'success' },
                danger: { icon: 'ri-error-warning-fill', class: 'danger' },
                warning: { icon: 'ri-alarm-warning-fill', class: 'warning' },
                info: { icon: 'ri-information-fill', class: 'info' },
                block: { icon: 'ri-forbid-fill', class: 'danger' },
                phone: { icon: 'ri-phone-fill', class: 'info' },
                sms: { icon: 'ri-message-3-fill', class: 'warning' },
                bank: { icon: 'ri-bank-fill', class: 'success' },
                police: { icon: 'ri-police-car-fill', class: 'info' },
                folder: { icon: 'ri-folder-add-fill', class: 'info' }
            };
            
            const iconData = iconMap[options.type] || iconMap.info;
            icon.className = 'modal-icon ' + iconData.class;
            icon.innerHTML = '<i class="' + iconData.icon + '"></i>';
            
            // Set content
            title.textContent = options.title || '알림';
            message.innerHTML = options.message || '';
            
            // Set details if provided
            if (options.details && options.details.length > 0) {
                details.style.display = 'block';
                details.innerHTML = options.details.map(d => 
                    `<div class="modal-detail-item">
                        <span class="modal-detail-label">${d.label}</span>
                        <span class="modal-detail-value">${d.value}</span>
                    </div>`
                ).join('');
            }
            
            // Set progress steps if provided
            if (options.steps && options.steps.length > 0) {
                progress.style.display = 'block';
                progress.innerHTML = `
                    <div class="progress-steps">
                        ${options.steps.map((step, i) => `
                            <div class="progress-step" id="step-${i}">
                                <div class="progress-step-icon"><i class="ri-loader-4-line"></i></div>
                                <span class="progress-step-text">${step}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                // Animate steps
                if (options.autoProgress) {
                    animateSteps(options.steps.length, options.onComplete);
                }
            }
            
            // Set footer buttons
            const btnClass = options.type === 'danger' || options.type === 'block' ? 'modal-btn-danger' : 
                           options.type === 'success' ? 'modal-btn-success' : 'modal-btn-primary';
            
            if (options.showCancel) {
                footer.innerHTML = `
                    <button class="modal-btn modal-btn-secondary" onclick="closeModal()">취소</button>
                    <button class="modal-btn ${btnClass}" onclick="${options.onConfirm || 'closeModal()'}">${options.confirmText || '확인'}</button>
                `;
            } else {
                footer.innerHTML = `<button class="modal-btn ${btnClass}" onclick="closeModal()">${options.confirmText || '확인'}</button>`;
            }
            
            overlay.classList.add('active');
        }
        
        function closeModal(event) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById('modalOverlay').classList.remove('active');
        }
        
        function animateSteps(count, onComplete) {
            let current = 0;
            
            function nextStep() {
                if (current > 0) {
                    const prevStep = document.getElementById('step-' + (current - 1));
                    if (prevStep) {
                        prevStep.classList.remove('active');
                        prevStep.classList.add('done');
                        prevStep.querySelector('.progress-step-icon').innerHTML = '<i class="ri-check-line"></i>';
                    }
                }
                
                if (current < count) {
                    const step = document.getElementById('step-' + current);
                    if (step) step.classList.add('active');
                    current++;
                    setTimeout(nextStep, 800);
                } else {
                    if (onComplete) setTimeout(onComplete, 500);
                }
            }
            
            nextStep();
        }
        
        // Toast notification
        function showToast(type, title, message) {
            const container = document.getElementById('toastContainer');
            const id = 'toast-' + Date.now();
            
            const iconMap = {
                success: 'ri-check-line',
                danger: 'ri-error-warning-fill',
                warning: 'ri-alarm-warning-fill',
                info: 'ri-information-fill'
            };
            
            const toast = document.createElement('div');
            toast.className = 'toast ' + type;
            toast.id = id;
            toast.innerHTML = `
                <div class="toast-icon"><i class="${iconMap[type] || iconMap.info}"></i></div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="removeToast('${id}')"><i class="ri-close-line"></i></button>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 10);
            setTimeout(() => removeToast(id), 5000);
        }
        
        function removeToast(id) {
            const toast = document.getElementById(id);
            if (toast) {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 400);
            }
        }
        
        // ===== ACTION HANDLERS =====
        function handleBlock() {
            showModal({
                type: 'block',
                title: '통화 즉시 차단',
                message: '해당 통화를 <strong>즉시 차단</strong>하시겠습니까?<br>차단 시 통화가 강제 종료됩니다.',
                details: [
                    { label: '발신번호', value: '010-3847-****' },
                    { label: '통화시간', value: '05:47' },
                    { label: '위험도', value: 'Critical (88점)' }
                ],
                showCancel: true,
                confirmText: '차단하기',
                onConfirm: 'executeBlock()'
            });
        }
        
        function executeBlock() {
            closeModal();
            showModal({
                type: 'danger',
                title: '통화 차단 완료',
                message: '해당 통화가 <strong>성공적으로 차단</strong>되었습니다.',
                steps: ['통화 연결 해제', '발신번호 블랙리스트 등록', '피해자 알림 발송', '케이스 자동 생성'],
                autoProgress: true,
                onComplete: () => {
                    showToast('success', '차단 완료', '통화가 성공적으로 차단되었습니다.');
                }
            });
        }
        
        function handleReport() {
            showModal({
                type: 'info',
                title: '신고 접수',
                message: '보이스피싱 신고를 <strong>금융감독원</strong>에 접수합니다.',
                details: [
                    { label: '신고 유형', value: '검찰 사칭 보이스피싱' },
                    { label: '발신번호', value: '010-3847-****' },
                    { label: '예상 피해액', value: '₩3,200만' }
                ],
                showCancel: true,
                confirmText: '신고 접수',
                onConfirm: 'executeReport()'
            });
        }
        
        function executeReport() {
            closeModal();
            showModal({
                type: 'success',
                title: '신고 접수 완료',
                message: '신고가 정상적으로 접수되었습니다.',
                details: [
                    { label: '접수번호', value: 'VP-2026-0115-0847' },
                    { label: '담당기관', value: '금융감독원' }
                ],
                confirmText: '확인'
            });
            showToast('success', '신고 접수', '금융감독원에 신고가 접수되었습니다.');
        }
        
        function handleVictimCall() {
            showModal({
                type: 'phone',
                title: '피해자 긴급 연락',
                message: '피해자에게 <strong>긴급 경고 전화</strong>를 발신합니다.',
                details: [
                    { label: '수신자', value: '김○○ (72세)' },
                    { label: '연락처', value: '010-****-5678' }
                ],
                showCancel: true,
                confirmText: '전화 발신',
                onConfirm: 'executeVictimCall()'
            });
        }
        
        function executeVictimCall() {
            closeModal();
            showToast('info', '전화 발신 중', '피해자에게 연결하고 있습니다...');
        }
        
        function handleWarningSMS() {
            showModal({
                type: 'sms',
                title: '경고 SMS 발송',
                message: '피해자에게 <strong>보이스피싱 경고 문자</strong>를 발송합니다.',
                details: [
                    { label: '수신자', value: '김○○' },
                    { label: '문자 내용', value: '[VoiceGuard] 현재 통화는 보이스피싱이 의심됩니다. 즉시 전화를 끊으세요.' }
                ],
                showCancel: true,
                confirmText: 'SMS 발송',
                onConfirm: 'executeSMS()'
            });
        }
        
        function executeSMS() {
            closeModal();
            showToast('success', 'SMS 발송 완료', '경고 문자가 발송되었습니다.');
        }
        
        function handleFamilyContact() {
            showModal({
                type: 'info',
                title: '가족 긴급 연락',
                message: '등록된 <strong>보호자</strong>에게 긴급 알림을 발송합니다.',
                details: [
                    { label: '보호자 1', value: '김철수 (아들) - 010-****-1234' },
                    { label: '보호자 2', value: '윤종후 (딸) - 010-****-5678' }
                ],
                showCancel: true,
                confirmText: '알림 발송',
                onConfirm: 'executeFamilyContact()'
            });
        }
        
        function executeFamilyContact() {
            closeModal();
            showToast('success', '가족 알림 발송', '보호자 2명에게 알림이 발송되었습니다.');
        }
        
        // 회원별 통화 시나리오 데이터
        const memberScenarios = {
            'kim': {
                name: '김○○',
                age: '72세, 여성',
                phone: '010-3847-**** (해외 VoIP)',
                riskScore: 88,
                riskLevel: 'Critical',
                duration: '05:47',
                situations: [
                    { icon: 'ri-government-fill', title: '검찰/경찰 사칭', level: 'critical', desc: '발신자가 "서울중앙지검 수사관"을 사칭하고 있습니다.' },
                    { icon: 'ri-money-dollar-circle-fill', title: '금전 이체 유도', level: 'critical', desc: '"안전계좌"로 전액 이체를 요구하고 있습니다.' },
                    { icon: 'ri-eye-off-fill', title: '비밀 유지 강요', level: 'high', desc: '가족에게 알리지 말라고 협박하고 있습니다.' },
                    { icon: 'ri-bank-card-fill', title: 'ATM 이용 유도', level: 'detected', desc: '은행 방문 대신 ATM 이용을 유도하고 있습니다.' }
                ],
                messages: [
                    { type: 'caller', text: '안녕하세요, 저는 <span class="message-highlight">서울중앙지검</span> 금융범죄수사부 김철수 수사관입니다.', time: '00:12', alert: '검찰 사칭' },
                    { type: 'victim', text: '네? 검찰이요? 무슨 일이시죠?', time: '00:18', alert: null },
                    { type: 'caller', text: '어르신 명의 <span class="message-highlight">계좌</span>가 대포통장으로 사용되어 범죄 자금 세탁에 연루되었습니다apply.', time: '00:35', alert: '계좌 언급' },
                    { type: 'victim', text: '아이고, 저는 그런 거 한 적이 없는데요...', time: '00:48', alert: null },
                    { type: 'caller', text: '걱정 마세요. 무고함을 증명하려면 예금을 <span class="message-highlight">안전계좌</span>로 이체하셔야 합니다.', time: '01:15', alert: '안전계좌 유도' },
                    { type: 'caller', text: '이 사실은 <span class="message-highlight">가족에게 절대 말씀하시면 안 됩니다</span>. 수사 보안 때문입니다.', time: '01:52', alert: '비밀 유지 강요' }
                ]
            },
            'park': {
                name: '박○○',
                age: '68세, 남성',
                phone: '02-1234-**** (일반 유선)',
                riskScore: 12,
                riskLevel: 'Safe',
                duration: '02:15',
                situations: [],
                messages: [
                    { type: 'caller', text: '안녕하세요, 박○○ 고객님. 국민은행 OO지점입니다.', time: '00:05', alert: null },
                    { type: 'victim', text: '네, 안녕하세요.', time: '00:08', alert: null },
                    { type: 'caller', text: '예금 만기 안내 드리려고 연락드렸습니다. 다음 주 월요일에 만기 예정이신데요.', time: '00:15', alert: null },
                    { type: 'victim', text: '아, 네. 그럼 자동으로 연장해 주세요.', time: '00:25', alert: null },
                    { type: 'caller', text: '네, 알겠습니다. 현재 금리 그대로 연장 처리해 드리겠습니다. 감사합니다.', time: '00:35', alert: null }
                ]
            },
            'lee': {
                name: '이○○',
                age: '75세, 여성',
                phone: '1899-XXXX (대출 사칭)',
                riskScore: 72,
                riskLevel: 'Warning',
                duration: '08:32',
                situations: [
                    { icon: 'ri-bank-fill', title: '대환대출 사기', level: 'high', desc: '저금리 대환대출을 미끼로 선입금을 요구하고 있습니다.' },
                    { icon: 'ri-money-dollar-box-fill', title: '선입금 요구', level: 'critical', desc: '"신용등급 상향비용" 명목으로 200만원 입금을 유도합니다.' },
                    { icon: 'ri-government-fill', title: '정부지원 사칭', level: 'high', desc: '정부지원 저금리 대출이라며 신뢰를 유도합니다.' }
                ],
                messages: [
                    { type: 'caller', text: '안녕하세요, ○○캐피탈입니다. <span class="message-highlight">정부지원 저금리 대환대출</span> 대상자로 선정되셨습니다.', time: '00:10', alert: '정부지원 사칭' },
                    { type: 'victim', text: '정부지원이요? 저도 받을 수 있나요?', time: '00:22', alert: null },
                    { type: 'caller', text: '네, 어르신. 기존 고금리 대출을 <span class="message-highlight">연 3.9%</span>로 갈아타실 수 있습니다.', time: '00:35', alert: '저금리 미끼' },
                    { type: 'victim', text: '와, 그게 가능해요? 지금 이자가 너무 높아서 힘들었는데...', time: '00:50', alert: null },
                    { type: 'caller', text: '대출 실행을 위해 먼저 <span class="message-highlight">신용등급 상향 비용 200만원</span>을 입금해 주셔야 합니다.', time: '01:15', alert: '선입금 요구' },
                    { type: 'victim', text: '200만원이요? 좀 많은데... 꼭 내야 하나요?', time: '01:30', alert: null },
                    { type: 'caller', text: '이건 정부에서 정한 절차입니다. 대출 실행되면 <span class="message-highlight">바로 환급</span>됩니다.', time: '01:45', alert: '환급 거짓말' }
                ]
            },
            'choi': {
                name: '최○○',
                age: '69세, 남성',
                phone: '010-5555-**** (일반)',
                riskScore: 8,
                riskLevel: 'Safe',
                duration: '01:30',
                situations: [],
                messages: [
                    { type: 'caller', text: '아버지, 저예요. 잘 지내셨어요?', time: '00:05', alert: null },
                    { type: 'victim', text: '오, 철수야! 그래, 잘 있지. 너는?', time: '00:12', alert: null },
                    { type: 'caller', text: '네, 저도 잘 지내요. 이번 주말에 찾아뵐게요.', time: '00:20', alert: null },
                    { type: 'victim', text: '그래, 그래. 손주들도 데려오고.', time: '00:28', alert: null },
                    { type: 'caller', text: '네, 알겠어요. 그럼 주말에 뵐게요!', time: '00:35', alert: null }
                ]
            },
            'jung': {
                name: '정○○',
                age: '71세, 여성',
                phone: '1588-XXXX (은행)',
                riskScore: 15,
                riskLevel: 'Safe',
                duration: '03:20',
                situations: [],
                messages: [
                    { type: 'caller', text: '안녕하세요, 신한은행입니다. 카드 재발급 관련해서 연락드렸습니다.', time: '00:08', alert: null },
                    { type: 'victim', text: '네, 제가 신청한 건가요?', time: '00:15', alert: null },
                    { type: 'caller', text: '네, 고객님. 신용카드 갱신 시기가 되어서요. 기존 주소로 배송해도 될까요?', time: '00:25', alert: null },
                    { type: 'victim', text: '네, 기존 주소 그대로 보내주세요.', time: '00:35', alert: null },
                    { type: 'caller', text: '알겠습니다. 7일 이내 수령하실 수 있습니다. 감사합니다.', time: '00:45', alert: null }
                ]
            },
            'han': {
                name: '한○○',
                age: '65세, 남성',
                phone: '010-9999-**** (자녀 사칭)',
                riskScore: 95,
                riskLevel: 'Critical',
                duration: '04:15',
                situations: [
                    { icon: 'ri-user-heart-fill', title: '자녀 사칭', level: 'critical', desc: '아들을 사칭하여 긴급 송금을 요구하고 있습니다.' },
                    { icon: 'ri-gift-fill', title: '문화상품권 요구', level: 'critical', desc: '문화상품권 PIN 번호를 요구하고 있습니다.' },
                    { icon: 'ri-smartphone-fill', title: '폰 고장 핑계', level: 'high', desc: '다른 번호로 연락하는 이유를 폰 고장이라고 둘러댑니다.' }
                ],
                messages: [
                    { type: 'caller', text: '아빠, 나야 민수!', time: '00:05', alert: '자녀 사칭' },
                    { type: 'victim', text: '민수야? 이 번호는 뭐야?', time: '00:10', alert: null },
                    { type: 'caller', text: '폰이 고장나서 <span class="message-highlight">친구 폰으로 전화</span>했어. 카톡도 안 돼.', time: '00:18', alert: '폰 고장 핑계' },
                    { type: 'victim', text: '그래? 폰이 왜 그래. 새로 사야겠네.', time: '00:28', alert: null },
                    { type: 'caller', text: '아빠, 나 지금 급해서 그러는데... <span class="message-highlight">문화상품권 50만원</span>어치만 사서 핀번호 좀 보내줘!', time: '00:42', alert: '문화상품권 요구' },
                    { type: 'victim', text: '문화상품권? 갑자기 왜?', time: '00:52', alert: null },
                    { type: 'caller', text: '친구가 급하게 필요하대. 나중에 <span class="message-highlight">바로 갚을게</span>! 제발 부탁이야!!', time: '01:05', alert: '긴급성 강조' },
                    { type: 'victim', text: '알겠어, 알겠어. 편의점 가서 사면 되나?', time: '01:18', alert: null },
                    { type: 'caller', text: '응! <span class="message-highlight">빨리</span> 사서 사진 찍어서 카톡 말고 문자로 보내줘!', time: '01:30', alert: '재촉' }
                ]
            }
        };

        // 통화 내역 선택
        function selectCallHistory(element) {
            // Remove active from all items
            document.querySelectorAll('.call-history-item').forEach(item => {
                item.classList.remove('active');
            });
            // Add active to clicked item
            element.classList.add('active');
            
            // Get member ID from element
            const memberId = element.dataset.member;
            const scenario = memberScenarios[memberId];
            
            if (!scenario) return;
            
            // Update call info header
            document.querySelector('.call-info-header').innerHTML = `
                <div class="call-info-row">
                    <span class="call-label">발신번호</span>
                    <span class="call-value ${scenario.riskLevel === 'Critical' ? 'danger' : ''}">${scenario.phone}</span>
                </div>
                <div class="call-info-row">
                    <span class="call-label">수신자</span>
                    <span class="call-value">${scenario.name} (${scenario.age})</span>
                </div>
                <div class="call-info-row">
                    <span class="call-label">위험도</span>
                    <span class="risk-badge ${scenario.riskLevel.toLowerCase()}"><i class="ri-${scenario.riskLevel === 'Safe' ? 'shield-check' : 'error-warning'}-fill"></i> ${scenario.riskLevel} - ${scenario.riskScore}점</span>
                </div>
            `;
            
            // Update duration
            document.getElementById('callDuration').textContent = scenario.duration;
            
            // Update live indicator
            const liveIndicator = document.querySelector('.live-indicator');
            if (scenario.riskLevel === 'Safe') {
                liveIndicator.innerHTML = '<span class="live-dot safe"></span> 정상 통화';
                liveIndicator.style.color = 'var(--primary)';
            } else {
                liveIndicator.innerHTML = '<span class="live-dot"></span> 통화 중';
                liveIndicator.style.color = '';
            }
            
            // Update conversation
            const conversationList = document.getElementById('conversationList');
            conversationList.innerHTML = scenario.messages.map(msg => `
                <div class="message ${msg.type}">
                    <div class="message-avatar ${msg.type}-avatar">
                        <i class="ri-${msg.type === 'caller' ? 'spy' : 'user-heart'}-fill"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-bubble">${msg.text}</div>
                        <div class="message-meta">
                            <span>${msg.time}</span>
                            ${msg.alert ? `<span class="keyword-alert"><i class="ri-alert-fill"></i> ${msg.alert}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Update situations
            const situationsContainer = document.querySelector('.action-section:first-child');
            if (scenario.situations.length > 0) {
                situationsContainer.innerHTML = `
                    <div class="section-header"><i class="ri-error-warning-line"></i> 탐지된 위험 상황</div>
                    ${scenario.situations.map(sit => `
                        <div class="situation-card active">
                            <div class="situation-header">
                                <div class="situation-title"><i class="${sit.icon}"></i> ${sit.title}</div>
                                <span class="situation-badge ${sit.level}">${sit.level === 'critical' ? 'Critical' : sit.level === 'high' ? 'High' : '탐지됨'}</span>
                            </div>
                            <div class="situation-desc">${sit.desc}</div>
                        </div>
                    `).join('')}
                `;
            } else {
                situationsContainer.innerHTML = `
                    <div class="section-header"><i class="ri-shield-check-line"></i> 통화 상태</div>
                    <div class="situation-card safe-card">
                        <div class="situation-header">
                            <div class="situation-title"><i class="ri-shield-check-fill"></i> 정상 통화</div>
                            <span class="situation-badge safe">Safe</span>
                        </div>
                        <div class="situation-desc">이 통화에서 보이스피싱 패턴이 감지되지 않았습니다. AI가 지속적으로 모니터링 중입니다.</div>
                    </div>
                `;
            }
            
            // Show toast
            if (scenario.riskLevel === 'Critical') {
                showToast('warning', '위험 통화 감지', `${scenario.name} 회원님의 통화에서 보이스피싱이 감지되었습니다.`);
            } else if (scenario.riskLevel === 'Warning') {
                showToast('info', '주의 필요', `${scenario.name} 회원님의 통화를 모니터링 중입니다.`);
            } else {
                showToast('success', '안전한 통화', `${scenario.name} 회원님의 통화는 정상입니다.`);
            }
        }
        
        function handleBankFreeze() {
            showModal({
                type: 'bank',
                title: '은행 계좌 동결',
                message: '관할 은행에 <strong>계좌 출금 정지</strong>를 요청합니다.',
                details: [
                    { label: '예금주', value: '김○○' },
                    { label: '은행', value: '국민은행' },
                    { label: '계좌', value: '****-**-******' }
                ],
                showCancel: true,
                confirmText: '동결 요청',
                onConfirm: 'executeBankFreeze()'
            });
        }
        
        function executeBankFreeze() {
            closeModal();
            showModal({
                type: 'success',
                title: '계좌 동결 요청 완료',
                message: '은행에 계좌 동결이 요청되었습니다.',
                steps: ['은행 시스템 연동', '계좌 동결 요청', '확인 대기 중'],
                autoProgress: true,
                onComplete: () => showToast('success', '계좌 동결', '계좌가 임시 동결되었습니다.')
            });
        }
        
        function handlePoliceReport() {
            showModal({
                type: 'police',
                title: '경찰 신고',
                message: '<strong>경찰청 사이버수사대</strong>에 자동으로 신고합니다.',
                details: [
                    { label: '신고 유형', value: '보이스피싱' },
                    { label: '관할서', value: '서울경찰청' }
                ],
                showCancel: true,
                confirmText: '112 신고',
                onConfirm: 'executePoliceReport()'
            });
        }
        
        function executePoliceReport() {
            closeModal();
            showToast('info', '경찰 신고', '112에 사건이 접수되었습니다.');
        }
        
        function handleFSSReport() {
            showModal({
                type: 'info',
                title: '금감원 신고',
                message: '<strong>금융감독원</strong>에 사기 피해를 접수합니다.',
                showCancel: true,
                confirmText: '신고 접수',
                onConfirm: 'executeFSSReport()'
            });
        }
        
        function executeFSSReport() {
            closeModal();
            showToast('success', '금감원 신고', '금융감독원에 접수되었습니다.');
        }
        
        function handleCaseRegister() {
            showModal({
                type: 'folder',
                title: '케이스 등록',
                message: '현재 건을 <strong>케이스로 등록</strong>합니다.',
                details: [
                    { label: '케이스 ID', value: 'CASE-2026-0116' },
                    { label: '유형', value: '검찰 사칭 보이스피싱' },
                    { label: '담당자', value: '자동 배정' }
                ],
                showCancel: true,
                confirmText: '등록',
                onConfirm: 'executeCaseRegister()'
            });
        }
        
        function executeCaseRegister() {
            closeModal();
            showToast('success', '케이스 등록', 'CASE-2026-0116이 등록되었습니다.');
        }
        
        function handleAllActions() {
            showModal({
                type: 'danger',
                title: '원클릭 전체 조치',
                message: '다음 <strong>모든 긴급 조치</strong>를 동시에 실행합니다.',
                steps: ['통화 즉시 차단', '피해자 경고 SMS 발송', '가족 긴급 연락', '계좌 동결 요청'],
                showCancel: true,
                confirmText: '전체 실행',
                onConfirm: 'executeAllActions()'
            });
        }
        
        function executeAllActions() {
            closeModal();
            showModal({
                type: 'danger',
                title: '긴급 조치 실행 중',
                message: '모든 긴급 조치를 실행하고 있습니다...',
                steps: ['통화 즉시 차단', '피해자 경고 SMS 발송', '가족 긴급 연락', '계좌 동결 요청'],
                autoProgress: true,
                onComplete: () => {
                    closeModal();
                    showModal({
                        type: 'success',
                        title: '전체 조치 완료',
                        message: '모든 긴급 조치가 <strong>성공적으로 완료</strong>되었습니다.',
                        details: [
                            { label: '통화 차단', value: '완료' },
                            { label: 'SMS 발송', value: '완료' },
                            { label: '가족 연락', value: '완료' },
                            { label: '계좌 동결', value: '요청됨' }
                        ],
                        confirmText: '확인'
                    });
                }
            });
        }
        
        function handleWarningBroadcast() {
            showModal({
                type: 'warning',
                title: '경고 음성 송출',
                message: '통화에 <strong>보이스피싱 경고 음성</strong>을 송출합니다.',
                showCancel: true,
                confirmText: '송출',
                onConfirm: 'executeWarningBroadcast()'
            });
        }
        
        function executeWarningBroadcast() {
            closeModal();
            showToast('warning', '경고 송출', '경고 음성이 재생되고 있습니다.');
        }

        // Splash Screen with animated progress
        window.addEventListener('load', function() {
            const progressBar = document.getElementById('splashProgressBar');
            const progressText = document.getElementById('splashProgressText');
            const loaderText = document.getElementById('splashLoaderText');
            
            const loadingSteps = [
                { progress: 15, text: '시스템을 초기화하고 있습니다...' },
                { progress: 35, text: 'AI 엔진을 로딩하고 있습니다...' },
                { progress: 55, text: '보안 모듈을 연결하고 있습니다...' },
                { progress: 75, text: '실시간 데이터를 동기화하고 있습니다...' },
                { progress: 90, text: '관제 시스템을 준비하고 있습니다...' },
                { progress: 100, text: '완료!' }
            ];
            
            let currentStep = 0;
            let currentProgress = 0;
            
            function updateProgress() {
                if (currentStep >= loadingSteps.length) {
                    // Complete - hide splash
                    setTimeout(function() {
                        const splash = document.getElementById('splashScreen');
                        const mainWrapper = document.getElementById('mainWrapper');
                        
                        splash.classList.add('hidden');
                        mainWrapper.classList.add('visible');
                        
                        setTimeout(function() {
                            splash.style.display = 'none';
                        }, 800);
                    }, 300);
                    return;
                }
                
                const step = loadingSteps[currentStep];
                const targetProgress = step.progress;
                
                // Update text
                loaderText.textContent = step.text;
                
                // Animate progress
                const progressInterval = setInterval(function() {
                    if (currentProgress < targetProgress) {
                        currentProgress++;
                        progressBar.style.width = currentProgress + '%';
                        progressText.textContent = currentProgress + '%';
                    } else {
                        clearInterval(progressInterval);
                        currentStep++;
                        setTimeout(updateProgress, 200);
                    }
                }, 20);
            }
            
            // Start progress animation after a brief delay
            setTimeout(updateProgress, 300);
        });

    
        // Page titles
        const pageTitles = {
            'realtime': '실시간 통화 관제',
            'alerts': '위협 알림',
            'dashboard': '대시보드',
            'analysis': '보이스피싱 분석',
            'reports': '통계 리포트',
            'cases': '케이스 관리',
            'customers': '고객 리스트',
            'training': '피싱 방어 훈련',
            'rules': '탐지 규칙',
            'notifications': '알림 설정'
        };

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const pageId = item.dataset.page;
                const currentPage = document.querySelector('.page.active');
                const nextPage = document.getElementById('page-' + pageId);
                
                // Skip if same page
                if (currentPage === nextPage) return;
                
                // Update nav
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                // Page transition with fade effect
                if (currentPage) {
                    currentPage.style.opacity = '0';
                    currentPage.style.transform = 'translateY(15px)';
                    
                    setTimeout(() => {
                        currentPage.classList.remove('active');
                        currentPage.style.opacity = '';
                        currentPage.style.transform = '';
                        
                        nextPage.classList.add('active');
                        nextPage.style.opacity = '0';
                        nextPage.style.transform = 'translateY(15px)';
                        
                        // Trigger reflow then animate in
                        requestAnimationFrame(() => {
                            nextPage.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                            nextPage.style.opacity = '1';
                            nextPage.style.transform = 'translateY(0)';
                        });
                        
                        // Update title
                        document.getElementById('pageTitle').textContent = pageTitles[pageId];
                        
                        // Initialize charts if needed
                        if (pageId === 'dashboard') initDashboardCharts();
                        if (pageId === 'reports') initReportCharts();
                    }, 200);
                } else {
                    nextPage.classList.add('active');
                    document.getElementById('pageTitle').textContent = pageTitles[pageId];
                    if (pageId === 'dashboard') initDashboardCharts();
                    if (pageId === 'reports') initReportCharts();
                }
            });
        });

        // Update datetime
        function updateDateTime() {
            const now = new Date();
            const days = ['일', '월', '화', '수', '목', '금', '토'];
            document.getElementById('currentDate').textContent = `${now.getFullYear()}년 ${String(now.getMonth()+1).padStart(2,'0')}월 ${String(now.getDate()).padStart(2,'0')}일 (${days[now.getDay()]})`;
            document.getElementById('currentTime').textContent = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        // 실시간 음성 변환 시뮬레이션
        const transcriptPhrases = [
            { text: "가족에게는 절대 말씀하시면 안 됩니다.", keywords: ["가족", "비밀"] },
            { text: "지금 바로 ATM으로 가주셔야 합니다.", keywords: ["ATM", "긴급"] },
            { text: "수사 보안 유지를 위해 협조해 주세요.", keywords: ["수사", "보안"] },
            { text: "안전한 계좌로 보호조치 해드리겠습니다.", keywords: ["안전계좌", "보호"] },
            { text: "피해자 보호 프로그램을 진행합니다.", keywords: ["피해자", "보호"] },
            { text: "검찰청 보이스피싱 대응팀입니다.", keywords: ["검찰청", "보이스피싱"] },
            { text: "금융거래 내역을 확인 중입니다.", keywords: ["금융", "거래"] },
            { text: "범죄 연루 혐의가 있습니다.", keywords: ["범죄", "혐의"] },
        ];
        
        let transcriptTime = 320; // 시작 시간 (초)
        
        function addTranscript() {
            const list = document.getElementById('transcriptList');
            if (!list) return;
            
            const phrase = transcriptPhrases[Math.floor(Math.random() * transcriptPhrases.length)];
            transcriptTime += Math.floor(Math.random() * 20) + 10;
            
            const mins = String(Math.floor(transcriptTime / 60)).padStart(2, '0');
            const secs = String(transcriptTime % 60).padStart(2, '0');
            
            // 이전 new 클래스 제거
            list.querySelectorAll('.transcript-item-live.new').forEach(el => el.classList.remove('new'));
            
            // typing indicator 찾기
            const typing = list.querySelector('.transcript-typing');
            
            // 새 항목 생성
            const newItem = document.createElement('div');
            newItem.className = 'transcript-item-live new';
            
            let textWithHighlight = phrase.text;
            phrase.keywords.forEach(kw => {
                textWithHighlight = textWithHighlight.replace(kw, `<span class="highlight">${kw}</span>`);
            });
            
            newItem.innerHTML = `<span class="transcript-time">${mins}:${secs}</span><p class="transcript-text">${textWithHighlight}</p>`;
            
            // typing 앞에 삽입
            if (typing) {
                list.insertBefore(newItem, typing);
            } else {
                list.appendChild(newItem);
            }
            
            // 스크롤 맨 아래로
            list.scrollTop = list.scrollHeight;
        }
        
        // 5~8초마다 새 텍스트 추가
        setInterval(addTranscript, Math.random() * 3000 + 5000);

        // 보이스피싱 분석 페이지 - 통화 시간 업데이트
        let analysisCallTime = 347; // 5:47 시작
        setInterval(() => {
            analysisCallTime++;
            const mins = String(Math.floor(analysisCallTime / 60)).padStart(2, '0');
            const secs = String(analysisCallTime % 60).padStart(2, '0');
            const durationEl = document.getElementById('callDuration');
            if (durationEl) durationEl.textContent = `${mins}:${secs}`;
        }, 1000);

        // 보이스피싱 분석 페이지 - 대화 자동 추가
        const analysisMessages = [
            { type: 'caller', text: '지금 바로 가까운 <span class="message-highlight">ATM</span>으로 가주세요. 제가 알려드리는 대로 따라하시면 됩니다.', alert: 'ATM 유도' },
            { type: 'victim', text: '네, 알겠습니다. 근처에 편의점 ATM이 있어요.', alert: null },
            { type: 'caller', text: '좋습니다. 절대 <span class="message-highlight">주변 사람에게 말씀하시면 안 됩니다</span>. 수사 보안입니다.', alert: '비밀 유지 강요' },
            { type: 'caller', text: '계좌번호를 불러드릴게요. <span class="message-highlight">352-0812-****-63</span>입니다.', alert: '계좌번호 제시' },
        ];
        let msgIndex = 0;
        
        function addAnalysisMessage() {
            const container = document.getElementById('conversationList');
            if (!container || msgIndex >= analysisMessages.length) return;
            
            const msg = analysisMessages[msgIndex];
            const mins = String(Math.floor(analysisCallTime / 60)).padStart(2, '0');
            const secs = String(analysisCallTime % 60).padStart(2, '0');
            
            const div = document.createElement('div');
            div.className = `message ${msg.type}`;
            
            const avatarClass = msg.type === 'caller' ? 'caller-avatar' : 'victim-avatar';
            const avatarIcon = msg.type === 'caller' ? 'ri-spy-fill' : 'ri-user-heart-fill';
            const alertHtml = msg.alert ? `<span class="keyword-alert"><i class="ri-alert-fill"></i> ${msg.alert}</span>` : '';
            
            div.innerHTML = `
                <div class="message-avatar ${avatarClass}"><i class="${avatarIcon}"></i></div>
                <div class="message-content">
                    <div class="message-bubble">${msg.text}</div>
                    <div class="message-meta">
                        <span>${mins}:${secs}</span>
                        ${alertHtml}
                    </div>
                </div>
            `;
            
            container.appendChild(div);
            container.parentElement.scrollTop = container.parentElement.scrollHeight;
            msgIndex++;
        }
        
        setInterval(addAnalysisMessage, 8000);

        // Header Dropdowns
        function toggleNotifDropdown() {
            const dropdown = document.getElementById('notifDropdown');
            const settingsDropdown = document.getElementById('settingsDropdown');
            
            // 다른 드롭다운 닫기
            settingsDropdown.classList.remove('show');
            
            dropdown.classList.toggle('show');
        }
        
        function toggleSettingsDropdown() {
            const dropdown = document.getElementById('settingsDropdown');
            const notifDropdown = document.getElementById('notifDropdown');
            
            // 다른 드롭다운 닫기
            notifDropdown.classList.remove('show');
            
            dropdown.classList.toggle('show');
        }
        
        // 외부 클릭 시 드롭다운 닫기
        document.addEventListener('click', (e) => {
            const notifWrapper = document.querySelector('.header-btn-wrapper:has(#notifBtn)');
            const settingsWrapper = document.querySelector('.header-btn-wrapper:has(#settingsBtn)');
            
            if (notifWrapper && !notifWrapper.contains(e.target)) {
                document.getElementById('notifDropdown')?.classList.remove('show');
            }
            if (settingsWrapper && !settingsWrapper.contains(e.target)) {
                document.getElementById('settingsDropdown')?.classList.remove('show');
            }
        });
        
        function goToAlert() {
            // 드롭다운 닫기
            document.getElementById('notifDropdown').classList.remove('show');
            
            // 위협 알림 페이지로 이동
            const alertNavItem = document.querySelector('[data-page="alerts"]');
            if (alertNavItem) {
                alertNavItem.click();
            }
        }
        
        function goToAlertPage() {
            document.getElementById('notifDropdown').classList.remove('show');
            const alertNavItem = document.querySelector('[data-page="alerts"]');
            if (alertNavItem) {
                alertNavItem.click();
            }
        }
        
        function goToSettingsPage() {
            document.getElementById('settingsDropdown').classList.remove('show');
            const rulesNavItem = document.querySelector('[data-page="rules"]');
            if (rulesNavItem) {
                rulesNavItem.click();
            }
        }

        // Global Search
        let searchTimeout;
        function handleGlobalSearch(value) {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                if (value.length >= 2) {
                    highlightSearchResults(value);
                } else {
                    clearSearchHighlights();
                }
            }, 300);
        }
        
        function executeSearch() {
            const value = document.getElementById('globalSearch').value.trim();
            if (!value) {
                showToast('warning', '검색어 입력', '검색어를 입력해주세요.');
                return;
            }
            
            // 검색 결과 모달
            const results = findSearchResults(value);
            
            showModal({
                type: 'info',
                title: '검색 결과',
                message: `<strong>"${value}"</strong> 검색 결과: <strong>${results.length}건</strong>`,
                details: results.slice(0, 5).map((r, i) => ({
                    label: `${i + 1}. ${r.type}`,
                    value: r.content
                })),
                confirmText: '확인'
            });
        }
        
        function findSearchResults(query) {
            const results = [];
            const q = query.toLowerCase();
            
            // 테이블에서 검색
            document.querySelectorAll('table tbody tr').forEach(row => {
                if (row.textContent.toLowerCase().includes(q)) {
                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 2) {
                        results.push({
                            type: '위협 탐지',
                            content: cells[1]?.textContent?.trim() || '발신번호'
                        });
                    }
                }
            });
            
            // 알림 목록에서 검색
            document.querySelectorAll('.alert-item').forEach(item => {
                if (item.textContent.toLowerCase().includes(q)) {
                    const title = item.querySelector('.alert-title')?.textContent || '';
                    results.push({
                        type: '알림',
                        content: title
                    });
                }
            });
            
            return results;
        }
        
        function highlightSearchResults(query) {
            clearSearchHighlights();
            const q = query.toLowerCase();
            
            // 테이블 행 하이라이트
            document.querySelectorAll('table tbody tr').forEach(row => {
                if (row.textContent.toLowerCase().includes(q)) {
                    row.style.background = 'rgba(74, 144, 226, 0.1)';
                    row.style.boxShadow = 'inset 0 0 0 1px var(--primary)';
                }
            });
            
            // 알림 아이템 하이라이트
            document.querySelectorAll('.alert-item').forEach(item => {
                if (item.textContent.toLowerCase().includes(q)) {
                    item.style.background = 'rgba(74, 144, 226, 0.1)';
                    item.style.boxShadow = 'inset 0 0 0 1px var(--primary)';
                }
            });
        }
        
        function clearSearchHighlights() {
            document.querySelectorAll('table tbody tr').forEach(row => {
                row.style.background = '';
                row.style.boxShadow = '';
            });
            document.querySelectorAll('.alert-item').forEach(item => {
                if (!item.classList.contains('critical')) {
                    item.style.background = '';
                }
                item.style.boxShadow = '';
            });
        }
        
        // Calendar
        let currentYear = 2026;
        let currentMonth = 0; // 0 = January
        let selectedDate = new Date(2026, 0, 15);
        
        function toggleCalendar() {
            const dropdown = document.getElementById('calendarDropdown');
            const btn = document.getElementById('datePickerBtn');
            
            if (dropdown.classList.contains('show')) {
                dropdown.classList.remove('show');
                btn.classList.remove('active');
            } else {
                dropdown.classList.add('show');
                btn.classList.add('active');
                renderCalendar();
            }
        }
        
        // 외부 클릭 시 닫기
        document.addEventListener('click', (e) => {
            const wrapper = document.querySelector('.date-picker-wrapper');
            if (wrapper && !wrapper.contains(e.target)) {
                document.getElementById('calendarDropdown')?.classList.remove('show');
                document.getElementById('datePickerBtn')?.classList.remove('active');
            }
        });
        
        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar();
        }
        
        function renderCalendar() {
            const months = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];
            document.getElementById('calendarTitle').textContent = `${currentYear}년 ${months[currentMonth]}`;
            
            const grid = document.getElementById('calendarGrid');
            // 요일 헤더 유지, 날짜만 제거
            const headers = grid.querySelectorAll('.calendar-day-header');
            grid.innerHTML = '';
            headers.forEach(h => grid.appendChild(h));
            
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();
            
            const today = new Date();
            
            // 이전 달 날짜
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = daysInPrevMonth - i;
                grid.appendChild(day);
            }
            
            // 현재 달 날짜
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                const thisDate = new Date(currentYear, currentMonth, i);
                
                if (thisDate.toDateString() === today.toDateString()) {
                    day.classList.add('today');
                }
                
                if (thisDate.toDateString() === selectedDate.toDateString()) {
                    day.classList.add('selected');
                }
                
                day.onclick = () => selectDate(i);
                grid.appendChild(day);
            }
            
            // 다음 달 날짜 (6줄 채우기)
            const totalCells = grid.children.length;
            const remaining = 49 - totalCells; // 7 headers + 42 days
            for (let i = 1; i <= remaining && totalCells + i <= 49; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = i;
                grid.appendChild(day);
            }
        }
        
        function selectDate(day) {
            selectedDate = new Date(currentYear, currentMonth, day);
            const formatted = `${currentYear}.${String(currentMonth + 1).padStart(2, '0')}.${String(day).padStart(2, '0')}`;
            
            document.getElementById('selectedDateDisplay').textContent = formatted;
            document.getElementById('calendarDropdown').classList.remove('show');
            document.getElementById('datePickerBtn').classList.remove('active');
            
            showToast('info', '날짜 변경', `${formatted} 데이터를 조회합니다.`);
            simulateDateChange(formatted);
        }
        
        function selectQuickDate(type) {
            const today = new Date(2026, 0, 15); // 시뮬레이션용
            let date;
            
            if (type === 'today') {
                date = today;
            } else if (type === 'yesterday') {
                date = new Date(today);
                date.setDate(date.getDate() - 1);
            } else if (type === 'week') {
                date = new Date(today);
                date.setDate(date.getDate() - date.getDay()); // 이번 주 일요일
            }
            
            currentYear = date.getFullYear();
            currentMonth = date.getMonth();
            selectedDate = date;
            
            const formatted = `${currentYear}.${String(currentMonth + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
            document.getElementById('selectedDateDisplay').textContent = formatted;
            document.getElementById('calendarDropdown').classList.remove('show');
            document.getElementById('datePickerBtn').classList.remove('active');
            
            showToast('info', '날짜 변경', `${formatted} 데이터를 조회합니다.`);
            simulateDateChange(formatted);
        }
        
        function simulateDateChange(date) {
            const cards = document.querySelectorAll('.stat-value');
            cards.forEach(card => {
                card.style.opacity = '0.5';
                card.style.transition = 'opacity 0.2s';
            });
            
            setTimeout(() => {
                cards.forEach(card => {
                    card.style.opacity = '1';
                    if (card.textContent.includes(',')) {
                        const base = parseInt(card.textContent.replace(/,/g, ''));
                        const newVal = base + Math.floor(Math.random() * 100) - 50;
                        card.textContent = newVal.toLocaleString();
                    }
                });
                showToast('success', '데이터 조회 완료', `${date} 데이터가 로드되었습니다.`);
            }, 500);
        }

        // Alert Detail
        function showAlertDetail(title, phone, location, time, reason, result) {
            showModal({
                type: 'info',
                title: '알림 상세 정보',
                message: `<strong>${title}</strong> 처리 완료`,
                details: [
                    { label: '발신번호', value: phone },
                    { label: '발신지', value: location },
                    { label: '탐지시간', value: time },
                    { label: '탐지사유', value: reason },
                    { label: '처리결과', value: result }
                ],
                confirmText: '확인'
            });
        }

        // Alert Process (처리 버튼)
        function handleAlertProcess(btn, title, phone) {
            showModal({
                type: 'danger',
                title: '알림 처리',
                message: `<strong>${title}</strong><br>해당 알림을 처리하시겠습니까?`,
                details: [
                    { label: '발신번호', value: phone },
                    { label: '처리방법', value: '차단 및 신고' }
                ],
                showCancel: true,
                confirmText: '처리하기',
                onConfirm: `executeAlertProcess(this)`
            });
            
            // 버튼 참조 저장
            window.currentAlertBtn = btn;
        }
        
        function executeAlertProcess() {
            closeModal();
            
            // 버튼의 부모 alert-item 찾기
            const btn = window.currentAlertBtn;
            if (btn) {
                const alertItem = btn.closest('.alert-item');
                if (alertItem) {
                    // 상태 변경
                    alertItem.dataset.status = 'done';
                    alertItem.classList.remove('critical');
                    
                    // 상태 배지 변경
                    const statusBadge = alertItem.querySelector('.status-badge');
                    statusBadge.className = 'status-badge done';
                    statusBadge.textContent = '처리완료';
                    
                    // 버튼 변경
                    btn.className = 'btn btn-secondary';
                    btn.style.padding = '10px 20px';
                    btn.textContent = '상세';
                    btn.onclick = () => showAlertDetail('처리된 알림', '발신번호', '발신지', '시간', '처리됨', '차단 완료');
                }
            }
            
            showToast('success', '처리 완료', '알림이 처리되었습니다.');
        }

        // Alert Filter
        function filterAlerts(filter, btn) {
            // Update active button
            document.querySelectorAll('#alertFilterBtns .card-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Filter items
            const items = document.querySelectorAll('#alertList .alert-item');
            let visibleIndex = 1;
            
            items.forEach(item => {
                const status = item.dataset.status;
                let show = false;
                
                if (filter === 'all') {
                    show = true;
                } else if (filter === 'pending' && status === 'pending') {
                    show = true;
                } else if (filter === 'done' && status === 'done') {
                    show = true;
                }
                
                if (show) {
                    item.style.display = 'flex';
                    // Update numbering
                    item.querySelector('.alert-number').textContent = String(visibleIndex).padStart(2, '0');
                    visibleIndex++;
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Live count
        setInterval(() => {
            const el = document.getElementById('liveCount');
            if (el) {
                const current = parseInt(el.textContent.replace(',', ''));
                el.textContent = (current + Math.floor(Math.random() * 5) - 2).toLocaleString();
            }
        }, 3000);

        // AI 위협 분석 실시간 업데이트
        const aiFactors = {
            voice: { el: 'factorVoice', bar: 'factorVoiceBar', value: 23, max: 50 },
            keyword: { el: 'factorKeyword', bar: 'factorKeywordBar', value: 47, max: 80 },
            location: { el: 'factorLocation', bar: 'factorLocationBar', value: 12, max: 30 },
            pattern: { el: 'factorPattern', bar: 'factorPatternBar', value: 8, max: 25 }
        };

        function updateAIFactors() {
            Object.keys(aiFactors).forEach(key => {
                const factor = aiFactors[key];
                const el = document.getElementById(factor.el);
                const bar = document.getElementById(factor.bar);
                
                if (el && bar) {
                    // 랜덤하게 증가 (가끔 감소도)
                    const change = Math.random() > 0.3 ? Math.floor(Math.random() * 3) + 1 : -1;
                    factor.value = Math.max(0, Math.min(factor.max, factor.value + change));
                    
                    // 숫자 애니메이션
                    el.style.transform = 'scale(1.2)';
                    el.style.color = '#3182F6';
                    el.textContent = factor.value;
                    
                    setTimeout(() => {
                        el.style.transform = 'scale(1)';
                        el.style.color = '';
                    }, 200);
                    
                    // 바 업데이트
                    const percentage = (factor.value / factor.max) * 100;
                    bar.style.width = percentage + '%';
                }
            });
        }

        // 2~4초마다 랜덤 업데이트
        setInterval(updateAIFactors, 2500);
        
        // Risk Score 실시간 업데이트
        let riskScore = 88;
        setInterval(() => {
            const scoreEl = document.querySelector('.score-number');
            if (scoreEl) {
                const change = Math.random() > 0.5 ? 1 : -1;
                riskScore = Math.max(75, Math.min(99, riskScore + change));
                scoreEl.textContent = riskScore;
                
                // 색상 변화
                if (riskScore >= 90) {
                    scoreEl.style.color = '#E54545';
                } else if (riskScore >= 80) {
                    scoreEl.style.color = '#FF8C42';
                } else {
                    scoreEl.style.color = '#FFB800';
                }
            }
        }, 5000);

        // Dashboard Charts
        function initDashboardCharts() {
            if (window.monthlyChartInstance) return;
            window.monthlyChartInstance = new Chart(document.getElementById('monthlyChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['1일', '3일', '5일', '7일', '9일', '11일', '13일', '15일'],
                    datasets: [{ label: '탐지', data: [65, 78, 90, 81, 95, 110, 125, 88], borderColor: '#FF3D57', backgroundColor: 'rgba(255,61,87,0.1)', fill: true, tension: 0.4 }, { label: '차단', data: [60, 75, 85, 78, 92, 105, 120, 85], borderColor: '#00E676', backgroundColor: 'rgba(0,230,118,0.1)', fill: true, tension: 0.4 }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#B0B0C0' } } }, scales: { x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#6B6B80' } }, y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#6B6B80' } } } }
            });
            window.pieChartInstance = new Chart(document.getElementById('pieChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['검찰 사칭', '금융 사기', '대출 사기', '가족 사칭', '기타'],
                    datasets: [{ data: [35, 25, 20, 12, 8], backgroundColor: ['#FF3D57', '#FFB800', '#0066FF', '#A855F7', '#6B6B80'] }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { color: '#B0B0C0', padding: 20 } } } }
            });
        }

        // Report Charts
        function initReportCharts() {
            if (window.dailyChartInstance) return;
            
            const dailyCtx = document.getElementById('dailyChart').getContext('2d');
            const gradient1 = dailyCtx.createLinearGradient(0, 0, 0, 300);
            gradient1.addColorStop(0, 'rgba(74, 144, 226, 0.4)');
            gradient1.addColorStop(1, 'rgba(74, 144, 226, 0)');
            
            const gradient2 = dailyCtx.createLinearGradient(0, 0, 0, 300);
            gradient2.addColorStop(0, 'rgba(46, 92, 138, 0.4)');
            gradient2.addColorStop(1, 'rgba(46, 92, 138, 0)');
            
            window.dailyChartInstance = new Chart(dailyCtx, {
                type: 'line',
                data: {
                    labels: ['1일', '2일', '3일', '4일', '5일', '6일', '7일', '8일', '9일', '10일', '11일', '12일', '13일', '14일', '15일'],
                    datasets: [
                        { 
                            label: '탐지', 
                            data: [65, 78, 90, 81, 95, 70, 45, 82, 91, 88, 110, 125, 98, 105, 88], 
                            borderColor: '#3182F6',
                            backgroundColor: gradient1,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 4,
                            pointBackgroundColor: '#3182F6'
                        },
                        { 
                            label: '차단', 
                            data: [60, 72, 85, 78, 90, 65, 42, 78, 88, 85, 105, 120, 95, 100, 85], 
                            borderColor: '#2E5C8A',
                            backgroundColor: gradient2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 4,
                            pointBackgroundColor: '#2E5C8A'
                        }
                    ]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { display: false }
                    }, 
                    scales: { 
                        x: { grid: { display: false }, ticks: { color: '#6B6B80' } }, 
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#6B6B80' } } 
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
            
            // 위협 유형 도넛 차트
            new Chart(document.getElementById('threatTypeChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['검찰 사칭', '금융 사기', '대출 사기', '해외 발신', '기타'],
                    datasets: [{
                        data: [35, 25, 20, 15, 5],
                        backgroundColor: [
                            '#4A90E2',
                            '#6BA5E7',
                            '#2E5C8A',
                            '#3A7BC8',
                            '#1E3A5F'
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { 
                                color: '#B0B0C0',
                                padding: 16,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        }
                    }
                }
            });
            
            // 시간대별 통화량 바 차트
            const hourlyCtx = document.getElementById('hourlyChart').getContext('2d');
            const hourlyGradient = hourlyCtx.createLinearGradient(0, 0, 0, 300);
            hourlyGradient.addColorStop(0, 'rgba(74, 144, 226, 0.9)');
            hourlyGradient.addColorStop(1, 'rgba(46, 92, 138, 0.9)');
            
            new Chart(hourlyCtx, {
                type: 'bar',
                data: {
                    labels: ['00-04', '04-08', '08-12', '12-16', '16-20', '20-24'],
                    datasets: [{
                        label: '통화량',
                        data: [120, 85, 310, 420, 380, 195],
                        backgroundColor: hourlyGradient,
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: '#6B6B80' } },
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#6B6B80' } }
                    }
                }
            });
            
            // 지역별 위협 수평 바 차트
            const regionCtx = document.getElementById('regionChart').getContext('2d');
            const regionGradient = regionCtx.createLinearGradient(0, 0, 400, 0);
            regionGradient.addColorStop(0, '#4A90E2');
            regionGradient.addColorStop(1, '#2E5C8A');
            
            new Chart(regionCtx, {
                type: 'bar',
                data: {
                    labels: ['서울', '경기', '부산', '인천', '대구', '기타'],
                    datasets: [{
                        label: '위협 건수',
                        data: [420, 280, 150, 120, 95, 169],
                        backgroundColor: [
                            'rgba(74, 144, 226, 0.9)',
                            'rgba(107, 165, 231, 0.9)',
                            'rgba(46, 92, 138, 0.9)',
                            'rgba(58, 123, 200, 0.9)',
                            'rgba(30, 58, 95, 0.9)',
                            'rgba(80, 120, 160, 0.9)'
                        ],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#6B6B80' } },
                        y: { grid: { display: false }, ticks: { color: '#6B6B80' } }
                    }
                }
            });
        }

        // Card buttons
        document.querySelectorAll('.card-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.target.closest('.card-actions').querySelectorAll('.card-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // Case filters
        function filterCases(status, btn) {
            document.querySelectorAll('.case-filter').forEach(x => x.classList.remove('active'));
            btn.classList.add('active');
            
            const rows = document.querySelectorAll('#caseTable tbody tr');
            rows.forEach(row => {
                if (status === 'all' || row.dataset.status === status) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            updateCaseCounts();
        }

        function updateCaseCounts() {
            const rows = document.querySelectorAll('#caseTable tbody tr');
            let all = 0, progress = 0, done = 0, hold = 0;
            rows.forEach(row => {
                all++;
                const status = row.dataset.status;
                if (status === '진행 중') progress++;
                else if (status === '처리 완료') done++;
                else if (status === '보류') hold++;
            });
            document.getElementById('caseCountAll').textContent = all;
            document.getElementById('caseCountProgress').textContent = progress;
            document.getElementById('caseCountDone').textContent = done;
            document.getElementById('caseCountHold').textContent = hold;
        }

        function viewCaseDetail(caseId) {
            const caseData = {
                'CASE-2026-0115': { caller: '010-3847-****', type: '검찰 사칭', risk: 95, duration: '8분 32초', keywords: ['검사', '계좌동결', '보안카드'], transcript: '검찰 수사관입니다. 본인 명의 계좌가 범죄에 연루되어...' },
                'CASE-2026-0114': { caller: '+86-138-****', type: '해외 금융 사기', risk: 88, duration: '5분 15초', keywords: ['투자', '고수익', '비밀계좌'], transcript: '중국 투자 기회입니다. 원금 보장 고수익...' },
                'CASE-2026-0113': { caller: '02-1588-****', type: '대출 사기', risk: 72, duration: '4분 22초', keywords: ['대출', '저금리', '수수료'], transcript: '저금리 정부지원 대출 가능합니다. 선입금 없이...' },
                'CASE-2026-0112': { caller: '070-8834-****', type: '대출 사기', risk: 75, duration: '6분 11초', keywords: ['급전', '신용등급', '보증료'], transcript: '신용등급 무관하게 대출 가능합니다...' },
                'CASE-2026-0111': { caller: '010-5523-****', type: '보험 사기', risk: 58, duration: '3분 45초', keywords: ['보험금', '환급', '개인정보'], transcript: '보험 환급금이 발생했습니다. 본인 확인을...' },
                'CASE-2026-0110': { caller: '02-3456-****', type: '금융감독원 사칭', risk: 91, duration: '7분 20초', keywords: ['금감원', '명의도용', '자금이체'], transcript: '금융감독원입니다. 귀하의 명의가 도용되어...' },
                'CASE-2026-0109': { caller: '010-7782-****', type: '택배 사칭', risk: 45, duration: '2분 30초', keywords: ['배송', '통관', '수수료'], transcript: '해외 택배 통관 수수료 결제가 필요합니다...' },
                'CASE-2026-0108': { caller: '+82-10-****', type: '경찰 사칭', risk: 94, duration: '9분 15초', keywords: ['경찰', '출석요구', '자금추적'], transcript: '경찰청 사이버수사대입니다. 자금세탁 혐의로...' },
                'CASE-2026-0107': { caller: '070-1234-****', type: '투자 사기', risk: 62, duration: '4분 50초', keywords: ['코인', '원금보장', '선투자'], transcript: '암호화폐 투자로 월 30% 수익 보장합니다...' },
                'CASE-2026-0106': { caller: '02-9876-****', type: '은행 사칭', risk: 85, duration: '5분 40초', keywords: ['은행', '계좌정지', 'OTP'], transcript: '○○은행입니다. 비정상 거래가 감지되어 계좌가...' }
            };
            const data = caseData[caseId] || { caller: '알 수 없음', type: '알 수 없음', risk: 0, duration: '0분', keywords: [], transcript: '정보 없음' };
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal" style="max-width: 600px;">
                    <div class="modal-header"><div class="modal-title"><i class="ri-folder-info-line"></i> 케이스 상세 - ${caseId}</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">발신번호</div>
                                <div style="font-size: 18px; font-weight: 600;">${data.caller}</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">유형</div>
                                <div style="font-size: 18px; font-weight: 600;">${data.type}</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">위험도</div>
                                <div style="font-size: 18px; font-weight: 600; color: ${data.risk >= 80 ? 'var(--danger)' : data.risk >= 60 ? '#FFB800' : 'var(--primary)'};">${data.risk}%</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">통화시간</div>
                                <div style="font-size: 18px; font-weight: 600;">${data.duration}</div>
                            </div>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">탐지 키워드</div>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">${data.keywords.map(k => `<span style="background: rgba(74,144,226,0.15); color: var(--primary); padding: 6px 12px; border-radius: 6px; font-size: 14px;">${k}</span>`).join('')}</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">통화 내용 요약</div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; font-size: 15px; line-height: 1.6; color: var(--text-secondary);">"${data.transcript}"</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">닫기</button>
                        <button class="modal-btn-primary" onclick="closeTossModal(); showToast('음성 파일 재생을 시작합니다.');"><i class="ri-play-line"></i> 음성 재생</button>
                    </div>
                </div>
            `;
            openTossModal();
        }

        function completeCase(caseId, btn) {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-check-double-line"></i> 처리 완료 확인</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${caseId}</strong> 케이스를 처리 완료로 변경하시겠습니까?
                        </p>
                        <div style="background: var(--bg-primary); padding: 16px; border-radius: 10px; margin-top: 16px;">
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">처리 결과 메모</label>
                            <textarea id="caseNote" style="width: 100%; height: 80px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px; resize: none;" placeholder="처리 결과를 입력하세요..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmCompleteCase('${caseId}')"><i class="ri-check-line"></i> 처리 완료</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCaseBtn = btn;
        }

        function confirmCompleteCase(caseId) {
            const row = window.currentCaseBtn.closest('tr');
            row.dataset.status = '처리 완료';
            row.querySelector('.severity-badge').className = 'severity-badge low';
            row.querySelector('.severity-badge').textContent = '처리 완료';
            row.querySelector('.case-actions').innerHTML = `
                <button class="case-btn" onclick="viewCaseDetail('${caseId}')"><i class="ri-eye-line"></i></button>
                <button class="case-btn" onclick="reopenCase('${caseId}', this)"><i class="ri-restart-line"></i></button>
            `;
            updateCaseCounts();
            closeTossModal();
            showToast('케이스가 처리 완료되었습니다.');
        }

        function holdCase(caseId, btn) {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-pause-circle-line"></i> 보류 처리</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${caseId}</strong> 케이스를 보류 처리하시겠습니까?
                        </p>
                        <div style="background: var(--bg-primary); padding: 16px; border-radius: 10px; margin-top: 16px;">
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">보류 사유</label>
                            <select id="holdReason" style="width: 100%; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px;">
                                <option>추가 조사 필요</option>
                                <option>피해자 연락 대기</option>
                                <option>관련 기관 협조 대기</option>
                                <option>기타</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmHoldCase('${caseId}')"><i class="ri-pause-line"></i> 보류 처리</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCaseBtn = btn;
        }

        function confirmHoldCase(caseId) {
            const row = window.currentCaseBtn.closest('tr');
            row.dataset.status = '보류';
            row.querySelector('.severity-badge').className = 'severity-badge medium';
            row.querySelector('.severity-badge').textContent = '보류';
            row.querySelector('.case-actions').innerHTML = `
                <button class="case-btn" onclick="viewCaseDetail('${caseId}')"><i class="ri-eye-line"></i></button>
                <button class="case-btn" onclick="resumeCase('${caseId}', this)"><i class="ri-play-line"></i></button>
            `;
            updateCaseCounts();
            closeTossModal();
            showToast('케이스가 보류 처리되었습니다.');
        }

        function resumeCase(caseId, btn) {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-play-circle-line"></i> 케이스 재개</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${caseId}</strong> 케이스를 다시 진행하시겠습니까?
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmResumeCase('${caseId}')"><i class="ri-play-line"></i> 재개</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCaseBtn = btn;
        }

        function confirmResumeCase(caseId) {
            const row = window.currentCaseBtn.closest('tr');
            row.dataset.status = '진행 중';
            row.querySelector('.severity-badge').className = 'severity-badge critical';
            row.querySelector('.severity-badge').textContent = '진행 중';
            row.querySelector('.case-actions').innerHTML = `
                <button class="case-btn" onclick="viewCaseDetail('${caseId}')"><i class="ri-eye-line"></i></button>
                <button class="case-btn" onclick="completeCase('${caseId}', this)"><i class="ri-check-line"></i></button>
                <button class="case-btn" onclick="holdCase('${caseId}', this)"><i class="ri-pause-line"></i></button>
            `;
            updateCaseCounts();
            closeTossModal();
            showToast('케이스가 다시 진행 중으로 변경되었습니다.');
        }

        function reopenCase(caseId, btn) {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-restart-line"></i> 케이스 재오픈</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${caseId}</strong> 케이스를 다시 진행 상태로 변경하시겠습니까?
                        </p>
                        <div style="background: var(--bg-primary); padding: 16px; border-radius: 10px; margin-top: 16px;">
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">재오픈 사유</label>
                            <textarea id="reopenNote" style="width: 100%; height: 80px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px; resize: none;" placeholder="재오픈 사유를 입력하세요..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmReopenCase('${caseId}')"><i class="ri-restart-line"></i> 재오픈</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCaseBtn = btn;
        }

        function confirmReopenCase(caseId) {
            const row = window.currentCaseBtn.closest('tr');
            row.dataset.status = '진행 중';
            row.querySelector('.severity-badge').className = 'severity-badge critical';
            row.querySelector('.severity-badge').textContent = '진행 중';
            row.querySelector('.case-actions').innerHTML = `
                <button class="case-btn" onclick="viewCaseDetail('${caseId}')"><i class="ri-eye-line"></i></button>
                <button class="case-btn" onclick="completeCase('${caseId}', this)"><i class="ri-check-line"></i></button>
                <button class="case-btn" onclick="holdCase('${caseId}', this)"><i class="ri-pause-line"></i></button>
            `;
            updateCaseCounts();
            closeTossModal();
            showToast('케이스가 재오픈되었습니다.');
        }

        // ===== CUSTOMER MANAGEMENT FUNCTIONS =====
        const customerData = {
            'C001247': { name: '윤종후', phone: '010-1234-****', joined: '2024.08.15', status: 'active', threats: 12, saved: 3200, email: 'kimyh@example.com', address: '서울시 강남구', plan: '프리미엄', lastCall: '2시간 전', recentThreats: ['검찰 사칭 (01.15)', '대출 사기 (01.12)', '택배 사칭 (01.08)'] },
            'C001198': { name: '박효진', phone: '010-5678-****', joined: '2024.07.22', status: 'active', threats: 8, saved: 1800, email: 'parkcs@example.com', address: '서울시 서초구', plan: '스탠다드', lastCall: '5시간 전', recentThreats: ['금감원 사칭 (01.14)', '보험 사기 (01.10)'] },
            'C001156': { name: '안문학', phone: '010-9012-****', joined: '2024.06.10', status: 'active', threats: 23, saved: 5600, email: 'leesj@example.com', address: '경기도 성남시', plan: '프리미엄', lastCall: '30분 전', recentThreats: ['경찰 사칭 (01.15)', '투자 사기 (01.14)', '대출 사기 (01.13)'] },
            'C001089': { name: '길은진', phone: '010-3456-****', joined: '2024.05.28', status: 'pending', threats: 0, saved: 0, email: 'jungmh@example.com', address: '서울시 마포구', plan: '스탠다드', lastCall: '-', recentThreats: [] },
            'C000923': { name: '김지영', phone: '010-7890-****', joined: '2024.03.15', status: 'expired', threats: 5, saved: 920, email: 'choibs@example.com', address: '인천시 연수구', plan: '스탠다드 (만료)', lastCall: '15일 전', recentThreats: ['택배 사칭 (12.28)'] },
            'C001302': { name: '한진희', phone: '010-2345-****', joined: '2024.09.02', status: 'active', threats: 3, saved: 450, email: 'hanmy@example.com', address: '서울시 송파구', plan: '베이직', lastCall: '12시간 전', recentThreats: ['보험 사기 (01.10)'] },
            'C001278': { name: '윤건', phone: '010-6789-****', joined: '2024.08.28', status: 'active', threats: 18, saved: 4100, email: 'yoonjh@example.com', address: '경기도 용인시', plan: '프리미엄', lastCall: '1시간 전', recentThreats: ['검찰 사칭 (01.15)', '금감원 사칭 (01.13)', '대출 사기 (01.11)'] },
            'C001256': { name: '박정웅', phone: '010-4567-****', joined: '2024.08.20', status: 'active', threats: 7, saved: 1250, email: 'kangsj@example.com', address: '서울시 영등포구', plan: '스탠다드', lastCall: '4시간 전', recentThreats: ['택배 사칭 (01.12)'] },
            'C001234': { name: '차정훈', phone: '010-8901-****', joined: '2024.08.12', status: 'active', threats: 4, saved: 680, email: 'songky@example.com', address: '부산시 해운대구', plan: '베이직', lastCall: '6시간 전', recentThreats: ['보험 사기 (01.08)'] },
            'C001189': { name: '조옥정', phone: '010-3210-****', joined: '2024.07.30', status: 'active', threats: 15, saved: 3450, email: 'ohms@example.com', address: '대구시 수성구', plan: '프리미엄', lastCall: '20분 전', recentThreats: ['경찰 사칭 (01.15)', '투자 사기 (01.14)'] }
        };

        function searchCustomers(query) {
            const rows = document.querySelectorAll('#customersTable tbody tr');
            const lowerQuery = query.toLowerCase();
            rows.forEach(row => {
                const name = row.dataset.name.toLowerCase();
                const phone = row.dataset.phone.toLowerCase();
                const id = row.dataset.id.toLowerCase();
                if (name.includes(lowerQuery) || phone.includes(lowerQuery) || id.includes(lowerQuery)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function filterCustomers(status, btn) {
            document.querySelectorAll('#customerFilterGroup .filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            const rows = document.querySelectorAll('#customersTable tbody tr');
            rows.forEach(row => {
                if (status === 'all' || row.dataset.status === status) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function exportCustomers() {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-download-line"></i> 고객 데이터 내보내기</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 15px; color: var(--text-secondary); margin-bottom: 20px;">내보낼 형식을 선택하세요.</p>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button class="modal-btn-secondary" style="width: 100%; justify-content: flex-start; gap: 12px;" onclick="closeTossModal(); showToast('CSV 파일 다운로드를 시작합니다.');"><i class="ri-file-text-line"></i> CSV 형식 (.csv)</button>
                            <button class="modal-btn-secondary" style="width: 100%; justify-content: flex-start; gap: 12px;" onclick="closeTossModal(); showToast('Excel 파일 다운로드를 시작합니다.');"><i class="ri-file-excel-2-line"></i> Excel 형식 (.xlsx)</button>
                            <button class="modal-btn-secondary" style="width: 100%; justify-content: flex-start; gap: 12px;" onclick="closeTossModal(); showToast('PDF 파일 다운로드를 시작합니다.');"><i class="ri-file-pdf-line"></i> PDF 형식 (.pdf)</button>
                        </div>
                    </div>
                    <div class="modal-footer"><button class="modal-btn-secondary" onclick="closeTossModal()">취소</button></div>
                </div>
            `;
            openTossModal();
        }

        function showAddCustomerModal() {
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal" style="max-width: 560px;">
                    <div class="modal-header">
                        <div class="modal-title"><i class="ri-user-add-line"></i> 보이스가드 회원 등록</div>
                        <button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button>
                    </div>
                    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                        <div style="background: rgba(74, 144, 226, 0.1); border: 1px solid rgba(74, 144, 226, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 24px;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="ri-shield-check-line" style="font-size: 24px; color: var(--primary);"></i>
                                <div>
                                    <div style="font-size: 15px; font-weight: 600; color: var(--text-primary);">보이스가드 보호 서비스</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">AI 기반 실시간 보이스피싱 탐지 및 차단</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 16px;"><i class="ri-user-line"></i> 회원 기본 정보</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">성명 *</label>
                                    <input type="text" id="regName" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="홍길동">
                                </div>
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">생년월일 *</label>
                                    <input type="text" id="regBirth" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="1955-01-01">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px;">
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">성별 *</label>
                                    <select id="regGender" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;">
                                        <option value="">선택</option>
                                        <option value="male">남성</option>
                                        <option value="female">여성</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">연락처 *</label>
                                    <input type="tel" id="regPhone" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="010-0000-0000">
                                </div>
                            </div>
                            <div style="margin-top: 16px;">
                                <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">주소</label>
                                <input type="text" id="regAddress" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="서울시 강남구...">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 16px;"><i class="ri-group-line"></i> 보호자 정보 (긴급 연락)</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">보호자 1 성명 *</label>
                                    <input type="text" id="regGuardian1Name" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="홍철수 (아들)">
                                </div>
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">보호자 1 연락처 *</label>
                                    <input type="tel" id="regGuardian1Phone" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="010-0000-0000">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px;">
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">보호자 2 성명</label>
                                    <input type="text" id="regGuardian2Name" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="홍영희 (딸)">
                                </div>
                                <div>
                                    <label style="display: block; color: var(--text-secondary); font-size: 13px; margin-bottom: 6px;">보호자 2 연락처</label>
                                    <input type="tel" id="regGuardian2Phone" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; color: var(--text-primary); font-size: 15px;" placeholder="010-0000-0000">
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 16px;"><i class="ri-shield-star-line"></i> 보호 플랜 선택</div>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <label style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 12px; cursor: pointer; transition: all 0.2s;" onclick="selectPlan(this, 'basic')">
                                    <input type="radio" name="plan" value="basic" style="display: none;">
                                    <div style="width: 44px; height: 44px; background: var(--bg-tertiary); border-radius: 10px; display: flex; align-items: center; justify-content: center;"><i class="ri-shield-line" style="font-size: 22px; color: var(--text-secondary);"></i></div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 15px; font-weight: 600; color: var(--text-primary);">베이직</div>
                                        <div style="font-size: 13px; color: var(--text-secondary);">기본 통화 모니터링</div>
                                    </div>
                                    <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">월 9,900원</div>
                                </label>
                                <label style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(74, 144, 226, 0.1); border: 2px solid var(--primary); border-radius: 12px; cursor: pointer; transition: all 0.2s; position: relative;" onclick="selectPlan(this, 'standard')">
                                    <input type="radio" name="plan" value="standard" checked style="display: none;">
                                    <span style="position: absolute; top: -10px; right: 16px; background: var(--primary); color: white; font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 10px;">추천</span>
                                    <div style="width: 44px; height: 44px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center;"><i class="ri-shield-check-line" style="font-size: 22px; color: white;"></i></div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 15px; font-weight: 600; color: var(--text-primary);">스탠다드</div>
                                        <div style="font-size: 13px; color: var(--text-secondary);">AI 실시간 탐지 + 가족 알림</div>
                                    </div>
                                    <div style="font-size: 16px; font-weight: 700; color: var(--primary);">월 19,900원</div>
                                </label>
                                <label style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 12px; cursor: pointer; transition: all 0.2s;" onclick="selectPlan(this, 'premium')">
                                    <input type="radio" name="plan" value="premium" style="display: none;">
                                    <div style="width: 44px; height: 44px; background: linear-gradient(135deg, var(--primary), var(--secondary-blue)); border-radius: 10px; display: flex; align-items: center; justify-content: center;"><i class="ri-vip-crown-line" style="font-size: 22px; color: white;"></i></div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 15px; font-weight: 600; color: var(--text-primary);">프리미엄</div>
                                        <div style="font-size: 13px; color: var(--text-secondary);">24시간 전담 관제 + 보험 연계</div>
                                    </div>
                                    <div style="font-size: 16px; font-weight: 700; color: var(--primary);">월 39,900원</div>
                                </label>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: flex-start; gap: 12px; padding: 14px; background: var(--bg-tertiary); border-radius: 10px;">
                            <input type="checkbox" id="regAgree" style="margin-top: 2px;">
                            <label for="regAgree" style="font-size: 13px; color: var(--text-secondary); line-height: 1.5;">
                                <span style="color: var(--text-primary); font-weight: 500;">개인정보 수집 및 이용</span>에 동의합니다. 
                                보이스가드 서비스 제공을 위해 통화 내용이 AI 분석됩니다.
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="registerCustomer()"><i class="ri-check-line"></i> 회원 등록</button>
                    </div>
                </div>
            `;
            openTossModal();
        }
        
        function closeTossModal() {
            const backdrop = document.getElementById('modalBackdrop');
            if (backdrop) {
                backdrop.classList.remove('active');
                setTimeout(() => { backdrop.innerHTML = ''; }, 300);
            }
        }
        
        function openTossModal() {
            const backdrop = document.getElementById('modalBackdrop');
            if (backdrop) {
                // Force reflow to enable transition
                backdrop.offsetHeight;
                requestAnimationFrame(() => {
                    backdrop.classList.add('active');
                });
            }
        }
        
        function selectPlan(element, plan) {
            // Reset all plan styles
            document.querySelectorAll('[onclick^="selectPlan"]').forEach(el => {
                el.style.background = 'var(--bg-primary)';
                el.style.borderColor = 'var(--border)';
            });
            // Highlight selected
            element.style.background = 'rgba(74, 144, 226, 0.1)';
            element.style.borderColor = 'var(--primary)';
        }

        function registerCustomer() {
            const name = document.getElementById('regName').value;
            const phone = document.getElementById('regPhone').value;
            const guardian1 = document.getElementById('regGuardian1Name').value;
            const agree = document.getElementById('regAgree').checked;
            
            if (!name || !phone) {
                showToast('warning', '필수 정보 누락', '성명과 연락처를 입력해주세요.');
                return;
            }
            if (!guardian1) {
                showToast('warning', '필수 정보 누락', '보호자 1 정보를 입력해주세요.');
                return;
            }
            if (!agree) {
                showToast('warning', '동의 필요', '개인정보 수집 및 이용에 동의해주세요.');
                return;
            }
            
            closeTossModal();
            showToast('success', '회원 등록 완료', `${name} 회원님이 등록되었습니다. 보호 서비스가 시작됩니다.`);
        }

        function toggleAllCustomers(checkbox) {
            const checkboxes = document.querySelectorAll('.customer-checkbox');
            checkboxes.forEach(cb => cb.checked = checkbox.checked);
        }

        // Mobile: Click row to view customer detail
        document.querySelectorAll('#customersTable tbody tr').forEach(row => {
            row.addEventListener('click', (e) => {
                // Only trigger on mobile (when 관리 column is hidden)
                if (window.innerWidth <= 992 && !e.target.closest('.action-btns') && !e.target.closest('input')) {
                    const customerId = row.dataset.id;
                    if (customerId) {
                        viewCustomerDetail(customerId);
                    }
                }
            });
            // Add cursor pointer on mobile
            row.style.cursor = window.innerWidth <= 992 ? 'pointer' : '';
        });

        // Update cursor on resize
        window.addEventListener('resize', () => {
            document.querySelectorAll('#customersTable tbody tr').forEach(row => {
                row.style.cursor = window.innerWidth <= 992 ? 'pointer' : '';
            });
        });

        function viewCustomerDetail(customerId) {
            const data = customerData[customerId];
            if (!data) return;
            
            const statusLabels = { active: '보호 중', pending: '심사 중', expired: '만료' };
            const statusColors = { active: 'var(--primary)', pending: 'var(--secondary-blue)', expired: 'var(--danger)' };
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal" style="max-width: 650px;">
                    <div class="modal-header"><div class="modal-title"><i class="ri-user-heart-line"></i> 고객 상세 정보</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid var(--border);">
                            <div style="width: 60px; height: 60px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 600; color: var(--text-primary);">${data.name.charAt(0)}</div>
                            <div>
                                <div style="font-size: 20px; font-weight: 600; margin-bottom: 4px;">${data.name}</div>
                                <div style="color: var(--text-secondary);">#${customerId} · ${data.phone}</div>
                            </div>
                            <div style="margin-left: auto; padding: 8px 16px; border-radius: 20px; background: rgba(74,144,226,0.15); color: ${statusColors[data.status]}; font-weight: 500;">${statusLabels[data.status]}</div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">가입일</div>
                                <div style="font-size: 16px; font-weight: 600;">${data.joined}</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">보호 플랜</div>
                                <div style="font-size: 16px; font-weight: 600;">${data.plan}</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">차단 위협</div>
                                <div style="font-size: 16px; font-weight: 600; color: ${data.threats > 10 ? 'var(--danger)' : 'var(--text-primary)'};">${data.threats}건</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px;">
                                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 4px;">보호 금액</div>
                                <div style="font-size: 16px; font-weight: 600; color: var(--primary);">₩${data.saved.toLocaleString()}만</div>
                            </div>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">최근 차단 이력</div>
                            ${data.recentThreats.length > 0 ? 
                                `<div style="display: flex; flex-direction: column; gap: 8px;">${data.recentThreats.map(t => `<div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; font-size: 14px;"><i class="ri-shield-check-line" style="color: var(--primary); margin-right: 8px;"></i>${t}</div>`).join('')}</div>` : 
                                '<div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; text-align: center; color: var(--text-secondary);">차단 이력이 없습니다.</div>'
                            }
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; font-size: 14px;"><span style="color: var(--text-secondary);">이메일:</span> ${data.email}</div>
                            <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; font-size: 14px;"><span style="color: var(--text-secondary);">주소:</span> ${data.address}</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">닫기</button>
                        <button class="modal-btn-primary" onclick="closeTossModal(); sendCustomerNotification('${customerId}');"><i class="ri-notification-line"></i> 알림 발송</button>
                    </div>
                </div>
            `;
            openTossModal();
        }

        function sendCustomerNotification(customerId) {
            const data = customerData[customerId];
            if (!data) return;
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-notification-line"></i> 알림 발송</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 4px;">${data.name}</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">${data.phone}</div>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">발송 채널</label>
                            <div style="display: flex; gap: 10px;">
                                <label style="flex: 1; display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" checked> <i class="ri-message-2-line"></i> SMS
                                </label>
                                <label style="flex: 1; display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" checked> <i class="ri-notification-3-line"></i> 푸시
                                </label>
                                <label style="flex: 1; display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox"> <i class="ri-mail-line"></i> 이메일
                                </label>
                            </div>
                        </div>
                        <div>
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">메시지 템플릿</label>
                            <select id="notificationTemplate" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px; margin-bottom: 12px;" onchange="updateNotificationMessage()">
                                <option value="warning">[경고] 보이스피싱 주의 안내</option>
                                <option value="monthly">[정기] 월간 보안 리포트</option>
                                <option value="update">[안내] 서비스 업데이트 알림</option>
                                <option value="custom">[직접작성] 커스텀 메시지</option>
                            </select>
                            <textarea id="notificationMessage" style="width: 100%; height: 100px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px; resize: none;">[VoiceGuard] 최근 검찰 사칭 보이스피싱이 증가하고 있습니다. 수상한 전화를 받으시면 즉시 끊고 112로 신고해 주세요.</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="closeTossModal(); showToast('${data.name} 고객에게 알림이 발송되었습니다.');"><i class="ri-send-plane-line"></i> 발송</button>
                    </div>
                </div>
            `;
            openTossModal();
        }

        function updateNotificationMessage() {
            const template = document.getElementById('notificationTemplate').value;
            const messages = {
                'warning': '[VoiceGuard] 최근 검찰 사칭 보이스피싱이 증가하고 있습니다. 수상한 전화를 받으시면 즉시 끊고 112로 신고해 주세요.',
                'monthly': '[VoiceGuard] 이번 달 보안 리포트가 도착했습니다. 총 12건의 위협을 차단하여 약 3,200만원을 보호해드렸습니다.',
                'update': '[VoiceGuard] AI 탐지 시스템이 업데이트되었습니다. 더욱 강화된 보안으로 보호해드리겠습니다.',
                'custom': ''
            };
            document.getElementById('notificationMessage').value = messages[template];
        }

        function showCustomerSettings(customerId) {
            const data = customerData[customerId];
            if (!data) return;
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-settings-3-line"></i> 고객 보호 설정</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-bottom: 20px;">
                            <div style="font-weight: 600; margin-bottom: 4px;">${data.name}</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">#${customerId}</div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div><div style="font-weight: 500; margin-bottom: 4px;">해외 발신 차단</div><div style="color: var(--text-secondary); font-size: 13px;">해외에서 오는 모든 전화 자동 차단</div></div>
                                <div class="toggle active" onclick="this.classList.toggle('active')"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div><div style="font-weight: 500; margin-bottom: 4px;">실시간 알림</div><div style="color: var(--text-secondary); font-size: 13px;">위협 탐지 시 즉시 고객에게 알림</div></div>
                                <div class="toggle active" onclick="this.classList.toggle('active')"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div><div style="font-weight: 500; margin-bottom: 4px;">가족 알림</div><div style="color: var(--text-secondary); font-size: 13px;">위협 탐지 시 등록된 가족에게도 알림</div></div>
                                <div class="toggle" onclick="this.classList.toggle('active')"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div><div style="font-weight: 500; margin-bottom: 4px;">통화 녹음</div><div style="color: var(--text-secondary); font-size: 13px;">의심 통화 자동 녹음 (증거 보존용)</div></div>
                                <div class="toggle active" onclick="this.classList.toggle('active')"></div>
                            </div>
                            <div style="padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div style="font-weight: 500; margin-bottom: 12px;">보호 레벨</div>
                                <select style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px;">
                                    <option>일반 (표준 보호)</option>
                                    <option selected>강화 (적극적 차단)</option>
                                    <option>최고 (모든 의심 통화 차단)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="closeTossModal(); showToast('${data.name} 고객 설정이 저장되었습니다.');"><i class="ri-check-line"></i> 저장</button>
                    </div>
                </div>
            `;
            openTossModal();
        }

        function approveCustomer(customerId, btn) {
            const data = customerData[customerId];
            if (!data) return;
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-check-double-line"></i> 고객 승인</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${data.name}</strong> 고객의 서비스 가입을 승인하시겠습니까?
                        </p>
                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-top: 16px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;"><span style="color: var(--text-secondary);">신청일</span><span>${data.joined}</span></div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;"><span style="color: var(--text-secondary);">연락처</span><span>${data.phone}</span></div>
                            <div style="display: flex; justify-content: space-between;"><span style="color: var(--text-secondary);">플랜</span><span>${data.plan}</span></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmApproveCustomer('${customerId}')"><i class="ri-check-line"></i> 승인</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCustomerBtn = btn;
        }

        function confirmApproveCustomer(customerId) {
            const row = window.currentCustomerBtn.closest('tr');
            row.dataset.status = 'active';
            row.querySelector('.status-badge').className = 'status-badge active';
            row.querySelector('.status-badge').innerHTML = '<i class="ri-shield-check-line"></i> 보호 중';
            
            const actionBtns = row.querySelector('.action-btns');
            actionBtns.innerHTML = `
                <button class="tbl-action-btn" title="상세보기" onclick="viewCustomerDetail('${customerId}')"><i class="ri-eye-line"></i></button>
                <button class="tbl-action-btn" title="알림 발송" onclick="sendCustomerNotification('${customerId}')"><i class="ri-notification-line"></i></button>
                <button class="tbl-action-btn" title="설정" onclick="showCustomerSettings('${customerId}')"><i class="ri-settings-3-line"></i></button>
            `;
            
            customerData[customerId].status = 'active';
            closeTossModal();
            showToast('고객이 승인되어 보호 서비스가 시작되었습니다.');
        }

        function renewCustomer(customerId, btn) {
            const data = customerData[customerId];
            if (!data) return;
            
            document.getElementById('modalBackdrop').innerHTML = `
                <div class="toss-modal">
                    <div class="modal-header"><div class="modal-title"><i class="ri-refresh-line"></i> 서비스 갱신</div><button class="modal-close" onclick="closeTossModal()"><i class="ri-close-line"></i></button></div>
                    <div class="modal-body">
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--text-primary);">${data.name}</strong> 고객의 서비스를 갱신하시겠습니까?
                        </p>
                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-top: 16px;">
                            <label style="display: block; color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">갱신 기간</label>
                            <select id="renewPeriod" style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-size: 14px;">
                                <option value="1">1개월</option>
                                <option value="3">3개월</option>
                                <option value="6" selected>6개월</option>
                                <option value="12">12개월</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn-secondary" onclick="closeTossModal()">취소</button>
                        <button class="modal-btn-primary" onclick="confirmRenewCustomer('${customerId}')"><i class="ri-refresh-line"></i> 갱신</button>
                    </div>
                </div>
            `;
            openTossModal();
            window.currentCustomerBtn = btn;
        }

        function confirmRenewCustomer(customerId) {
            const row = window.currentCustomerBtn.closest('tr');
            row.dataset.status = 'active';
            row.querySelector('.status-badge').className = 'status-badge active';
            row.querySelector('.status-badge').innerHTML = '<i class="ri-shield-check-line"></i> 보호 중';
            
            const actionBtns = row.querySelector('.action-btns');
            actionBtns.innerHTML = `
                <button class="tbl-action-btn" title="상세보기" onclick="viewCustomerDetail('${customerId}')"><i class="ri-eye-line"></i></button>
                <button class="tbl-action-btn" title="알림 발송" onclick="sendCustomerNotification('${customerId}')"><i class="ri-notification-line"></i></button>
                <button class="tbl-action-btn" title="설정" onclick="showCustomerSettings('${customerId}')"><i class="ri-settings-3-line"></i></button>
            `;
            
            customerData[customerId].status = 'active';
            customerData[customerId].plan = customerData[customerId].plan.replace(' (만료)', '');
            closeTossModal();
            showToast('서비스가 갱신되었습니다. 보호가 재개됩니다.');
        }

        // Table row selection
        document.querySelectorAll('tbody tr').forEach(row => {
            row.addEventListener('click', () => {
                row.closest('tbody').querySelectorAll('tr').forEach(r => r.classList.remove('active'));
                row.classList.add('active');
            });
        });

        // ===== MOBILE MENU FUNCTIONS =====
        function toggleReportChart(headerEl) {
            const card = headerEl.closest('.report-chart-card');
            card.classList.toggle('collapsed');
        }
        
        function toggleMobileMenu() {
            // Show PC recommendation popup instead of sidebar on mobile
            showTossModal(
                'PC 사용 권장 안내',
                `<div style="text-align: center; padding: 10px 0;">
                    <i class="ri-computer-line" style="font-size: 48px; color: var(--primary); margin-bottom: 16px; display: block;"></i>
                    <p style="font-size: 16px; color: var(--text-primary); margin-bottom: 12px; font-weight: 600;">
                        더 나은 사용 경험을 위해<br>PC 환경을 권장합니다
                    </p>
                    <p style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">
                        VoiceGuard AI 관제 시스템은<br>
                        PC 환경에서 최적화되어 있습니다.<br><br>
                        실시간 모니터링, 상세 분석 등<br>
                        모든 기능을 원활하게 이용하시려면<br>
                        PC로 접속해 주세요.
                    </p>
                </div>`,
                [
                    { text: '확인', class: 'btn-modal-primary', onclick: 'closeTossModal()' }
                ]
            );
        }

        // ===== 피싱 방어 훈련 게임 =====
        const trainingScenarios = [
            {
                type: 'kakao',
                sender: '아들',
                profileEmoji: '👦',
                messages: [
                    { from: 'other', text: '엄마 나야', time: '오후 2:31' },
                    { from: 'other', text: '폰이 고장나서 수리 맡겼어ㅠㅠ', time: '오후 2:31' },
                    { from: 'other', text: '임시폰이라 카톡이 안돼', time: '오후 2:32' },
                    { from: 'other', text: '급한데 문화상품권 50만원어치 사서 핀번호 좀 보내줘!!', time: '오후 2:32' },
                    { from: 'other', text: '나중에 바로 갚을게 제발ㅠㅠ', time: '오후 2:33' },
                ],
                hints: ['다른 번호', '문화상품권', '핀번호 요구'],
                correctChoices: [2, 3],
                explanation: '2024년 피해액 1위! 자녀 사칭 메신저피싱입니다. 문화상품권, 구글기프트카드 PIN 요구가 특징입니다. 반드시 기존 번호로 직접 통화해 확인하세요.'
            },
            {
                type: 'sms',
                sender: '02-3480-XXXX',
                profileEmoji: '⚖️',
                messages: [
                    { from: 'other', text: '[서울중앙지검] 본인 명의 계좌가 자금세탁 범죄에 연루되어 긴급 수사 중입니다.', time: '오전 10:15' },
                    { from: 'other', text: '출석 전 원격 조사가 가능합니다. 아래 앱을 설치해주세요.', time: '오전 10:15' },
                    { from: 'other', text: '▶ 검찰청 보안앱 설치\nhxxp://prosecutor.xyz/app', time: '오전 10:16' },
                    { from: 'other', text: '미협조시 즉시 체포영장이 발부됩니다.', time: '오전 10:16' },
                ],
                hints: ['검찰 사칭', '앱 설치 유도', '체포 협박'],
                correctChoices: [2, 3],
                explanation: '2024년 가장 큰 피해 유형! 검찰은 절대 전화/문자로 앱 설치를 요구하지 않습니다. TeamViewer, AnyDesk 등 원격 앱 설치 요구는 100% 사기입니다.'
            },
            {
                type: 'sms',
                sender: '1899-XXXX',
                profileEmoji: '🏦',
                messages: [
                    { from: 'other', text: '[○○캐피탈] 정부지원 저금리 대환대출 대상자 선정 안내', time: '오후 1:22' },
                    { from: 'other', text: '기존 고금리 대출 → 연 3.9% 전환 가능', time: '오후 1:22' },
                    { from: 'other', text: '대출 실행을 위해 기존 대출금 상환 및 신용등급 상향비용 200만원 선입금 필요', time: '오후 1:23' },
                    { from: 'other', text: '입금 계좌: 카카오 79200204XXXXX', time: '오후 1:23' },
                ],
                hints: ['저금리 미끼', '선입금 요구', '정부지원 사칭'],
                correctChoices: [2, 3],
                explanation: '대환대출 사기는 2024년 급증! 정상적인 대출은 절대로 선입금을 요구하지 않습니다. "수수료", "보증금", "신용상향비용" 명목은 모두 사기입니다.'
            },
            {
                type: 'call',
                sender: '1588-XXXX',
                profileEmoji: '🏛️',
                messages: [
                    { from: 'other', text: '"안녕하세요, 금융감독원입니다."', time: '' },
                    { from: 'other', text: '"고객님 명의로 비대면 대출 3건이 실행되어 현재 계좌가 지급정지 예정입니다."', time: '' },
                    { from: 'other', text: '"피해 방지를 위해 안전계좌로 자금을 긴급 이동시켜야 합니다."', time: '' },
                    { from: 'other', text: '"제가 알려드리는 국가 보호 계좌로 즉시 이체해 주세요."', time: '' },
                ],
                hints: ['금감원 사칭', '안전계좌', '즉시 이체'],
                correctChoices: [2, 3],
                explanation: '금감원은 "안전계좌"라는 개념이 없습니다! 어떤 기관도 전화로 계좌이체를 요구하지 않습니다. 100% 보이스피싱입니다.'
            },
            {
                type: 'sms',
                sender: 'CJ대한통운',
                profileEmoji: '📦',
                messages: [
                    { from: 'other', text: '[CJ대한통운] 고객님의 택배가 주소 불일치로 반송 예정입니다.', time: '오전 9:45' },
                    { from: 'other', text: '주소 확인 및 재배송 신청 ▼', time: '오전 9:45' },
                    { from: 'other', text: 'hxxp://cjlogis.xyz/redelivery', time: '오전 9:45' },
                ],
                hints: ['택배 사칭', 'URL 클릭 유도', '악성앱'],
                correctChoices: [2, 3],
                explanation: '스미싱 문자의 대표 유형! 링크 클릭 시 악성앱이 설치되어 모든 개인정보와 금융정보가 탈취됩니다. 택배는 반드시 공식 앱에서 확인하세요.'
            },
            {
                type: 'kakao',
                sender: '딸',
                profileEmoji: '👧',
                messages: [
                    { from: 'other', text: '아빠~~', time: '오후 5:11' },
                    { from: 'other', text: '나 지금 급해서 그러는데', time: '오후 5:11' },
                    { from: 'other', text: '친구가 수술비가 급하대ㅠㅠ', time: '오후 5:12' },
                    { from: 'other', text: '300만원만 이 계좌로 보내줘', time: '오후 5:12' },
                    { from: 'other', text: '신한 110-XXX-XXXXXX 김OO', time: '오후 5:12' },
                    { from: 'other', text: '진짜 급해!!!! 빨리!!!', time: '오후 5:13' },
                ],
                hints: ['자녀 사칭', '급전 요청', '타인 계좌'],
                correctChoices: [2, 3],
                explanation: '가족 사칭 피싱의 전형! 급하다고 재촉할수록 의심하세요. 반드시 기존 번호로 직접 전화해서 본인 확인을 하세요.'
            },
            {
                type: 'sms',
                sender: '010-XXXX-XXXX',
                profileEmoji: '💒',
                messages: [
                    { from: 'other', text: '[모바일청첩장]', time: '오후 3:20' },
                    { from: 'other', text: '결혼식에 초대합니다 ♥', time: '오후 3:20' },
                    { from: 'other', text: '일시: 12월 28일(토) 오후 2시\n장소: 그랜드컨벤션홀', time: '오후 3:20' },
                    { from: 'other', text: '청첩장 확인 ▶ hxxp://wed.xyz/invite', time: '오후 3:20' },
                ],
                hints: ['청첩장 사칭', '링크 유도', '악성앱 설치'],
                correctChoices: [2, 3],
                explanation: '청첩장/부고장 스미싱이 급증 중! 지인의 경조사는 직접 연락해서 확인하고, 출처 불명의 링크는 절대 클릭하지 마세요.'
            },
            {
                type: 'call',
                sender: '070-XXXX-XXXX',
                profileEmoji: '👮',
                messages: [
                    { from: 'other', text: '"경찰청 사이버수사대입니다."', time: '' },
                    { from: 'other', text: '"본인 명의 휴대폰이 보이스피싱 범죄에 사용되어 현재 공동정범으로 수사 중입니다."', time: '' },
                    { from: 'other', text: '"본인 확인을 위해 주민등록번호 뒷자리와 계좌 비밀번호를 말씀해 주세요."', time: '' },
                    { from: 'other', text: '"협조 거부 시 즉시 체포 영장이 발부됩니다."', time: '' },
                ],
                hints: ['경찰 사칭', '개인정보 요구', '070 번호'],
                correctChoices: [2, 3],
                explanation: '경찰은 절대 전화로 주민번호나 비밀번호를 요구하지 않습니다. 070 인터넷전화는 피싱에 자주 사용되므로 각별히 주의하세요.'
            }
        ];

        let currentScenario = 0;
        let trainingScore = 0;
        let trainingStreak = 0;
        let timerInterval = null;
        let timeLeft = 180;

        function loadScenario(index) {
            const scenario = trainingScenarios[index % trainingScenarios.length];
            
            // Update chat type badge
            const typeBadge = document.getElementById('chatTypeBadge');
            typeBadge.className = 'chat-type-badge';
            
            if (scenario.type === 'kakao') {
                typeBadge.classList.add('kakao');
                typeBadge.innerHTML = '<i class="ri-kakao-talk-fill"></i><span>카카오톡</span>';
            } else if (scenario.type === 'sms') {
                typeBadge.classList.add('sms');
                typeBadge.innerHTML = '<i class="ri-message-2-fill"></i><span>문자메시지</span>';
            } else if (scenario.type === 'call') {
                typeBadge.classList.add('call');
                typeBadge.innerHTML = '<i class="ri-phone-fill"></i><span>전화 수신중</span>';
            }
            
            // Update sender name
            document.getElementById('chatSenderName').textContent = scenario.sender;
            
            // Clear and populate chat messages
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            // Add messages with delay animation
            scenario.messages.forEach((msg, i) => {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    
                    if (scenario.type === 'call') {
                        // 전화 통화 스타일
                        bubble.className = 'call-bubble';
                        bubble.innerHTML = `
                            <div class="call-icon"><i class="ri-volume-up-fill"></i></div>
                            <div class="call-text">${msg.text}</div>
                        `;
                    } else {
                        // 채팅 스타일
                        bubble.className = `chat-bubble ${msg.from}`;
                        const hasLink = msg.text.includes('hxxp');
                        const textClass = hasLink ? 'chat-text warning' : 'chat-text';
                        const displayText = msg.text.replace(/(hxxp:\/\/[^\s]+)/g, '<span class="fake-link">$1</span>');
                        
                        bubble.innerHTML = `
                            <div class="chat-bubble-content">
                                ${msg.from === 'other' ? `<div class="chat-avatar">${scenario.profileEmoji}</div>` : ''}
                                <div class="chat-text-wrap">
                                    <div class="${textClass}">${displayText}</div>
                                    ${msg.time ? `<span class="chat-time">${msg.time}</span>` : ''}
                                </div>
                            </div>
                        `;
                    }
                    
                    chatMessages.appendChild(bubble);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, i * 400);
            });
            
            // Reset hints
            const hintItems = document.querySelectorAll('.hint-item');
            hintItems.forEach((item, i) => {
                if (scenario.hints[i]) {
                    item.querySelector('span').textContent = scenario.hints[i];
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Reset choices
            document.querySelectorAll('.choice-btn').forEach(btn => {
                btn.classList.remove('selected');
                btn.disabled = false;
            });
            
            // Hide result, show game
            document.getElementById('trainingResult').style.display = 'none';
            document.querySelector('.training-game-area').style.display = 'grid';
            
            // Start timer after messages are shown
            setTimeout(() => {
                startTimer();
            }, scenario.messages.length * 400 + 500);
            
            // Update progress
            updateProgress();
        }

        function startTimer() {
            timeLeft = 180;
            updateTimerDisplay();
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    // Time's up - treat as wrong
                    showResult(false, '시간 초과! 보이스피싱 전화는 빠른 판단이 중요합니다.');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            document.querySelector('#scenarioTimer span').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function selectTrainingChoice(choiceNum) {
            clearInterval(timerInterval);
            
            const scenario = trainingScenarios[currentScenario % trainingScenarios.length];
            const isCorrect = scenario.correctChoices.includes(choiceNum);
            
            // Visual feedback
            const btn = document.querySelectorAll('.choice-btn')[choiceNum - 1];
            btn.classList.add('selected');
            
            // Disable all buttons
            document.querySelectorAll('.choice-btn').forEach(b => b.disabled = true);
            
            setTimeout(() => {
                showResult(isCorrect, scenario.explanation);
            }, 800);
        }

        function showResult(isCorrect, explanation) {
            if (isCorrect) {
                trainingScore += 100 + (timeLeft * 5);
                trainingStreak++;
                
                document.querySelector('.result-icon').className = 'result-icon correct';
                document.querySelector('.result-icon i').className = 'ri-shield-check-line';
                document.querySelector('.result-title').textContent = '완벽한 대응!';
                document.querySelector('.result-desc').textContent = '보이스피싱을 정확히 파악했습니다.';
            } else {
                trainingStreak = 0;
                
                document.querySelector('.result-icon').className = 'result-icon wrong';
                document.querySelector('.result-icon i').className = 'ri-error-warning-line';
                document.querySelector('.result-title').textContent = '아쉬워요!';
                document.querySelector('.result-desc').textContent = '이런 상황에서는 더 주의가 필요해요.';
            }
            
            document.getElementById('resultExplanation').textContent = explanation;
            
            // Update stats
            document.getElementById('trainingScore').textContent = trainingScore.toLocaleString();
            document.getElementById('trainingStreak').textContent = trainingStreak;
            
            // Update rank
            let rank = 'Bronze';
            if (trainingScore >= 2000) rank = 'Master';
            else if (trainingScore >= 1500) rank = 'Diamond';
            else if (trainingScore >= 1000) rank = 'Gold';
            else if (trainingScore >= 500) rank = 'Silver';
            document.getElementById('trainingRank').textContent = rank;
            
            // Show result
            document.querySelector('.training-game-area').style.display = 'none';
            document.getElementById('trainingResult').style.display = 'block';
        }

        function nextScenario() {
            currentScenario++;
            loadScenario(currentScenario);
        }

        function updateProgress() {
            const progress = ((currentScenario % 10) + 1) / 10 * 100;
            document.getElementById('progressBarFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${(currentScenario % 10) + 1} / 10`;
            
            // Update level badges
            document.querySelectorAll('.level-badge').forEach((badge, i) => {
                const levels = ['Bronze', 'Silver', 'Gold', 'Diamond', 'Master'];
                const thresholds = [0, 500, 1000, 1500, 2000];
                
                if (trainingScore >= thresholds[i]) {
                    badge.classList.add('active');
                } else {
                    badge.classList.remove('active');
                }
            });
        }

        // Initialize training game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('page-training')) {
                loadScenario(0);
            }
        });

        // Handle escape key to close modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeTossModal();
            }
        });
    </script>
</body>
</html>

