<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta 광고 소재 생성기</title>
    <link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <!-- 인트로 스플래시 화면 -->
    <div class="intro-splash" id="intro-splash">
        <div class="intro-content">
            <div class="intro-logo">
                <img src="../img/Mefimake-logo.png" alt="Mefimake" class="intro-logo-img">
            </div>
            <div class="intro-tagline">
                <span class="tagline-line line-1">Design less.</span>
                <span class="tagline-line line-2">Test more.</span>
            </div>
            <div class="intro-loader">
                <div class="loader-bar"></div>
            </div>
        </div>
    </div>

    <!-- 컨트롤 패널 -->
    <aside class="control-panel">
        <!-- 로고 헤더 -->
        <div class="panel-header">
            <img src="../img/Mefimake-logo.png" alt="Mefimake" class="panel-logo">
            <span class="header-badge">AI Studio</span>
        </div>

        <!-- 탭 네비게이션 -->
        <nav class="panel-tabs">
            <button class="panel-tab active" data-panel="design">
                <span class="panel-tab-icon">D</span>
                <span>디자인</span>
            </button>
            <button class="panel-tab" data-panel="content">
                <span class="panel-tab-icon">T</span>
                <span>콘텐츠</span>
            </button>
            <button class="panel-tab" data-panel="export">
                <span class="panel-tab-icon">E</span>
                <span>내보내기</span>
            </button>
        </nav>

        <!-- 패널 콘텐츠 -->
        <div class="panel-content">
            <!-- 디자인 패널 -->
            <div id="panel-design" class="panel-group">
                <!-- 캠페인 설정 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">C</span>
                            캠페인
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label>주제</label>
                            <input type="text" id="topic" placeholder="예: 속기사" value="속기사">
                        </div>

                        <div class="form-group">
                            <label>타겟</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="target-jobseeker" checked> 취준생
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="target-worker" checked> 직장인
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="target-housewife" checked> 주부
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>사이즈</label>
                            <select id="aspect-ratio">
                                <option value="1:1">1080 × 1080</option>
                                <option value="4:5">1280 × 720</option>
                                <option value="9:16">1080 × 1920</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- 템플릿 선택 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">T</span>
                            템플릿
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="template-grid" id="template-selector">
                            <button class="template-btn active" data-template="benefit">혜택형</button>
                            <button class="template-btn" data-template="question">질문형</button>
                            <button class="template-btn" data-template="story">스토리</button>
                            <button class="template-btn" data-template="stats">통계형</button>
                            <button class="template-btn" data-template="compare">비교형</button>
                            <button class="template-btn" data-template="urgency">긴급형</button>
                            <button class="template-btn recommended" data-template="fear_address">두려움</button>
                            <button class="template-btn recommended" data-template="anti_ad">안티광고</button>
                        </div>
                    </div>
                </section>

                <!-- 배경 디자인 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">B</span>
                            배경
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <!-- 배경 타입 선택 -->
                        <div class="form-group">
                            <div class="bg-type-selector">
                                <button class="bg-type-btn active" data-type="gradient">
                                    <span class="bg-type-icon">G</span>
                                    <span>그라데이션</span>
                                </button>
                                <button class="bg-type-btn" data-type="solid">
                                    <span class="bg-type-icon">S</span>
                                    <span>단색</span>
                                </button>
                                <button class="bg-type-btn" data-type="image">
                                    <span class="bg-type-icon">I</span>
                                    <span>이미지</span>
                                </button>
                            </div>
                        </div>

                        <!-- 그라데이션 편집기 -->
                        <div class="bg-editor gradient-editor" id="gradient-editor">
                            <div class="form-group">
                                <label>프리셋</label>
                                <div class="color-themes" id="color-themes">
                                    <button class="color-btn active" data-theme="professional" style="background: linear-gradient(135deg, #0f0c29, #302b63)" title="딥 오션"></button>
                                    <button class="color-btn" data-theme="warm" style="background: linear-gradient(135deg, #1a0a2e, #4a148c)" title="미드나잇 퍼플"></button>
                                    <button class="color-btn" data-theme="nature" style="background: linear-gradient(135deg, #0d1f22, #1b4332)" title="다크 포레스트"></button>
                                    <button class="color-btn" data-theme="energy" style="background: linear-gradient(135deg, #1a0a0a, #4a1c1c)" title="선셋 다크"></button>
                                    <button class="color-btn" data-theme="modern" style="background: linear-gradient(135deg, #0a0a0a, #1c1c1c)" title="카본 블랙"></button>
                                    <button class="color-btn" data-theme="trust" style="background: linear-gradient(135deg, #0a192f, #172a45)" title="일렉트릭 블루"></button>
                                </div>
                            </div>

                            <div class="gradient-custom">
                                <div class="form-group">
                                    <label>커스텀</label>
                                    <div class="gradient-preview" id="gradient-preview"></div>
                                </div>
                                
                                <div class="color-picker-row">
                                    <div class="color-picker-group">
                                        <label>시작</label>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="gradient-start" value="#1a365d">
                                            <input type="text" id="gradient-start-hex" value="#1a365d" class="hex-input">
                                        </div>
                                    </div>
                                    <div class="color-picker-group">
                                        <label>끝</label>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="gradient-end" value="#2563eb">
                                            <input type="text" id="gradient-end-hex" value="#2563eb" class="hex-input">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>각도 <span id="angle-value">135</span>°</label>
                                    <input type="range" id="gradient-angle" min="0" max="360" value="135" class="slider">
                                </div>
                            </div>
                        </div>

                        <!-- 단색 편집기 -->
                        <div class="bg-editor solid-editor" id="solid-editor" style="display: none;">
                            <div class="form-group">
                                <label>색상</label>
                                <div class="color-input-wrapper large">
                                    <input type="color" id="solid-color" value="#1a365d">
                                    <input type="text" id="solid-color-hex" value="#1a365d" class="hex-input">
                                </div>
                            </div>
                        </div>

                        <!-- 이미지 편집기 -->
                        <div class="bg-editor image-editor" id="image-editor" style="display: none;">
                            <div class="form-group">
                                <div class="image-upload-area" id="bg-image-upload">
                                    <input type="file" id="bg-image-input" accept="image/*" hidden>
                                    <div class="upload-placeholder" id="upload-placeholder">
                                        <span class="upload-icon">+</span>
                                        <span>이미지 업로드</span>
                                        <span class="upload-hint">JPG, PNG, WebP</span>
                                    </div>
                                    <div class="upload-preview" id="bg-upload-preview" style="display: none;">
                                        <img id="bg-preview-img" src="" alt="미리보기">
                                        <button class="remove-image-btn" id="remove-bg-image">×</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" id="image-controls" style="display: none;">
                                <div class="image-fit-options">
                                    <button class="fit-btn active" data-fit="cover">채우기</button>
                                    <button class="fit-btn" data-fit="contain">맞추기</button>
                                    <button class="fit-btn" data-fit="stretch">늘리기</button>
                                </div>

                                <div class="position-control">
                                    <label>위치</label>
                                    <div class="position-grid">
                                        <button class="pos-btn" data-pos="left top">↖</button>
                                        <button class="pos-btn" data-pos="center top">↑</button>
                                        <button class="pos-btn" data-pos="right top">↗</button>
                                        <button class="pos-btn" data-pos="left center">←</button>
                                        <button class="pos-btn active" data-pos="center center">●</button>
                                        <button class="pos-btn" data-pos="right center">→</button>
                                        <button class="pos-btn" data-pos="left bottom">↙</button>
                                        <button class="pos-btn" data-pos="center bottom">↓</button>
                                        <button class="pos-btn" data-pos="right bottom">↘</button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>오버레이 <span id="overlay-value">50</span>%</label>
                                    <input type="range" id="image-overlay" min="0" max="100" value="50" class="slider">
                                </div>

                                <div class="form-group">
                                    <label>오버레이 색상</label>
                                    <div class="color-input-wrapper">
                                        <input type="color" id="overlay-color" value="#000000">
                                        <input type="text" id="overlay-color-hex" value="#000000" class="hex-input">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>블러 <span id="blur-value">0</span>px</label>
                                    <input type="range" id="image-blur" min="0" max="20" value="0" class="slider">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 레이어 & 요소 추가 -->
                <section class="panel-section">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">L</span>
                            레이어
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <div class="element-upload-area" id="element-image-upload">
                                <input type="file" id="element-image-input" accept="image/*" hidden>
                                <button class="add-element-btn" id="add-image-btn">
                                    + 이미지 추가
                                </button>
                            </div>
                        </div>

                        <div class="layers-list" id="layers-list">
                            <div class="layers-header">
                                <span>레이어</span>
                                <button class="add-layer-btn" id="add-text-layer">+ 텍스트</button>
                            </div>
                            <div class="layers-items" id="layers-items">
                                <!-- 동적 생성 -->
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 콘텐츠 패널 -->
            <div id="panel-content" class="panel-group" style="display: none;">
                <!-- 콘텐츠 편집 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">T</span>
                            텍스트
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <div class="label-with-toggle">
                                <label>배지</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="badge-toggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <input type="text" id="badge-text" placeholder="배지 텍스트" value="속기사 자격증">
                        </div>

                        <div class="form-group">
                            <label>훅 카피</label>
                            <input type="text" id="hook-copy" placeholder="시선을 끄는 첫 문장">
                        </div>

                        <div class="form-group">
                            <label>메인 카피</label>
                            <textarea id="main-copy" rows="3" placeholder="핵심 메시지"></textarea>
                        </div>

                        <div class="form-group">
                            <label>서브 카피</label>
                            <input type="text" id="sub-copy" placeholder="보조 설명">
                        </div>

                        <div class="form-group">
                            <label>CTA</label>
                            <input type="text" id="cta-text" value="자세히 알아보기">
                        </div>

                        <button class="btn-generate-copy" id="generate-copy-btn">AI 카피 생성</button>
                    </div>
                </section>

                <!-- 텍스트 컬러 - 영역별 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">C</span>
                            텍스트 컬러
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <!-- 배지 컬러 -->
                        <div class="form-group color-control-row">
                            <label>배지</label>
                            <div class="color-control-inline">
                                <input type="color" id="badge-color-picker" value="#ffffff" class="mini-color-picker">
                                <input type="text" id="badge-color-hex" value="#ffffff" class="hex-input-mini">
                            </div>
                        </div>

                        <!-- 훅 컬러 -->
                        <div class="form-group color-control-row">
                            <label>훅 카피</label>
                            <div class="color-control-inline">
                                <input type="color" id="hook-color-picker" value="#ffffff" class="mini-color-picker">
                                <input type="text" id="hook-color-hex" value="#ffffff" class="hex-input-mini">
                            </div>
                        </div>

                        <!-- 메인 컬러 -->
                        <div class="form-group color-control-row">
                            <label>메인 카피</label>
                            <div class="color-control-inline">
                                <input type="color" id="main-color-picker" value="#ffffff" class="mini-color-picker">
                                <input type="text" id="main-color-hex" value="#ffffff" class="hex-input-mini">
                            </div>
                        </div>

                        <!-- 강조 컬러 -->
                        <div class="form-group color-control-row">
                            <label>강조 (strong)</label>
                            <div class="color-control-inline">
                                <input type="color" id="accent-color-picker" value="#c8f169" class="mini-color-picker">
                                <input type="text" id="accent-color-hex" value="#c8f169" class="hex-input-mini">
                            </div>
                        </div>

                        <!-- 서브 컬러 -->
                        <div class="form-group color-control-row">
                            <label>서브 카피</label>
                            <div class="color-control-inline">
                                <input type="color" id="sub-color-picker" value="#ffffff" class="mini-color-picker">
                                <input type="text" id="sub-color-hex" value="#ffffff" class="hex-input-mini">
                            </div>
                        </div>

                        <!-- CTA 컬러 -->
                        <div class="form-group color-control-row">
                            <label>CTA 배경</label>
                            <div class="color-control-inline">
                                <input type="color" id="cta-bg-color-picker" value="#c8f169" class="mini-color-picker">
                                <input type="text" id="cta-bg-color-hex" value="#c8f169" class="hex-input-mini">
                            </div>
                        </div>

                        <div class="form-group color-control-row">
                            <label>CTA 텍스트</label>
                            <div class="color-control-inline">
                                <input type="color" id="cta-text-color-picker" value="#1a1a1a" class="mini-color-picker">
                                <input type="text" id="cta-text-color-hex" value="#1a1a1a" class="hex-input-mini">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 텍스트 사이즈 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">S</span>
                            텍스트 사이즈
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="form-group size-control-row">
                            <label>배지 <span id="badge-size-value">13</span>px</label>
                            <input type="range" id="badge-size" min="8" max="24" value="13" class="size-slider">
                        </div>

                        <div class="form-group size-control-row">
                            <label>훅 카피 <span id="hook-size-value">36</span>px</label>
                            <input type="range" id="hook-size" min="20" max="72" value="36" class="size-slider">
                        </div>

                        <div class="form-group size-control-row">
                            <label>메인 카피 <span id="main-size-value">22</span>px</label>
                            <input type="range" id="main-size" min="12" max="48" value="22" class="size-slider">
                        </div>

                        <div class="form-group size-control-row">
                            <label>서브 카피 <span id="sub-size-value">16</span>px</label>
                            <input type="range" id="sub-size" min="10" max="32" value="16" class="size-slider">
                        </div>

                        <div class="form-group size-control-row">
                            <label>CTA <span id="cta-size-value">15</span>px</label>
                            <input type="range" id="cta-size" min="10" max="28" value="15" class="size-slider">
                        </div>
                    </div>
                </section>

                <!-- 콘텐츠 라이브러리 -->
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">L</span>
                            라이브러리
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="library-tabs">
                            <button class="lib-tab active" data-lib="hooks">훅</button>
                            <button class="lib-tab" data-lib="benefits">혜택</button>
                            <button class="lib-tab" data-lib="subCopies">서브</button>
                            <button class="lib-tab" data-lib="ctas">CTA</button>
                        </div>
                        <div class="library-content" id="library-list">
                            <!-- 동적 생성 -->
                        </div>
                    </div>
                </section>

                <!-- 생성 히스토리 -->
                <section class="panel-section">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">H</span>
                            히스토리
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="history-list" id="history-list">
                            <div class="history-empty">생성된 조합이 여기에 저장됩니다</div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 내보내기 패널 -->
            <div id="panel-export" class="panel-group" style="display: none;">
                <section class="panel-section open">
                    <div class="section-header" onclick="this.parentElement.classList.toggle('open')">
                        <div class="section-title">
                            <span class="section-icon">E</span>
                            내보내기
                        </div>
                        <span class="section-toggle">▶</span>
                    </div>
                    <div class="section-content">
                        <div class="export-buttons">
                            <button class="btn-export single" id="download-btn">
                                <span class="export-icon">1</span>
                                <div class="export-info">
                                    <span class="export-title">현재 이미지</span>
                                    <span class="export-desc">선택한 사이즈 1장</span>
                                </div>
                            </button>
                            
                            <button class="btn-export set" id="download-set-btn">
                                <span class="export-icon">3</span>
                                <div class="export-info">
                                    <span class="export-title">사이즈 세트</span>
                                    <span class="export-desc">1:1 + 16:9 + 9:16</span>
                                </div>
                            </button>
                            
                            <button class="btn-export batch" id="batch-btn">
                                <span class="export-icon">10</span>
                                <div class="export-info">
                                    <span class="export-title">배치 생성</span>
                                    <span class="export-desc">랜덤 템플릿 10종</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- 크레딧 -->
        <div class="panel-footer">
            <span class="credit">made by SEYOUNG LEE</span>
        </div>
    </aside>

    <!-- 메인 미리보기 영역 -->
    <main class="preview-area">
        <div class="preview-header">
            <h2>Canvas</h2>
            <div class="preview-controls">
                <button class="safe-zone-btn" id="toggle-safe-zone" title="안전영역 가이드 표시">
                    <span class="safe-icon">▣</span> Safe Zone
                </button>
                <button class="nav-btn" id="prev-variant">◀</button>
                <span id="variant-counter">1 / 20</span>
                <button class="nav-btn" id="next-variant">▶</button>
            </div>
        </div>

        <div class="preview-container">
            <!-- 광고 미리보기 캔버스 -->
            <div class="ad-canvas" id="ad-canvas">
                <!-- 배경 이미지 레이어 -->
                <div class="ad-bg-image" id="ad-bg-image"></div>
                <!-- 오버레이 -->
                <div class="ad-overlay" id="ad-overlay"></div>
                
                <!-- 추가된 이미지 요소들 (텍스트 뒤) -->
                <div class="ad-elements-back" id="ad-elements-back">
                    <!-- 동적 생성 -->
                </div>
                
                <!-- 추가된 이미지 요소들 (텍스트 앞) -->
                <div class="ad-elements" id="ad-elements">
                    <!-- 동적 생성 -->
                </div>

                <!-- 콘텐츠 -->
                <div class="ad-content">
                    <div class="ad-badge">속기사 자격증</div>
                    <h2 class="ad-hook">매달 300만원 이상?</h2>
                    <p class="ad-main">
                        재택근무하며<br>
                        <strong>나만의 시간</strong> 가지세요
                    </p>
                    <p class="ad-sub">하루 2시간, 집에서 시작하는 새로운 커리어</p>
                    <button class="ad-cta">자세히 알아보기 →</button>
                </div>
                <div class="ad-footer">
                    <span class="ad-brand">Timbel</span>
                </div>
            </div>
        </div>

        <!-- 생성된 변형들 썸네일 -->
        <div class="variants-grid" id="variants-grid">
            <!-- 동적 생성 -->
        </div>
    </main>

    <!-- 배치 생성 모달 -->
    <div class="modal" id="batch-modal">
        <div class="modal-content">
            <h2>배치 생성 중...</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p class="progress-text" id="progress-text">0 / 20 생성 완료</p>
            <div class="batch-preview" id="batch-preview"></div>
        </div>
    </div>

    <!-- 이미지 요소 편집 모달 -->
    <div class="modal" id="element-modal">
        <div class="modal-content element-editor">
            <h2>이미지 편집</h2>
            <div class="element-edit-form">
                <div class="form-group">
                    <label>크기 <span id="element-size-value">100</span>%</label>
                    <input type="range" id="element-size" min="10" max="200" value="100" class="slider">
                </div>
                <div class="form-group">
                    <label>회전 <span id="element-rotation-value">0</span>°</label>
                    <input type="range" id="element-rotation" min="-180" max="180" value="0" class="slider">
                </div>
                <div class="form-group">
                    <label>투명도 <span id="element-opacity-value">100</span>%</label>
                    <input type="range" id="element-opacity" min="0" max="100" value="100" class="slider">
                </div>
                <div class="element-actions">
                    <button class="btn-delete-element" id="delete-element">삭제</button>
                    <button class="btn-close-modal" id="close-element-modal">완료</button>
                </div>
            </div>
        </div>
    </div>

    <script src="content-matrix.js"></script>
    <script src="app.js"></script>
    <script src="design-editor.js"></script>
    <script>
        // 탭 네비게이션
        document.querySelectorAll('.panel-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // 탭 활성화
                document.querySelectorAll('.panel-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // 패널 전환
                const panelId = tab.dataset.panel;
                document.querySelectorAll('.panel-group').forEach(p => p.style.display = 'none');
                document.getElementById('panel-' + panelId).style.display = 'block';
            });
        });

        // Safe Zone 가이드 토글
        const safeZoneBtn = document.getElementById('toggle-safe-zone');
        const adCanvas = document.getElementById('ad-canvas');
        
        safeZoneBtn.addEventListener('click', () => {
            safeZoneBtn.classList.toggle('active');
            adCanvas.classList.toggle('show-safe-zone');
        });

        // 배지 텍스트 수정 및 토글
        const badgeTextInput = document.getElementById('badge-text');
        const badgeToggle = document.getElementById('badge-toggle');
        const adBadge = document.querySelector('.ad-badge');
        
        badgeTextInput?.addEventListener('input', (e) => {
            adBadge.textContent = e.target.value;
        });
        
        badgeToggle?.addEventListener('change', (e) => {
            adBadge.style.display = e.target.checked ? 'inline-block' : 'none';
            badgeTextInput.disabled = !e.target.checked;
            badgeTextInput.style.opacity = e.target.checked ? '1' : '0.5';
        });

        // 영역별 컬러 변경
        function initTextColorControls() {
            const canvas = document.getElementById('ad-canvas');
            
            // 컬러 컨트롤 헬퍼
            function setupColorControl(pickerId, hexId, targetSelector, property = 'color') {
                const picker = document.getElementById(pickerId);
                const hex = document.getElementById(hexId);
                
                function applyColor(color) {
                    const targets = canvas.querySelectorAll(targetSelector);
                    targets.forEach(el => {
                        el.style[property] = color;
                    });
                    if (picker) picker.value = color;
                    if (hex) hex.value = color;
                }
                
                picker?.addEventListener('input', (e) => applyColor(e.target.value));
                hex?.addEventListener('change', (e) => {
                    let val = e.target.value;
                    if (!val.startsWith('#')) val = '#' + val;
                    applyColor(val);
                });
            }
            
            // 배지 컬러
            setupColorControl('badge-color-picker', 'badge-color-hex', '.ad-badge');
            
            // 훅 컬러
            setupColorControl('hook-color-picker', 'hook-color-hex', '.ad-hook');
            
            // 메인 컬러
            setupColorControl('main-color-picker', 'main-color-hex', '.ad-main');
            
            // 강조 컬러 (strong)
            setupColorControl('accent-color-picker', 'accent-color-hex', '.ad-main strong');
            
            // 서브 컬러
            setupColorControl('sub-color-picker', 'sub-color-hex', '.ad-sub');
            
            // CTA 배경
            setupColorControl('cta-bg-color-picker', 'cta-bg-color-hex', '.ad-cta', 'background');
            
            // CTA 텍스트
            setupColorControl('cta-text-color-picker', 'cta-text-color-hex', '.ad-cta');
        }
        
        initTextColorControls();

        // 텍스트 사이즈 조절
        function initSizeControls() {
            const canvas = document.getElementById('ad-canvas');
            
            function setupSizeControl(sliderId, valueId, targetSelector) {
                const slider = document.getElementById(sliderId);
                const valueDisplay = document.getElementById(valueId);
                
                slider?.addEventListener('input', (e) => {
                    const size = e.target.value;
                    valueDisplay.textContent = size;
                    const targets = canvas.querySelectorAll(targetSelector);
                    targets.forEach(el => {
                        el.style.fontSize = size + 'px';
                    });
                });
            }
            
            setupSizeControl('badge-size', 'badge-size-value', '.ad-badge');
            setupSizeControl('hook-size', 'hook-size-value', '.ad-hook');
            setupSizeControl('main-size', 'main-size-value', '.ad-main');
            setupSizeControl('sub-size', 'sub-size-value', '.ad-sub');
            setupSizeControl('cta-size', 'cta-size-value', '.ad-cta');
        }
        
        initSizeControls();

        // 인트로 스플래시 화면
        const introSplash = document.getElementById('intro-splash');
        if (introSplash) {
            setTimeout(() => {
                introSplash.classList.add('fade-out');
                setTimeout(() => {
                    introSplash.classList.add('hidden');
                }, 600);
            }, 2800);
        }
    </script>
</body>
</html>
